<!DOCTYPE HTML>
<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1" />
		<meta name="viewport" content="width=device-width" />
		<title>Webshim - foms polyfill</title>
		
		
		<link href="../css/styles.css" rel="stylesheet" />
		<link rel="stylesheet" href="../css/prism.css" /> 
		<script>
			(function(){
				var src = (Object.defineProperty && window.addEventListener) ?
					'http://code.jquery.com/jquery-2.0.3.min.js' :
					'http://code.jquery.com/jquery-1.10.1.min.js'
				;
				
				document.write('<script src="'+ src +'"><\/script>');
			})();
		</script>
		<script src="../../js-webshim/minified/extras/modernizr-custom.js"></script>

		<script src="../../js-webshim/minified/polyfiller.js"></script>

		<script>
			webshims.setOptions('forms', {
				lazyCustomMessages: true,
				replaceValidationUI: true,
				customDatalist: true
			});
			webshims.polyfill('forms');
			// load the forms polyfill
		</script>

	</head>

	<body>

		<div id="sidebar" class="interface">

			<a class="toc_title" href="../index.html"> Webshim <span class="version">({{version}})</span> </a>
			<ul class="toc_section">
				<li>
					&raquo; <a href="https://github.com/aFarkas/webshim">GitHub Repository</a>
				</li>
			</ul>

			<a class="toc_title" href="#introduction"> Forms Introduction </a>

			<a class="toc_title" href="#Locale-Settings"> Controlling Locale / errormessage Settings </a>
			<ul class="toc_section">
				
				<li>
					– <a href="#Locale-activeLang">Changing locale <code>.activeLang</code></a>
				</li>
				<li>
					– <a href="#Locale-validityMessages">Add new or change locale <code>.validityMessages</code></a>
				</li>
				<li>
					- <a href="#Locale-customMessages"><code>customMessages</code> / <code>lazyCustomMessages</code></a>
				</li>
				<li>
					- <a href="#Locale-markupMessages"><code>data-errormessage</code> attribute</a>
				</li>
				<li>
					- <a href="#Locale-getErrorMessage"><code>.getErrorMessage</code> method</a>
				</li>
			</ul>

			<a class="toc_title" href="#UI-Settings">Customizing UI/UX of form validation</a>
			<ul class="toc_section">
				<li>
					– <a href="#UI-replaceValidationUI"><code>replaceValidationUI</code> and <code>.user-error</code>/<code>.user-success</code></a>
				</li>
				<li>
					– <a href="#UI-ival">Live validation with <code>iVal</code> option</a>
				</li>
			</ul>
			
			<a class="toc_title" href="#Custom-validity">Custom errors</a>
			<ul class="toc_section">
				<li>
					– <a href="#Custom-addValidators"><code>addValidators</code> option</a>
				</li>
			</ul>
			
			<a class="toc_title" href="#Datalist"><code>datalist</code> element</a>

			<a class="toc_title" href="#WSpopover">webshims popover options</a>

		</div>

		<div class="container">

			<p>
				<img id="logo" src="../images/webshim2.png" alt="webshim" />
			</p>
			

			<h2 id="introduction" class="header">Introduction</h2>

			<p>
				Webshim's <code class="i">forms</code> feautre implements the hole constraint validation API (validity, checkValidity, setCustomValidity, required, pattern, novalidate ...) and some other really nice form features (output element, form-attribute, fieldset[disabled] [list]/datalist, setSelectionRange etc.) in incapable browsers. 
			</p>
			<p>This document does not describe how to use those native/polyfilled features. It only describes the extensions build on top of it.</p>
			
			<h2 id="Locale-Settings" class="header">Locale Settings</h2>
			
			<p>Changes to the locale settings normally only affect polyfilled browsers. To get those changes visible in capable browsers either the <code class="i">replaceValidationUI</code> or the <code class="i">iVal</code> (instant/live validation) feature should be used.</p>
			
			<h3 id="Locale-activeLang">Changing locale <code class="i">webshims.activeLang</code></h3>
			
			<p>The used locale settings can be read or changed using the <code class="i">webshims.activeLang</code> method.</p>
<pre><code class="language-javascript">
webshims.activeLang(); //returns current set language

webshims.activeLang('en'); //set locale to en
</code></pre>
			<p>Webshim supports the following locales out of the box: <select class="active-lang"></select>.</p>
		
			<form action="#">
				<input placeholder="required email" type="email" required />
			
				<input type="submit" />
			</form>
			<h3 id="Locale-validityMessages">Adding new / changing existing  locale settings and errormessages.</h3>
			<p>Existing locale setting files can be found in the <a href="../js-webshim/dev/shims/i18n/">shims/i18n directory</a>. Simply take one of those files (save as new), embed it after the polyfiller.js and adjust it to your needs.</p>
<pre data-src="../js-webshim/dev/shims/i18n/formcfg-en.js"><code class="language-javascript">
</code></pre>
			<p>Note: <code class="i">webshims.activeLang</code> with the corresponding language code has to be called to activate the locale</p>
<pre><code class="language-javascript">
//locale definition with the locale code 'cd'
webshims.validityMessages.cd = {
	//your errormessages
};
webshims.formcfg.cd = {
	//locale settings
};

//activate locale 'cd'
webshims.activeLang('cd'); 
</code></pre>
			<h3 id="Locale-customMessages"><code class="i">customMessages</code>/<code class="i">lazyCustomMessages</code></h3>
			<p>Normally the validationMessages are only loaded by incapable browsers with the options <code class="i">customMessages</code> or <code class="i">lazyCustomMessages</code> those can be loaded and used in all browsers.</p>
			<p><code class="i">lazyCustomMessages</code> loads the messages only after window onload and therefore has no negative impact on the network performance.</p>
<pre><code class="language-javascript">
webshims.setOptions('forms', {
	//set lazyCustomMessages to true
	lazyCustomMessages: true,
	//show custom styleable validation bubble
	replaceValidationUI: true
});

//start polyfilling
webshims.polyfill('forms');
</code></pre>
			<h3 id="Locale-markupMessages"><code class="i">data-errormessage</code> attribute</h3>
			<p>The used validation message can also be controlled by markup using the <code class="i">data-errormessage</code> attribute.</p>
			<p>The value of the data-errormessage attribute is either a simple string containing the errormessage or a valid JSON with different keys representing the different HTML5 validity constraints (<code>["valueMissing", "typeMismatch", "patternMismatch", "customError", "tooLong",  "badInput", "rangeUnderflow", "rangeOverflow","stepMismatch"]</code>)</p>
			<iframe class="fiddle-example" width="100%" height="270" src="http://jsfiddle.net/trixta/YPCQP/embedded/html,result,js" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
			<p>In case <code class="i">customMessages</code> or <code class="i">lazyCustomMessages</code> are set to true the data-errormessage as a JSON can be also written as flattened data-errormessage-[dashed-key] attribute.</p>
			<iframe class="fiddle-example" width="100%" height="200" src="http://jsfiddle.net/trixta/YT7m5/embedded/html,result,js" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
			
			<h3 id="Locale-getErrorMessage"><code class="i">$.getErrorMessage</code> method</h3>
			<p><code class="i">.getErrorMessage</code> returns the validationMessage of an invalid form field. As an enhancement to the native <code>validationMessage</code> property the return value can be simpler controlled by the developer. It uses the first possible found message set by a) data-errormessage attribute, b) <code class="i">validityMessages</code> object or last c) native/polyfilled <code>validationMessage</code> property.</p>
			<p><code class="language-javascript">$('input').getErrorMessage();</code></p>
			<iframe class="fiddle-example" width="100%" height="350" src="http://jsfiddle.net/trixta/6ELuD/embedded/result,js,html" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
			
			<h2 id="UI-Settings">Customizing UI/UX of form validation</h2>
			<p>HTML5 constraint form validation implements a very simple UI for form validation. In most cases developers want to enhance this UI. Webshim implementation allows this by using all native form features (<code>noValidate</code> or preventing default behavior of the <code>invalid</code> event), but also gives some pre-build configuration options to implement clientside form validation with a very good user experience and great control over style and behavior.</p>
			
			<h3 id="UI-replaceValidationUI"><code class="i">replaceValidationUI</code> and <code class="i">.user-error</code>/<code class="i">.user-success</code></h3>
			<p>With <code class="i">replaceValidationUI</code> set to true the validation bubble of the browser will be replaced with a webshims popover with the additional class <code>validity-alert</code>. Additionally all form fields can be styled using the classes <code>.user-error</code> and <code>.user-success</code></p>
			<iframe class="fiddle-example" width="100%" height="200" src="http://jsfiddle.net/trixta/Xp3Vb/embedded/js,css,result,html" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
			
			
			<h3 id="UI-ival">Live form validation <code class="i">iVal</code></h3>
			<p>The instant form validation feature of webshims is a simple to use but powerfull and UX enhanced feature. Simply put a <code class="i">ws-validate</code> class to your form element:</p>
			<iframe class="fiddle-example" width="100%" height="200" src="http://jsfiddle.net/trixta/9859C/embedded/html,result,js,css" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
			<p>The instant validation feature can be controlled through the <code class="i">iVal</code> option object. The <code class="i">iVal</code> option has the following defaults.</p>
<pre><code class="language-javascript">
webshims.setOptions('forms', {
	//instant validation options
	iVal: {
		//a simple selector of your form element
		"sel": ".ws-validate", 
		//wether webshim should show a bubble on invalid event: "hide" | true | false
		"handleBubble": "hide", 
		
		//selector or function to find the wrapper of the form field[s] (if there are more than one form field in the wrapper they will be handled as a group with one combined errormessage)
		"fieldWrapper": ":not(span), :not(label), :not(em), :not(strong), :not(p)",
		
		//wether an invalid input should be re-checked while user types
		"recheckDelay": 400,
		
		//the class of the errorbox, which is normally appended to the fieldWrapper
		"errorBoxClass": "ws-errorbox", 
		
		//classes to adjust to your CSS/CSS-framework
		"errorMessageClass": "ws-errormessage",
		"errorWrapperClass": "ws-invalid", 
		"successWrapperClass": "ws-success", 
		
		"fx": "slide" 
	}
});			
//start polyfilling
webshims.polyfill('forms');
</code></pre>
			<p>The iVal feature integrates well into different CSS-frameworks like bootstrap or jQuery mobile:</p>
			<iframe  class="fiddle-example" width="100%" height="300" src="http://jsfiddle.net/trixta/T29Kx/embedded/js,result,html,css" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
</div>
			

		<script src="../demo-js/demo.js"></script>
	</body>
</html>
