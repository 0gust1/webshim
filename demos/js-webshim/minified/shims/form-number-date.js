jQuery.webshims.register("forms-ext",function(c,k){if(!(Modernizr.input.valueAsNumberSet&&Modernizr.input.valueAsDate)){k.getStep=function(a,h){var g=c.attr(a,"step");if(g==="any")return g;h=h||q(a);if(!l[h]||!l[h].step)return g;g=m.number.asNumber(g);return(!isNaN(g)&&g>0?g:l[h].step)*l[h].stepScaleFactor};k.addMinMaxNumberToCache=function(a,h,g){if(!(a+"AsNumber"in g)){g[a+"AsNumber"]=l[g.type].asNumber(h.attr(a));if(isNaN(g[a+"AsNumber"])&&a+"Default"in l[g.type])g[a+"AsNumber"]=l[g.type][a+"Default"]}};
var t=parseInt("NaN",10),l=k.inputTypes,s=function(a){return typeof a=="number"||a&&a==a*1},v=function(a){return Modernizr.input.valueAsNumber&&c('<input type="'+a+'" />').attr("type")===a},q=function(a){return(a.getAttribute("type")||"").toLowerCase()},y=k.addMinMaxNumberToCache,u=function(a,h){a=""+a;h-=a.length;for(var g=0;g<h;g++)a="0"+a;return a};if(!Modernizr.input.valueAsNumber||!Modernizr.input.valueAsDate){k.addValidityRule("stepMismatch",function(a,h,g){if(h==="")return false;if(!("type"in
g))g.type=q(a[0]);if(g.type=="date")return false;var n=false;if(l[g.type]&&l[g.type].step){if(!("step"in g))g.step=k.getStep(a[0],g.type);if(g.step=="any")return false;if(!("valueAsNumber"in g))g.valueAsNumber=l[g.type].asNumber(h);if(isNaN(g.valueAsNumber))return false;y("min",a,g);a=g.minAsNumber;if(isNaN(a))a=l[g.type].stepBase||0;n=Math.abs((g.valueAsNumber-a)%g.step);n=!(n<=1.0E-7||Math.abs(n-g.step)<=1.0E-7)}return n});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",
factor:-1}].forEach(function(a){k.addValidityRule(a.name,function(h,g,n){var e=false;if(g==="")return e;if(!("type"in n))n.type=q(h[0]);if(l[n.type]&&l[n.type].asNumber){if(!("valueAsNumber"in n))n.valueAsNumber=l[n.type].asNumber(g);if(isNaN(n.valueAsNumber))return false;y(a.attr,h,n);if(isNaN(n[a.attr+"AsNumber"]))return e;e=n[a.attr+"AsNumber"]*a.factor<n.valueAsNumber*a.factor-1.0E-7}return e})})}k.defineNodeNameProperty("input","type",{get:function(){var a=q(this);return k.inputTypes[a]?a:this.type||
this.getAttribute("type")}});var z=k.defineNodeNameProperty("input","valueAsNumber",{get:function(){var a=q(this);return l[a]&&l[a].asNumber?l[a].asNumber(c.attr(this,"value")):t},set:function(a){var h=q(this);if(l[h]&&l[h].numberToString)if(isNaN(a))c.attr(this,"value","");else{h=l[h].numberToString(a);h!==false?c.attr(this,"value",h):k.warn("INVALID_STATE_ERR: DOM Exception 11")}else z._supset&&z._supset.call(this,arguments)}}),w=k.defineNodeNameProperty("input","valueAsDate",{get:function(){var a=
q(this);return l[a]&&l[a].asDate&&!l[a].noAsDate?l[a].asDate(c.attr(this,"value")):w._supget&&w._supget.call(this)},set:function(a){var h=q(this);if(l[h]&&l[h].dateToString){if(a===null){c.attr(this,"value","");return""}h=l[h].dateToString(a);if(h!==false){c.attr(this,"value",h);return h}else k.warn("INVALID_STATE_ERR: DOM Exception 11")}else return w._supset&&w._supset(this,arguments)||null}}),m={number:{mismatch:function(a){return!s(a)},step:1,stepScaleFactor:1,asNumber:function(a){return s(a)?
a*1:t},numberToString:function(a){return s(a)?a:false}},range:{minDefault:0,maxDefault:100},date:{mismatch:function(a){if(!a||!a.split||!/\d$/.test(a))return true;var h=a.split(/\u002D/);if(h.length!==3)return true;var g=false;c.each(h,function(n,e){if(!(s(e)||e&&e=="0"+e*1)){g=true;return false}});if(g)return g;if(h[0].length!==4||h[1].length!=2||h[1]>12||h[2].length!=2||h[2]>33)g=true;return a!==this.dateToString(this.asDate(a,true))},step:1,stepScaleFactor:864E5,asDate:function(a,h){if(!h&&this.mismatch(a))return null;
return new Date(this.asNumber(a,true))},asNumber:function(a,h){var g=t;if(h||!this.mismatch(a)){a=a.split(/\u002D/);g=Date.UTC(a[0],a[1]-1,a[2])}return g},numberToString:function(a){return s(a)?this.dateToString(new Date(a*1)):false},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+u(a.getUTCMonth()+1,2)+"-"+u(a.getUTCDate(),2):false}},time:{mismatch:function(a,h){if(!a||!a.split||!/\d$/.test(a))return true;a=a.split(/\u003A/);if(a.length<2||a.length>3)return true;var g=false,
n;if(a[2]){a[2]=a[2].split(/\u002E/);n=parseInt(a[2][1],10);a[2]=a[2][0]}c.each(a,function(e,d){if(!(s(d)||d&&d=="0"+d*1)||d.length!==2){g=true;return false}});if(g)return true;if(a[0]>23||a[0]<0||a[1]>59||a[1]<0)return true;if(a[2]&&(a[2]>59||a[2]<0))return true;if(n&&isNaN(n))return true;if(n)if(n<100)n*=100;else if(n<10)n*=10;return h===true?[a,n]:false},step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var h=t;a=
this.mismatch(a,true);if(a!==true){h=Date.UTC("1970",0,1,a[0][0],a[0][1],a[0][2]||0);if(a[1])h+=a[1]}return h},dateToString:function(a){if(a&&a.getUTCHours){var h=u(a.getUTCHours(),2)+":"+u(a.getUTCMinutes(),2),g=a.getSeconds();if(g!="0")h+=":"+u(g,2);g=a.getUTCMilliseconds();if(g!="0")h+="."+u(g,3);return h}else return false}},"datetime-local":{mismatch:function(a,h){if(!a||!a.split||(a+"special").split(/\u0054/).length!==2)return true;a=a.split(/\u0054/);return l.date.mismatch(a[0])||l.time.mismatch(a[1],
h)},noAsDate:true,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var h=t,g=this.mismatch(a,true);if(g!==true){a=a.split(/\u0054/)[0].split(/\u002D/);h=Date.UTC(a[0],a[1]-1,a[2],g[0][0],g[0][1],g[0][2]||0);if(g[1])h+=g[1]}return h},dateToString:function(a,h){return l.date.dateToString(a)+"T"+l.time.dateToString(a,h)}}};if(!Modernizr.input.valueAsNumberSet||!v("number"))k.addInputType("number",m.number);if(!Modernizr.input.valueAsNumberSet||!v("range"))k.addInputType("range",
c.extend({},m.number,m.range));if(!Modernizr.input.valueAsNumberSet||!v("date"))k.addInputType("date",m.date);if(!Modernizr.input.valueAsNumberSet||!v("time"))k.addInputType("time",c.extend({},m.date,m.time));if(!Modernizr.input.valueAsNumberSet||!v("datetime-local"))k.addInputType("datetime-local",c.extend({},m.date,m.time,m["datetime-local"]))}});
jQuery.webshims.ready("form-core form-extend",function(c,k,t,l){var s=k.triggerInlineForm;t=Modernizr.inputtypes;var v=function(e,d){var b={w:e.width()};if(b.w){var i={mL:parseInt(d.css("marginLeft"),10)||0,w:d.outerWidth()};b.mR=parseInt(e.css("marginRight"),10)||0;b.mR&&e.css("marginRight",0);if(i.mL<=i.w*-1){d.css("marginRight",Math.floor(Math.abs(i.w+i.mL)+b.mR));e.css("paddingRight",(parseInt(e.css("paddingRight"),10)||0)+Math.abs(i.mL));e.css("width",Math.floor(b.w+i.mL))}else{d.css("marginRight",
b.mR);e.css("width",Math.floor(b.w-i.mL-i.w))}}},q=c.webshims.cfg["forms-ext"],y,u,z=c([]),w,m=function(e,d){c("input",e).add(d.filter("input")).each(function(){var b=c.attr(this,"type");m[b]&&!c.data(this,"inputUIReplace")&&m[b](c(this))})},a=function(e,d){if(q.lazyDate){var b=c.data(e[0],"setDateLazyTimer");b&&clearTimeout(b);c.data(e[0],"setDateLazyTimer",setTimeout(function(){e.datepicker("setDate",d);c.removeData(e[0],"setDateLazyTimer")},0))}else e.datepicker("setDate",d)};m.common=function(e,
d,b){Modernizr.formvalidation&&e.bind("firstinvalid",function(j){clearTimeout(y);w||(y=setTimeout(function(){!w&&!j.isInvalidUIPrevented()&&k.validityAlert.showFor(j.target)},20))});var i=e.attr("id");i={css:{marginRight:e.css("marginRight"),marginLeft:e.css("marginLeft")},outerWidth:e.outerWidth(),label:i?c('label[for="'+i+'"]',e[0].form):z};var r=k.getID(i.label);d.addClass(e[0].className).data("html5element",e);e.after(d).data("inputUIReplace",{visual:d,methods:b}).hide();if(d.length==1&&!c("*",
d)[0]){d.attr("aria-labeledby",r);i.label.bind("click",function(){d.focus();return false})}return i};Modernizr.formvalidation&&["input","form"].forEach(function(e){var d=k.defineNodeNameProperty(e,"checkValidity",{value:function(){w=true;var b=d._supvalue.apply(this,arguments);w=false;return b}})});if(!t.datetime||q.replaceUI){var h={trigger:[0.65,0.35],normal:[0.57,0.43]},g=!c.browser.msie||parseInt(c.browser.version,10)>6?0:0.45;m["datetime-local"]=function(e){if(c.fn.datepicker){var d=c('<span role="group" class="input-datetime-local"><input type="text" class="input-datetime-local-date" /><input type="time" class="input-datetime-local-time" /></span>'),
b=this.common(e,d,m["datetime-local"].attrs),i=c("input.input-datetime-local-date",d),r=i.datepicker(c.extend({},q.datepicker,e.data("datepicker"))).bind("change",function(o){var f=i.attr("value")||"",p="";if(f){p=c("input.input-datetime-local-time",d).attr("value")||"00:00";try{f=(f=c.datepicker.parseDate(i.datepicker("option","dateFormat"),f))?c.datepicker.formatDate("yy-mm-dd",f):i.attr("value")}catch(x){f=i.attr("value")}}f=!f&&!p?"":f+"T"+p;m["datetime-local"].blockAttr=true;e.attr("value",f);
m["datetime-local"].blockAttr=false;o.stopImmediatePropagation();s(e[0],"input");s(e[0],"change")}).data("datepicker");r.dpDiv.addClass("input-date-datepicker-control").css({fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily")});c("input.input-datetime-local-time",d).bind("change",function(o){var f=c.attr(this,"value"),p=["",""];if(f){p=e.attr("value").split("T");if(p.length<2||!p[0])p[0]=c.datepicker.formatDate("yy-mm-dd",new Date);if(p[1]=f)try{i.attr("value",c.datepicker.formatDate(i.datepicker("option",
"dateFormat"),c.datepicker.parseDate("yy-mm-dd",p[0])))}catch(x){}}p=!p[0]&&!p[1]?"":p.join("T");m["datetime-local"].blockAttr=true;e.attr("value",p);m["datetime-local"].blockAttr=false;o.stopImmediatePropagation();s(e[0],"input");s(e[0],"change")});c("input",d).data("html5element",c.data(d[0],"html5element"));d.attr("aria-labeledby",b.label.attr("id"));b.label.bind("click",function(){i.focus();return false});if(b.css){d.css(b.css);if(b.outerWidth){d.outerWidth(b.outerWidth);b=d.width();var j=r.trigger[0]?
h.trigger:h.normal;i.outerWidth(Math.floor(b*j[0]-g),true);c("input.input-datetime-local-time",d).outerWidth(Math.floor(b*j[1]-g),true);r.trigger[0]&&v(i,r.trigger)}}k.triggerDomUpdate(d[0]);u&&c.each(["disabled","min","max","value","step"],function(o,f){e.attr(f,function(p,x){return x||""})})}};m["datetime-local"].attrs={disabled:function(e,d,b){c("input.input-datetime-local-date",d).attr("disabled",!!b);c("input.input-datetime-local-time",d).attr("disabled",!!b)},step:function(e,d,b){c("input.input-datetime-local-time",
d).attr("step",b)},min:function(e,d,b){b=b.split?b.split("T"):[];try{b=c.datepicker.parseDate("yy-mm-dd",b[0])}catch(i){b=false}b&&c("input.input-datetime-local-date",d).datepicker("option","minDate",b)},max:function(e,d,b){b=b.split?b.split("T"):[];try{b=c.datepicker.parseDate("yy-mm-dd",b[0])}catch(i){b=false}b&&c("input.input-datetime-local-date",d).datepicker("option","maxDate",b)},value:function(e,d,b){var i;b=b.split?b.split("T"):[];try{i=c.datepicker.parseDate("yy-mm-dd",b[0])}catch(r){i=false}if(i){m["datetime-local"].blockAttr||
a(c("input.input-datetime-local-date",d),i);c("input.input-datetime-local-time",d).attr("value",b[1]||"00:00")}else{c("input.input-datetime-local-date",d).attr("value",b[0]||"");c("input.input-datetime-local-time",d).attr("value",b[1]||"")}}};m.date=function(e){if(c.fn.datepicker){var d=c('<input type="text" class="input-date" />'),b=this.common(e,d,m.date.attrs),i=d.datepicker(c.extend({},q.datepicker,e.data("datepicker"))).bind("change",function(r){m.date.blockAttr=true;var j;try{j=(j=c.datepicker.parseDate(d.datepicker("option",
"dateFormat"),d.attr("value")))?c.datepicker.formatDate("yy-mm-dd",j):d.attr("value")}catch(o){j=d.attr("value")}e.attr("value",j);m.date.blockAttr=false;r.stopImmediatePropagation();s(e[0],"input");s(e[0],"change")}).data("datepicker");i.dpDiv.addClass("input-date-datepicker-control").css({fontSize:d.css("fontSize"),fontFamily:d.css("fontFamily")});if(b.css){d.css(b.css);b.outerWidth&&d.outerWidth(b.outerWidth);i.trigger[0]&&v(d,i.trigger)}u&&c.each(["disabled","min","max","value"],function(r,j){e.attr(j,
function(o,f){return f||""})})}};m.date.attrs={disabled:function(e,d,b){d.attr("disabled",!!b)},min:function(e,d,b){try{b=c.datepicker.parseDate("yy-mm-dd",b)}catch(i){b=false}b&&d.datepicker("option","minDate",b)},max:function(e,d,b){try{b=c.datepicker.parseDate("yy-mm-dd",b)}catch(i){b=false}b&&d.datepicker("option","maxDate",b)},value:function(e,d,b){if(!m.date.blockAttr){try{var i=c.datepicker.parseDate("yy-mm-dd",b)}catch(r){i=false}i?a(d,i):d.attr("value",b)}}}}if(!t.range||q.replaceUI){m.range=
function(e){if(c.fn.slider){var d=c('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>'),b=this.common(e,d,m.range.attrs),i=function(r,j){if(r.originalEvent){m.range.blockAttr=true;e.attr("value",j.value);m.range.blockAttr=false;r.type=="slidechange"?s(e[0],"change"):s(e[0],"input")}};c("span",d).attr("aria-labeledby",b.label.attr("id"));b.label.bind("click",function(){c("span",d).focus();return false});if(b.css){d.css(b.css);b.outerWidth&&d.outerWidth(b.outerWidth)}d.slider(c.extend({},
q.slider,e.data("slider"),{change:i,slide:i}));c.each(["disabled","min","max","value","step"],function(r,j){e.attr(j,function(o,f){return f||""})})}};m.range.attrs={disabled:function(e,d,b){b=!!b;d.slider("option","disabled",b);c("span",d).attr({"aria-disabled":b+"",tabindex:b?"-1":"0"})},min:function(e,d,b){b=b?b*1||0:0;d.slider("option","min",b);c("span",d).attr({"aria-valuemin":b})},max:function(e,d,b){b=b||b===0?b*1||100:100;d.slider("option","max",b);c("span",d).attr({"aria-valuemax":b})},value:function(e,
d,b){b=c(e).attr("valueAsNumber");if(isNaN(b)){b=(d.slider("option","max")-d.slider("option","min"))/2;e.value=b}m.range.blockAttr||d.slider("option","value",b);c("span",d).attr({"aria-valuenow":b,"aria-valuetext":b})},step:function(e,d,b){b=b&&c.trim(b)?b*1||1:1;d.slider("option","step",b)}}}if(Modernizr.input.valueAsNumberSet&&Modernizr.input.valueAsDate&&(q.replaceUI||!Modernizr.inputtypes["datetime-local"]||!Modernizr.inputtypes.range)){t=function(){c.data(this,"inputUIReplace")&&c.attr(this,
"value",c.attr(this,"value"))};k.onNodeNamesPropertyModify("input","valueAsNumber",t);k.onNodeNamesPropertyModify("input","valueAsDate",t)}c.each(["disabled","min","max","value","step"],function(e,d){k.onNodeNamesPropertyModify("input",d,{set:function(b){var i=c.data(this,"inputUIReplace");i&&i.methods[d]&&i.methods[d](this,i.visual,b)}})});if(!q.availabeLangs)q.availabeLangs="af ar ar-DZ az bg bs ca cs da de el en-AU en-GB en-NZ eo es et eu fa fi fo fr fr-CH gl he hr hu hy id is it ja ko kz lt lv ml ms nl no pl pt-BR rm ro ru sk sl sq sr sr-SR sv ta th tr uk vi zh-CN zh-HK zh-TW".split(" ");
var n=function(e){u=true;if(e){e=c.extend({},e,q.datepicker);c("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option",e).each(function(){var d=c.data(this,"html5element");d&&c.each(["disabled","min","max","value"],function(b,i){d.attr(i,function(r,j){return j||""})})});c.datepicker.setDefaults(e)}};t=function(){if(c.datepicker){k.ready("webshimLocalization",function(){k.activeLang(c.datepicker.regional,"forms-ext",n,function(){u=true})});c(l).unbind("jquery-uiReady.langchange input-widgetsReady.langchange")}};
c(l).bind("jquery-uiReady.langchange input-widgetsReady.langchange",t);t();(function(){if(!Modernizr.input.valueAsNumber){var e=k.modules["forms-ext"].options,d=k.inputTypes,b=function(j,o,f){f=f||{};if(!("type"in f))f.type=c.attr(j,"type");if(!("step"in f))f.step=k.getStep(j,f.type);if(!("valueAsNumber"in f))f.valueAsNumber=d[f.type].asNumber(c.attr(j,"value"));var p=f.step=="any"?d[f.type].step*d[f.type].stepScaleFactor:f.step;k.addMinMaxNumberToCache("min",c(j),f);k.addMinMaxNumberToCache("max",
c(j),f);if(isNaN(f.valueAsNumber))f.valueAsNumber=d[f.type].stepBase||0;if(f.step!=="any")if((j=Math.round((f.valueAsNumber-(f.minAsnumber||0))%f.step*1E7)/1E7)&&Math.abs(j)!=f.step)f.valueAsNumber-=j;j=f.valueAsNumber+p*o;if(!isNaN(f.minAsNumber)&&j<f.minAsNumber)j=f.valueAsNumber*o<f.minAsNumber?f.minAsNumber:isNaN(f.maxAsNumber)?Number.MAX_VALUE:f.maxAsNumber;else if(!isNaN(f.maxAsNumber)&&j>f.maxAsNumber)j=f.valueAsNumber*o>f.maxAsNumber?f.maxAsNumber:isNaN(f.minAsNumber)?Number.MIN_VALUE:f.minAsNumber;
return Math.round(j*1E7)/1E7};k.modules["forms-ext"].getNextStep=b;var i=function(j,o,f){if(!(j.disabled||j.readOnly||c(f).hasClass("step-controls"))){c.attr(j,"value",d[o].numberToString(b(j,c(f).hasClass("step-up")?1:-1,{type:o})));c(j).unbind("blur.stepeventshim");s(j,"input");if(l.activeElement){if(l.activeElement!==j)try{j.focus()}catch(p){}setTimeout(function(){if(l.activeElement!==j)try{j.focus()}catch(x){}c(j).one("blur.stepeventshim",function(){s(j,"change")})},0)}}};if(e.stepArrows){k.onNodeNamesPropertyModify("input",
"disabled",{set:function(j){var o=c.data(j,"step-controls");if(o)o[j.disabled||j.readonly?"addClass":"removeClass"]("disabled-step-control")}});k.onNodeNamesPropertyModify("input","readonly",{set:function(j){var o=c.data(j,"step-controls");if(o)o[j.disabled||j.readonly?"addClass":"removeClass"]("disabled-step-control")}})}var r={38:1,40:-1};k.addReady(function(j,o){e.stepArrows&&c("input",j).add(o.filter("input")).each(function(){var f=c.attr(this,"type");if(!(!d[f]||!d[f].asNumber||!e.stepArrows||
e.stepArrows!==true&&!e.stepArrows[f]||c(this).hasClass("has-step-controls"))){var p=this,x=c('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(this).bind("selectstart dragstart",function(){return false}).bind("mousedown mousepress",function(A){i(p,f,A.target);return false}),B=c(this).addClass("has-step-controls").data("step-controls",x).attr({readonly:this.readOnly,disabled:this.disabled,autocomplete:"off",role:"spinbutton"}).bind(c.browser.msie?
"keydown":"keypress",function(A){if(!(this.disabled||this.readOnly||!r[A.keyCode])){c.attr(this,"value",d[f].numberToString(b(this,r[A.keyCode],{type:f})));s(this,"input");return false}});if(e.calculateWidth){v(B,x);x.css("marginTop",(B.outerHeight()-x.outerHeight())/2)}}})})}})();k.cfg.waitReady&&c.readyWait++;k.addReady(function(e,d){c(l).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",function(){if(c.datepicker||c.fn.slider)m(e,d);c.datepicker&&c.fn.slider&&c(l).unbind(".initinputui");
k.cfg.waitReady&&e===l&&c.ready(true)})})});
