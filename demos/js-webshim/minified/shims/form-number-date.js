jQuery.webshims.register("forms-ext",function(e,j){if(!(Modernizr.input.valueAsNumberSet&&Modernizr.input.valueAsDate)){j.getStep=function(a,g){var b=e.attr(a,"step");if(b==="any")return b;g=g||p(a);if(!k[g]||!k[g].step)return b;b=s.number.asNumber(b);return(!isNaN(b)&&b>0?b:k[g].step)*k[g].stepScaleFactor};j.addMinMaxNumberToCache=function(a,g,b){if(!(a+"AsNumber"in b)){b[a+"AsNumber"]=k[b.type].asNumber(g.attr(a));if(isNaN(b[a+"AsNumber"])&&a+"Default"in k[b.type])b[a+"AsNumber"]=k[b.type][a+"Default"]}};
var r=parseInt("NaN",10),k=j.inputTypes,q=function(a){return typeof a=="number"||a&&a==a*1},t=function(a){return Modernizr.input.valueAsNumber&&e('<input type="'+a+'" />').attr("type")===a},p=function(a){return(a.getAttribute("type")||"").toLowerCase()},x=j.addMinMaxNumberToCache,v=function(a,g){a=""+a;g-=a.length;for(var b=0;b<g;b++)a="0"+a;return a};if(!Modernizr.input.valueAsNumber||!Modernizr.input.valueAsDate){j.addValidityRule("stepMismatch",function(a,g,b){if(g==="")return false;if(!("type"in
b))b.type=p(a[0]);if(b.type=="date")return false;var c=false;if(k[b.type]&&k[b.type].step){if(!("step"in b))b.step=j.getStep(a[0],b.type);if(b.step=="any")return false;if(!("valueAsNumber"in b))b.valueAsNumber=k[b.type].asNumber(g);if(isNaN(b.valueAsNumber))return false;x("min",a,b);a=b.minAsNumber;if(isNaN(a))a=k[b.type].stepBase||0;c=Math.abs((b.valueAsNumber-a)%b.step);c=!(c<=1.0E-7||Math.abs(c-b.step)<=1.0E-7)}return c});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",
factor:-1}].forEach(function(a){j.addValidityRule(a.name,function(g,b,c){var d=false;if(b==="")return d;if(!("type"in c))c.type=p(g[0]);if(k[c.type]&&k[c.type].asNumber){if(!("valueAsNumber"in c))c.valueAsNumber=k[c.type].asNumber(b);if(isNaN(c.valueAsNumber))return false;x(a.attr,g,c);if(isNaN(c[a.attr+"AsNumber"]))return d;d=c[a.attr+"AsNumber"]*a.factor<c.valueAsNumber*a.factor-1.0E-7}return d})})}j.defineNodeNameProperty("input","type",{get:function(){var a=p(this);return j.inputTypes[a]?a:this.type||
this.getAttribute("type")}});var w=j.defineNodeNameProperty("input","valueAsNumber",{get:function(){var a=p(this);return k[a]&&k[a].asNumber?k[a].asNumber(e.attr(this,"value")):r},set:function(a){var g=p(this);if(k[g]&&k[g].numberToString)if(isNaN(a))e.attr(this,"value","");else{g=k[g].numberToString(a);g!==false?e.attr(this,"value",g):j.warn("INVALID_STATE_ERR: DOM Exception 11")}else w._supset&&w._supset.call(this,arguments)}}),l=j.defineNodeNameProperty("input","valueAsDate",{get:function(){var a=
p(this);return k[a]&&k[a].asDate&&!k[a].noAsDate?k[a].asDate(e.attr(this,"value")):l._supget&&l._supget.call(this)},set:function(a){var g=p(this);if(k[g]&&k[g].dateToString){if(a===null){e.attr(this,"value","");return""}g=k[g].dateToString(a);if(g!==false){e.attr(this,"value",g);return g}else j.warn("INVALID_STATE_ERR: DOM Exception 11")}else return l._supset&&l._supset(this,arguments)||null}}),s={number:{mismatch:function(a){return!q(a)},step:1,stepScaleFactor:1,asNumber:function(a){return q(a)?
a*1:r},numberToString:function(a){return q(a)?a:false}},range:{minDefault:0,maxDefault:100},date:{mismatch:function(a){if(!a||!a.split||!/\d$/.test(a))return true;var g=a.split(/\u002D/);if(g.length!==3)return true;var b=false;e.each(g,function(c,d){if(!(q(d)||d&&d=="0"+d*1)){b=true;return false}});if(b)return b;if(g[0].length!==4||g[1].length!=2||g[1]>12||g[2].length!=2||g[2]>33)b=true;return a!==this.dateToString(this.asDate(a,true))},step:1,stepScaleFactor:864E5,asDate:function(a,g){if(!g&&this.mismatch(a))return null;
return new Date(this.asNumber(a,true))},asNumber:function(a,g){var b=r;if(g||!this.mismatch(a)){a=a.split(/\u002D/);b=Date.UTC(a[0],a[1]-1,a[2])}return b},numberToString:function(a){return q(a)?this.dateToString(new Date(a*1)):false},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+v(a.getUTCMonth()+1,2)+"-"+v(a.getUTCDate(),2):false}},time:{mismatch:function(a,g){if(!a||!a.split||!/\d$/.test(a))return true;a=a.split(/\u003A/);if(a.length<2||a.length>3)return true;var b=false,
c;if(a[2]){a[2]=a[2].split(/\u002E/);c=parseInt(a[2][1],10);a[2]=a[2][0]}e.each(a,function(d,h){if(!(q(h)||h&&h=="0"+h*1)||h.length!==2){b=true;return false}});if(b)return true;if(a[0]>23||a[0]<0||a[1]>59||a[1]<0)return true;if(a[2]&&(a[2]>59||a[2]<0))return true;if(c&&isNaN(c))return true;if(c)if(c<100)c*=100;else if(c<10)c*=10;return g===true?[a,c]:false},step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var g=r;a=
this.mismatch(a,true);if(a!==true){g=Date.UTC("1970",0,1,a[0][0],a[0][1],a[0][2]||0);if(a[1])g+=a[1]}return g},dateToString:function(a){if(a&&a.getUTCHours){var g=v(a.getUTCHours(),2)+":"+v(a.getUTCMinutes(),2),b=a.getSeconds();if(b!="0")g+=":"+v(b,2);b=a.getUTCMilliseconds();if(b!="0")g+="."+v(b,3);return g}else return false}},"datetime-local":{mismatch:function(a,g){if(!a||!a.split||(a+"special").split(/\u0054/).length!==2)return true;a=a.split(/\u0054/);return k.date.mismatch(a[0])||k.time.mismatch(a[1],
g)},noAsDate:true,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var g=r,b=this.mismatch(a,true);if(b!==true){a=a.split(/\u0054/)[0].split(/\u002D/);g=Date.UTC(a[0],a[1]-1,a[2],b[0][0],b[0][1],b[0][2]||0);if(b[1])g+=b[1]}return g},dateToString:function(a,g){return k.date.dateToString(a)+"T"+k.time.dateToString(a,g)}}};if(!Modernizr.input.valueAsNumberSet||!t("number"))j.addInputType("number",s.number);if(!Modernizr.input.valueAsNumberSet||!t("range"))j.addInputType("range",
e.extend({},s.number,s.range));if(!Modernizr.input.valueAsNumberSet||!t("date"))j.addInputType("date",s.date);if(!Modernizr.input.valueAsNumberSet||!t("time"))j.addInputType("time",e.extend({},s.date,s.time));if(!Modernizr.input.valueAsNumberSet||!t("datetime-local"))j.addInputType("datetime-local",e.extend({},s.date,s.time,s["datetime-local"]))}});
jQuery.webshims.ready("form-core form-extend",function(e,j,r,k){var q=j.triggerInlineForm;r=Modernizr.inputtypes;var t=function(b,c){var d={w:b.width()};if(d.w){var h={mL:parseInt(c.css("marginLeft"),10)||0,w:c.outerWidth()};d.mR=parseInt(b.css("marginRight"),10)||0;d.mR&&b.css("marginRight",0);if(h.mL<=h.w*-1){c.css("marginRight",Math.floor(Math.abs(h.w+h.mL)+d.mR));b.css("paddingRight",(parseInt(b.css("paddingRight"),10)||0)+Math.abs(h.mL));b.css("width",Math.floor(d.w+h.mL))}else{c.css("marginRight",
d.mR);b.css("width",Math.floor(d.w-h.mL-h.w))}}},p=e.webshims.cfg["forms-ext"],x,v=e([]),w,l=function(b,c){e("input",b).add(c.filter("input")).each(function(){var d=e.attr(this,"type");l[d]&&!e.data(this,"inputUIReplace")&&l[d](e(this))})};l.common=function(b,c,d){Modernizr.formvalidation&&b.bind("firstinvalid",function(i){clearTimeout(x);w||(x=setTimeout(function(){!w&&!i.isInvalidUIPrevented()&&j.validityAlert.showFor(i.target)},20))});var h=b.attr("id");h={css:{marginRight:b.css("marginRight"),
marginLeft:b.css("marginLeft")},outerWidth:b.outerWidth(),label:h?e('label[for="'+h+'"]',b[0].form):v};var o=j.getID(h.label);c.addClass(b[0].className).data("html5element",b);b.after(c).data("inputUIReplace",{visual:c,methods:d}).hide();if(c.length==1&&!e("*",c)[0]){c.attr("aria-labeledby",o);h.label.bind("click",function(){c.focus();return false})}return h};Modernizr.formvalidation&&["input","form"].forEach(function(b){var c=j.defineNodeNameProperty(b,"checkValidity",{value:function(){w=true;var d=
c._supvalue.apply(this,arguments);w=false;return d}})});if(!r.datetime||p.replaceUI){var s={trigger:[0.65,0.35],normal:[0.57,0.43]},a=!e.browser.msie||parseInt(e.browser.version,10)>6?0:0.45;l["datetime-local"]=function(b){if(e.fn.datepicker){var c=e('<span role="group" class="input-datetime-local"><input type="text" class="input-datetime-local-date" /><input type="time" class="input-datetime-local-time" /></span>'),d=this.common(b,c,l["datetime-local"].attrs),h=e("input.input-datetime-local-date",
c),o=h.datepicker(e.extend({},p.datepicker,b.data("datepicker"))).bind("change",function(m){var f=h.attr("value")||"",n="";if(f){n=e("input.input-datetime-local-time",c).attr("value")||"00:00";try{f=(f=e.datepicker.parseDate(h.datepicker("option","dateFormat"),f))?e.datepicker.formatDate("yy-mm-dd",f):h.attr("value")}catch(u){f=h.attr("value")}}f=!f&&!n?"":f+"T"+n;l["datetime-local"].blockAttr=true;b.attr("value",f);l["datetime-local"].blockAttr=false;m.stopImmediatePropagation();q(b[0],"input");
q(b[0],"change")}).data("datepicker");o.dpDiv.addClass("input-date-datepicker-control").css({fontSize:h.css("fontSize"),fontFamily:h.css("fontFamily")});e("input.input-datetime-local-time",c).bind("change",function(m){var f=e.attr(this,"value"),n=["",""];if(f){n=b.attr("value").split("T");if(n.length<2||!n[0])n[0]=e.datepicker.formatDate("yy-mm-dd",new Date);if(n[1]=f)try{h.attr("value",e.datepicker.formatDate(h.datepicker("option","dateFormat"),e.datepicker.parseDate("yy-mm-dd",n[0])))}catch(u){}}n=
!n[0]&&!n[1]?"":n.join("T");l["datetime-local"].blockAttr=true;b.attr("value",n);l["datetime-local"].blockAttr=false;m.stopImmediatePropagation();q(b[0],"input");q(b[0],"change")});e("input",c).data("html5element",e.data(c[0],"html5element"));c.attr("aria-labeledby",d.label.attr("id"));d.label.bind("click",function(){h.focus();return false});if(d.css){c.css(d.css);if(d.outerWidth){c.outerWidth(d.outerWidth);d=c.width();var i=o.trigger[0]?s.trigger:s.normal;h.outerWidth(Math.floor(d*i[0]-a),true);
e("input.input-datetime-local-time",c).outerWidth(Math.floor(d*i[1]-a),true);o.trigger[0]&&t(h,o.trigger)}}j.triggerDomUpdate(c[0]);e.each(["disabled","min","max","value","step"],function(m,f){b.attr(f,function(n,u){return u||""})})}};l["datetime-local"].attrs={disabled:function(b,c,d){e("input.input-datetime-local-date",c).datepicker("option","disabled",!!d);e("input.input-datetime-local-time",c).attr("disabled",!!d)},step:function(b,c,d){e("input.input-datetime-local-time",c).attr("step",d)},min:function(b,
c,d){d=d.split?d.split("T"):[];try{d=e.datepicker.parseDate("yy-mm-dd",d[0])}catch(h){d=false}d&&e("input.input-datetime-local-date",c).datepicker("option","minDate",d)},max:function(b,c,d){d=d.split?d.split("T"):[];try{d=e.datepicker.parseDate("yy-mm-dd",d[0])}catch(h){d=false}d&&e("input.input-datetime-local-date",c).datepicker("option","maxDate",d)},value:function(b,c,d){var h;d=d.split?d.split("T"):[];try{h=e.datepicker.parseDate("yy-mm-dd",d[0])}catch(o){h=false}if(h){l["datetime-local"].blockAttr||
e("input.input-datetime-local-date",c).datepicker("setDate",h);e("input.input-datetime-local-time",c).attr("value",d[1]||"00:00")}else{e("input.input-datetime-local-date",c).attr("value",d[0]||"");e("input.input-datetime-local-time",c).attr("value",d[1]||"")}}};l.date=function(b){if(e.fn.datepicker){var c=e('<input type="text" class="input-date" />'),d=this.common(b,c,l.date.attrs),h=c.datepicker(e.extend({},p.datepicker,b.data("datepicker"))).bind("change",function(o){l.date.blockAttr=true;var i;
try{i=(i=e.datepicker.parseDate(c.datepicker("option","dateFormat"),c.attr("value")))?e.datepicker.formatDate("yy-mm-dd",i):c.attr("value")}catch(m){i=c.attr("value")}b.attr("value",i);l.date.blockAttr=false;o.stopImmediatePropagation();q(b[0],"input");q(b[0],"change")}).data("datepicker");h.dpDiv.addClass("input-date-datepicker-control").css({fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily")});if(d.css){c.css(d.css);d.outerWidth&&c.outerWidth(d.outerWidth);h.trigger[0]&&t(c,h.trigger)}e.each(["disabled",
"min","max","value"],function(o,i){b.attr(i,function(m,f){return f||""})})}};l.date.attrs={disabled:function(b,c,d){c.datepicker("option","disabled",!!d)},min:function(b,c,d){try{d=e.datepicker.parseDate("yy-mm-dd",d)}catch(h){d=false}d&&c.datepicker("option","minDate",d)},max:function(b,c,d){try{d=e.datepicker.parseDate("yy-mm-dd",d)}catch(h){d=false}d&&c.datepicker("option","maxDate",d)},value:function(b,c,d){if(!l.date.blockAttr){try{var h=e.datepicker.parseDate("yy-mm-dd",d)}catch(o){h=false}h?
c.datepicker("setDate",h):c.attr("value",d)}}}}if(!r.range||p.replaceUI){l.range=function(b){if(e.fn.slider){var c=e('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>'),d=this.common(b,c,l.range.attrs),h=function(o,i){if(o.originalEvent){l.range.blockAttr=true;b.attr("value",i.value);l.range.blockAttr=false;o.type=="slidechange"?q(b[0],"change"):q(b[0],"input")}};e("span",c).attr("aria-labeledby",d.label.attr("id"));d.label.bind("click",function(){e("span",
c).focus();return false});if(d.css){c.css(d.css);d.outerWidth&&c.outerWidth(d.outerWidth)}c.slider(e.extend({},p.slider,b.data("slider"),{change:h,slide:h}));e.each(["disabled","min","max","value","step"],function(o,i){b.attr(i,function(m,f){return f||""})})}};l.range.attrs={disabled:function(b,c,d){d=!!d;c.slider("option","disabled",d);e("span",c).attr({"aria-disabled":d+"",tabindex:d?"-1":"0"})},min:function(b,c,d){d=d?d*1||0:0;c.slider("option","min",d);e("span",c).attr({"aria-valuemin":d})},max:function(b,
c,d){d=d||d===0?d*1||100:100;c.slider("option","max",d);e("span",c).attr({"aria-valuemax":d})},value:function(b,c,d){d=e(b).attr("valueAsNumber");if(isNaN(d)){d=(c.slider("option","max")-c.slider("option","min"))/2;b.value=d}l.range.blockAttr||c.slider("option","value",d);e("span",c).attr({"aria-valuenow":d,"aria-valuetext":d})},step:function(b,c,d){d=d&&e.trim(d)?d*1||1:1;c.slider("option","step",d)}}}if(Modernizr.input.valueAsNumberSet&&Modernizr.input.valueAsDate&&(p.replaceUI||!Modernizr.inputtypes["datetime-local"]||
!Modernizr.inputtypes.range)){r=function(){e.data(this,"inputUIReplace")&&e.attr(this,"value",e.attr(this,"value"))};j.onNodeNamesPropertyModify("input","valueAsNumber",r);j.onNodeNamesPropertyModify("input","valueAsDate",r)}e.each(["disabled","min","max","value","step"],function(b,c){j.onNodeNamesPropertyModify("input",c,{set:function(d){var h=e.data(this,"inputUIReplace");h&&h.methods[c]&&h.methods[c](this,h.visual,d)}})});if(!p.availabeLangs)p.availabeLangs="af ar ar-DZ az bg bs ca cs da de el en-AU en-GB en-NZ eo es et eu fa fi fo fr fr-CH gl he hr hu hy id is it ja ko kz lt lv ml ms nl no pl pt-BR rm ro ru sk sl sq sr sr-SR sv ta th tr uk vi zh-CN zh-HK zh-TW".split(" ");
var g=function(b){if(b){b=e.extend({},b,p.datepicker);e("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option",b).each(function(){var c=e.data(this,"html5element");c&&e.each(["disabled","min","max","value"],function(d,h){c.attr(h,function(o,i){return i||""})})});e.datepicker.setDefaults(b)}};r=function(){if(e.datepicker){j.ready("webshimLocalization",function(){j.activeLang(e.datepicker.regional,"forms-ext",g)});e(k).unbind("jquery-uiReady.langchange input-widgetsReady.langchange")}};
e(k).bind("jquery-uiReady.langchange input-widgetsReady.langchange",r);r();(function(){if(!Modernizr.input.valueAsNumber){var b=j.modules["forms-ext"].options,c=j.inputTypes,d=function(i,m,f){f=f||{};if(!("type"in f))f.type=e.attr(i,"type");if(!("step"in f))f.step=j.getStep(i,f.type);if(!("valueAsNumber"in f))f.valueAsNumber=c[f.type].asNumber(e.attr(i,"value"));var n=f.step=="any"?c[f.type].step*c[f.type].stepScaleFactor:f.step;j.addMinMaxNumberToCache("min",e(i),f);j.addMinMaxNumberToCache("max",
e(i),f);if(isNaN(f.valueAsNumber))f.valueAsNumber=c[f.type].stepBase||0;if(f.step!=="any")if((i=Math.round((f.valueAsNumber-(f.minAsnumber||0))%f.step*1E7)/1E7)&&Math.abs(i)!=f.step)f.valueAsNumber-=i;i=f.valueAsNumber+n*m;if(!isNaN(f.minAsNumber)&&i<f.minAsNumber)i=f.valueAsNumber*m<f.minAsNumber?f.minAsNumber:isNaN(f.maxAsNumber)?Number.MAX_VALUE:f.maxAsNumber;else if(!isNaN(f.maxAsNumber)&&i>f.maxAsNumber)i=f.valueAsNumber*m>f.maxAsNumber?f.maxAsNumber:isNaN(f.minAsNumber)?Number.MIN_VALUE:f.minAsNumber;
return Math.round(i*1E7)/1E7};j.modules["forms-ext"].getNextStep=d;var h=function(i,m,f){if(!(i.disabled||i.readOnly||e(f).hasClass("step-controls"))){e.attr(i,"value",c[m].numberToString(d(i,e(f).hasClass("step-up")?1:-1,{type:m})));e(i).unbind("blur.stepeventshim");q(i,"input");if(k.activeElement){if(k.activeElement!==i)try{i.focus()}catch(n){}setTimeout(function(){if(k.activeElement!==i)try{i.focus()}catch(u){}e(i).one("blur.stepeventshim",function(){q(i,"change")})},0)}}};if(b.stepArrows){j.onNodeNamesPropertyModify("input",
"disabled",{set:function(i){var m=e.data(i,"step-controls");if(m)m[i.disabled||i.readonly?"addClass":"removeClass"]("disabled-step-control")}});j.onNodeNamesPropertyModify("input","readonly",{set:function(i){var m=e.data(i,"step-controls");if(m)m[i.disabled||i.readonly?"addClass":"removeClass"]("disabled-step-control")}})}var o={38:1,40:-1};j.addReady(function(i,m){b.stepArrows&&e("input",i).add(m.filter("input")).each(function(){var f=e.attr(this,"type");if(!(!c[f]||!c[f].asNumber||!b.stepArrows||
b.stepArrows!==true&&!b.stepArrows[f]||e(this).hasClass("has-step-controls"))){var n=this,u=e('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(this).bind("selectstart dragstart",function(){return false}).bind("mousedown mousepress",function(y){h(n,f,y.target);return false}),z=e(this).addClass("has-step-controls").data("step-controls",u).attr({readonly:this.readOnly,disabled:this.disabled,autocomplete:"off",role:"spinbutton"}).bind(e.browser.msie?
"keydown":"keypress",function(y){if(!(this.disabled||this.readOnly||!o[y.keyCode])){e.attr(this,"value",c[f].numberToString(d(this,o[y.keyCode],{type:f})));q(this,"input");return false}});if(b.calculateWidth){t(z,u);u.css("marginTop",(z.outerHeight()-u.outerHeight())/2)}}})})}})();j.cfg.waitReady&&e.readyWait++;j.addReady(function(b,c){e(k).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",function(){if(e.datepicker||e.fn.slider)l(b,c);e.datepicker&&e.fn.slider&&e(k).unbind(".initinputui");
j.cfg.waitReady&&b===k&&e.ready(true)})})});
