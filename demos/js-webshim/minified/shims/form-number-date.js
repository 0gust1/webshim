jQuery.webshims.register("forms-ext",function(d,i,u){if(!(Modernizr.input.valueAsNumber&&Modernizr.input.valueAsDate)){i.getStep=function(a,c){var b=d.attr(a,"step");if(b==="any")return b;c=c||q(a);if(!h[c]||!h[c].step)return b;b=o.number.asNumber(b);return(!isNaN(b)&&b>0?b:h[c].step)*h[c].stepScaleFactor};i.addMinMaxNumberToCache=function(a,c,b){if(!(a+"AsNumber"in b)){b[a+"AsNumber"]=h[b.type].asNumber(c.attr(a));if(isNaN(b[a+"AsNumber"])&&a+"Default"in h[b.type])b[a+"AsNumber"]=h[b.type][a+"Default"]}};
var n=parseInt("NaN",10),h=i.inputTypes,r=function(a){return typeof a=="number"||a&&a==a*1},p=function(a){return Modernizr.input.valueAsNumber&&d('<input type="'+a+'" />').attr("type")===a},q=function(a){return(a.getAttribute("type")||"").toLowerCase()},w=i.addMinMaxNumberToCache,k=function(a,c){a=""+a;c-=a.length;for(var b=0;b<c;b++)a="0"+a;return a};i.addValidityRule("stepMismatch",function(a,c,b){if(c==="")return false;if(!("type"in b))b.type=q(a[0]);if(b.type=="date")return false;var e=false;
if(h[b.type]&&h[b.type].step){if(!("step"in b))b.step=i.getStep(a[0],b.type);if(b.step=="any")return false;if(!("valueAsNumber"in b))b.valueAsNumber=h[b.type].asNumber(c);if(isNaN(b.valueAsNumber))return false;w("min",a,b);a=b.minAsNumber;if(isNaN(a))a=h[b.type].stepBase||0;e=Math.abs((b.valueAsNumber-a)%b.step);e=!(e<=1.0E-7||Math.abs(e-b.step)<=1.0E-7)}return e});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){i.addValidityRule(a.name,
function(c,b,e){var j=false;if(b==="")return j;if(!("type"in e))e.type=q(c[0]);if(h[e.type]&&h[e.type].asNumber){if(!("valueAsNumber"in e))e.valueAsNumber=h[e.type].asNumber(b);if(isNaN(e.valueAsNumber))return false;w(a.attr,c,e);if(isNaN(e[a.attr+"AsNumber"]))return j;j=e[a.attr+"AsNumber"]*a.factor<e.valueAsNumber*a.factor-1.0E-7}return j})});var v=i.defineNodeNameProperty("input","valueAsNumber",{get:function(){var a=q(this);return h[a]&&h[a].asNumber?h[a].asNumber(d.attr(this,"value")):n},set:function(a){var c=
q(this);if(h[c]&&h[c].numberToString)if(isNaN(a))d.attr(this,"value","");else{c=h[c].numberToString(a);if(c!==false)d.attr(this,"value",c);else throw"INVALID_STATE_ERR: DOM Exception 11";}else v._supset&&v._supset.call(this,arguments)}}),t=i.defineNodeNameProperty("input","valueAsDate",{get:function(){var a=q(this);return h[a]&&h[a].asDate&&!h[a].noAsDate?h[a].asDate(d.attr(this,"value")):t._supget&&t._supget.call(this)},set:function(a){var c=q(this);if(h[c]&&h[c].dateToString){if(!u.noHTMLExtFixes)throw"there are some serious issues in opera's implementation. don't use!";
if(a===null){d.attr(this,"value","");return""}c=h[c].dateToString(a);if(c!==false){d.attr(this,"value",c);return c}else throw"INVALID_STATE_ERR: DOM Exception 11";}else return t._supset&&t._supset(this,arguments)||null}}),o={number:{mismatch:function(a){return!r(a)},step:1,stepScaleFactor:1,asNumber:function(a){return r(a)?a*1:n},numberToString:function(a){return r(a)?a:false}},range:{minDefault:0,maxDefault:100},date:{mismatch:function(a){if(!a||!a.split||!/\d$/.test(a))return true;var c=a.split(/\u002D/);
if(c.length!==3)return true;var b=false;d.each(c,function(e,j){if(!(r(j)||j&&j=="0"+j*1)){b=true;return false}});if(b)return b;if(c[0].length!==4||c[1].length!=2||c[1]>12||c[2].length!=2||c[2]>33)b=true;return a!==this.dateToString(this.asDate(a,true))},step:1,stepScaleFactor:864E5,asDate:function(a,c){if(!c&&this.mismatch(a))return null;return new Date(this.asNumber(a,true))},asNumber:function(a,c){var b=n;if(c||!this.mismatch(a)){a=a.split(/\u002D/);b=Date.UTC(a[0],a[1]-1,a[2])}return b},numberToString:function(a){return r(a)?
this.dateToString(new Date(a*1)):false},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+k(a.getUTCMonth()+1,2)+"-"+k(a.getUTCDate(),2):false}},time:{mismatch:function(a,c){if(!a||!a.split||!/\d$/.test(a))return true;a=a.split(/\u003A/);if(a.length<2||a.length>3)return true;var b=false,e;if(a[2]){a[2]=a[2].split(/\u002E/);e=parseInt(a[2][1],10);a[2]=a[2][0]}d.each(a,function(j,g){if(!(r(g)||g&&g=="0"+g*1)||g.length!==2){b=true;return false}});if(b)return true;if(a[0]>23||a[0]<
0||a[1]>59||a[1]<0)return true;if(a[2]&&(a[2]>59||a[2]<0))return true;if(e&&isNaN(e))return true;if(e)if(e<100)e*=100;else if(e<10)e*=10;return c===true?[a,e]:false},step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var c=n;a=this.mismatch(a,true);if(a!==true){c=Date.UTC("1970",0,1,a[0][0],a[0][1],a[0][2]||0);if(a[1])c+=a[1]}return c},dateToString:function(a){if(a&&a.getUTCHours){var c=k(a.getUTCHours(),2)+":"+k(a.getUTCMinutes(),
2),b=a.getSeconds();if(b!="0")c+=":"+k(b,2);b=a.getUTCMilliseconds();if(b!="0")c+="."+k(b,3);return c}else return false}},"datetime-local":{mismatch:function(a,c){if(!a||!a.split||(a+"special").split(/\u0054/).length!==2)return true;a=a.split(/\u0054/);return h.date.mismatch(a[0])||h.time.mismatch(a[1],c)},noAsDate:true,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var c=n,b=this.mismatch(a,true);if(b!==true){a=a.split(/\u0054/)[0].split(/\u002D/);c=
Date.UTC(a[0],a[1]-1,a[2],b[0][0],b[0][1],b[0][2]||0);if(b[1])c+=b[1]}return c},dateToString:function(a,c){return h.date.dateToString(a)+"T"+h.time.dateToString(a,c)}}};p("number")||i.addInputType("number",o.number);p("range")||i.addInputType("range",d.extend({},o.number,o.range));p("date")||i.addInputType("date",o.date);p("time")||i.addInputType("time",d.extend({},o.date,o.time));p("datetime-local")||i.addInputType("datetime-local",d.extend({},o.date,o.time,o["datetime-local"]));i.defineNodeNameProperty("input",
"type",{get:function(){var a=q(this);return i.inputTypes[a]?a:this.type||this.getAttribute("type")}})}});
jQuery.webshims.ready("form-core form-extend",function(d,i,u,n){var h=i.triggerInlineForm;u=Modernizr.inputtypes;var r=function(a,c){var b={w:a.width()};if(b.w){var e={mL:parseInt(c.css("marginLeft"),10)||0,w:c.outerWidth()};b.mR=parseInt(a.css("marginRight"),10)||0;b.mR&&a.css("marginRight",0);if(e.mL<=e.w*-1){c.css("marginRight",Math.floor(Math.abs(e.w+e.mL)+b.mR));a.css("paddingRight",(parseInt(a.css("paddingRight"),10)||0)+Math.abs(e.mL));a.css("width",Math.floor(b.w+e.mL))}else{c.css("marginRight",
b.mR);a.css("width",Math.floor(b.w-e.mL-e.w))}}},p=d.webshims.cfg["forms-ext"],q,w=d([]),k=function(a,c){d("input",a).add(c.filter("input")).each(function(){var b=d.attr(this,"type");k[b]&&!d.data(this,"inputUIReplace")&&k[b](d(this))})};k.common=function(a,c,b){Modernizr.formvalidation&&a.bind("firstinvalid",function(g){clearTimeout(q);q=setTimeout(function(){g.isInvalidUIPrevented()||i.validityAlert.showFor(g.target)},20)});var e=a.attr("id");e={css:{marginRight:a.css("marginRight"),marginLeft:a.css("marginLeft")},
outerWidth:a.outerWidth(),label:e?d('label[for="'+e+'"]',a[0].form):w};var j=i.getID(e.label);c.addClass(a[0].className).data("html5element",a);a.after(c).data("inputUIReplace",{visual:c,methods:b}).hide();if(c.length==1&&!d("*",c)[0]){c.attr("aria-labeledby",j);e.label.bind("click",function(){c.focus();return false})}return e};if(!u.datetime||p.replaceUI){var v={trigger:[0.65,0.35],normal:[0.6,0.4]},t=!d.browser.msie||parseInt(d.browser.version,10)>6?0:0.45;k["datetime-local"]=function(a){if(d.fn.datepicker){var c=
d('<span role="group" class="input-datetime-local"><input type="text" class="input-datetime-local-date" /><input type="time" class="input-datetime-local-time" /></span>'),b=this.common(a,c,k["datetime-local"].attrs),e=d("input.input-datetime-local-date",c),j=e.datepicker(d.extend({},p.datepicker,a.data("datepicker"))).bind("change",function(l){var f=e.attr("value")||"",m="";if(f){m=d("input.input-datetime-local-time",c).attr("value")||"00:00";try{f=(f=d.datepicker.parseDate(e.datepicker("option",
"dateFormat"),f))?d.datepicker.formatDate("yy-mm-dd",f):e.attr("value")}catch(s){f=e.attr("value")}}f=!f&&!m?"":f+"T"+m;a.attr("value",f);l.stopImmediatePropagation();h(a[0],"input");h(a[0],"change")}).data("datepicker");j.dpDiv.addClass("input-date-datepicker-control").css({fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily")});d("input.input-datetime-local-time",c).bind("change",function(l){var f=d.attr(this,"value"),m=["",""];if(f){m=a.attr("value").split("T");if(m.length<2||!m[0])m[0]=d.datepicker.formatDate("yy-mm-dd",
new Date);if(m[1]=f)try{e.attr("value",d.datepicker.formatDate(e.datepicker("option","dateFormat"),d.datepicker.parseDate("yy-mm-dd",m[0])))}catch(s){}}m=!m[0]&&!m[1]?"":m.join("T");a.attr("value",m);l.stopImmediatePropagation();h(a[0],"input");h(a[0],"change")});d("input",c).data("html5element",d.data(c[0],"html5element"));c.attr("aria-labeledby",b.label.attr("id"));b.label.bind("click",function(){e.focus();return false});if(b.css){c.css(b.css);if(b.outerWidth){c.outerWidth(b.outerWidth);b=c.width();
var g=j.trigger[0]?v.trigger:v.normal;e.outerWidth(Math.floor(b*g[0]-t),true);d("input.input-datetime-local-time",c).outerWidth(Math.floor(b*g[1]-t),true);j.trigger[0]&&r(e,j.trigger)}}i.triggerDomUpdate(c[0]);d.each(["disabled","min","max","value","step"],function(l,f){a.attr(f,function(m,s){return s||""})})}};k["datetime-local"].attrs={disabled:function(a,c,b){d("input.input-datetime-local-date",c).datepicker("option","disabled",!!b);d("input.input-datetime-local-time",c).attr("disabled",!!b)},
step:function(a,c,b){d("input.input-datetime-local-time",c).attr("step",b)},min:function(a,c,b){b=b.split?b.split("T"):[];try{b=d.datepicker.parseDate("yy-mm-dd",b[0])}catch(e){b=false}b&&d("input.input-datetime-local-date",c).datepicker("option","minDate",b)},max:function(a,c,b){b=b.split?b.split("T"):[];try{b=d.datepicker.parseDate("yy-mm-dd",b[0])}catch(e){b=false}b&&d("input.input-datetime-local-date",c).datepicker("option","maxDate",b)},value:function(a,c,b){if(!k["datetime-local"].blockAttr){var e;
b=b.split?b.split("T"):[];try{e=d.datepicker.parseDate("yy-mm-dd",b[0])}catch(j){e=false}if(e){d("input.input-datetime-local-date",c).datepicker("setDate",e);d("input.input-datetime-local-time",c).attr("value",b[1]||"00:00")}else{d("input.input-datetime-local-date",c).attr("value",b[0]||"");d("input.input-datetime-local-time",c).attr("value",b[1]||"")}}}};k.date=function(a){if(d.fn.datepicker){var c=d('<input type="text" class="input-date" />'),b=this.common(a,c,k.date.attrs),e=c.datepicker(d.extend({},
p.datepicker,a.data("datepicker"))).bind("change",function(j){k.date.blockAttr=true;var g;try{g=(g=d.datepicker.parseDate(c.datepicker("option","dateFormat"),c.attr("value")))?d.datepicker.formatDate("yy-mm-dd",g):c.attr("value")}catch(l){g=c.attr("value")}a.attr("value",g);k.date.blockAttr=false;j.stopImmediatePropagation();h(a[0],"input");h(a[0],"change")}).data("datepicker");e.dpDiv.addClass("input-date-datepicker-control").css({fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily")});if(b.css){c.css(b.css);
b.outerWidth&&c.outerWidth(b.outerWidth);e.trigger[0]&&r(c,e.trigger)}d.each(["disabled","min","max","value"],function(j,g){a.attr(g,function(l,f){return f||""})})}};k.date.attrs={disabled:function(a,c,b){c.datepicker("option","disabled",!!b)},min:function(a,c,b){try{b=d.datepicker.parseDate("yy-mm-dd",b)}catch(e){b=false}b&&c.datepicker("option","minDate",b)},max:function(a,c,b){try{b=d.datepicker.parseDate("yy-mm-dd",b)}catch(e){b=false}b&&c.datepicker("option","maxDate",b)},value:function(a,c,
b){if(!k.date.blockAttr){try{var e=d.datepicker.parseDate("yy-mm-dd",b)}catch(j){e=false}e?c.datepicker("setDate",e):c.attr("value",b)}}}}if(!u.range||p.replaceUI){k.range=function(a){if(d.fn.slider){var c=d('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>'),b=this.common(a,c,k.range.attrs),e=function(j,g){if(j.originalEvent){k.range.blockAttr=true;a.attr("value",g.value);k.range.blockAttr=false;j.type=="slidechange"?h(a[0],"change"):h(a[0],"input")}};
d("span",c).attr("aria-labeledby",b.label.attr("id"));b.label.bind("click",function(){d("span",c).focus();return false});if(b.css){c.css(b.css);b.outerWidth&&c.outerWidth(b.outerWidth)}c.slider(d.extend({},p.slider,a.data("slider"),{change:e,slide:e}));d.each(["disabled","min","max","value","step"],function(j,g){a.attr(g,function(l,f){return f||""})})}};k.range.attrs={disabled:function(a,c,b){b=!!b;c.slider("option","disabled",b);d("span",c).attr({"aria-disabled":b+"",tabindex:b?"-1":"0"})},min:function(a,
c,b){b=b?b*1||0:0;c.slider("option","min",b);d("span",c).attr({"aria-valuemin":b})},max:function(a,c,b){b=b||b===0?b*1||100:100;c.slider("option","max",b);d("span",c).attr({"aria-valuemax":b})},value:function(a,c,b){b=d(a).attr("valueAsNumber");if(isNaN(b)){b=(c.slider("option","max")-c.slider("option","min"))/2;a.value=b}k.range.blockAttr||c.slider("option","value",b);d("span",c).attr({"aria-valuenow":b,"aria-valuetext":b})},step:function(a,c,b){b=b&&d.trim(b)?b*1||1:1;c.slider("option","step",b)}}}d.each(["disabled",
"min","max","value","step"],function(a,c){i.onNodeNamesPropertyModify("input",c,{set:function(b){var e=d.data(this,"inputUIReplace");e&&e.methods[c]&&e.methods[c](this,e.visual,b)}})});var o=function(a){if(a){a=d.extend({},a,p.datepicker);d("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option",a).each(function(){var c=d.data(this,"html5element");c&&d.each(["disabled","min","max","value"],function(b,e){c.attr(e,function(j,g){return g||""})})});d.datepicker.setDefaults(a)}};
d(n).bind("jquery-uiReady.langchange input-widgetsReady.langchange",function(){d.datepicker&&d(n).bind("webshimLocalizationReady",function(){i.activeLang(d.datepicker.regional,"forms-ext",o)}).unbind("jquery-uiReady.langchange input-widgetsReady.langchange")});i.addReady(function(a,c){d(n).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",function(){if(d.datepicker||d.fn.slider)k(a,c);d.datepicker&&d.fn.slider&&d(n).unbind(".initinputui");a===n&&i.isReady("forms-ext",true)})});(function(){if(!Modernizr.input.valueAsNumber){var a=
i.modules["forms-ext"].options,c=i.inputTypes,b=function(g,l,f){f=f||{};if(!("type"in f))f.type=d.attr(g,"type");if(!("step"in f))f.step=i.getStep(g,f.type);if(!("valueAsNumber"in f))f.valueAsNumber=c[f.type].asNumber(d.attr(g,"value"));var m=f.step=="any"?c[f.type].step*c[f.type].stepScaleFactor:f.step;i.addMinMaxNumberToCache("min",d(g),f);i.addMinMaxNumberToCache("max",d(g),f);if(isNaN(f.valueAsNumber))f.valueAsNumber=c[f.type].stepBase||0;if(f.step!=="any")if((g=Math.round((f.valueAsNumber-(f.minAsnumber||
0))%f.step*1E7)/1E7)&&Math.abs(g)!=f.step)f.valueAsNumber-=g;g=f.valueAsNumber+m*l;if(!isNaN(f.minAsNumber)&&g<f.minAsNumber)g=f.valueAsNumber*l<f.minAsNumber?f.minAsNumber:isNaN(f.maxAsNumber)?Number.MAX_VALUE:f.maxAsNumber;else if(!isNaN(f.maxAsNumber)&&g>f.maxAsNumber)g=f.valueAsNumber*l>f.maxAsNumber?f.maxAsNumber:isNaN(f.minAsNumber)?Number.MIN_VALUE:f.minAsNumber;return Math.round(g*1E7)/1E7};i.modules["forms-ext"].getNextStep=b;var e=function(g,l,f){if(!(g.disabled||g.readOnly||d(f).hasClass("step-controls"))){d.attr(g,
"value",c[l].numberToString(b(g,d(f).hasClass("step-up")?1:-1,{type:l})));d(g).unbind("blur.stepeventshim");h(g,"input");if(n.activeElement){if(n.activeElement!==g)try{g.focus()}catch(m){}setTimeout(function(){if(n.activeElement!==g)try{g.focus()}catch(s){}d(g).one("blur.stepeventshim",function(){h(g,"change")})},0)}}};if(a.stepArrows){i.onNodeNamesPropertyModify("input","disabled",{set:function(g){var l=d.data(g,"step-controls");if(l)l[g.disabled||g.readonly?"addClass":"removeClass"]("disabled-step-control")}});
i.onNodeNamesPropertyModify("input","readonly",{set:function(g){var l=d.data(g,"step-controls");if(l)l[g.disabled||g.readonly?"addClass":"removeClass"]("disabled-step-control")}})}var j={38:1,40:-1};i.addReady(function(g,l){a.stepArrows&&d("input",g).add(l.filter("input")).each(function(){var f=d.attr(this,"type");if(!(!c[f]||!c[f].asNumber||!a.stepArrows||a.stepArrows!==true&&!a.stepArrows[f]||d(this).hasClass("has-step-controls"))){var m=this,s=d('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(this).bind("selectstart dragstart",
function(){return false}).bind("mousedown mousepress",function(x){e(m,f,x.target);return false}),y=d(this).addClass("has-step-controls").data("step-controls",s).attr({readonly:this.readOnly,disabled:this.disabled,autocomplete:"off",role:"spinbutton"}).bind(d.browser.msie?"keydown":"keypress",function(x){if(!(this.disabled||this.readOnly||!j[x.keyCode])){d.attr(this,"value",c[f].numberToString(b(this,j[x.keyCode],{type:f})));h(this,"input");return false}});if(a.calculateWidth){r(y,s);s.css("marginTop",
(y.outerHeight()-s.outerHeight())/2)}}})})}})()});
