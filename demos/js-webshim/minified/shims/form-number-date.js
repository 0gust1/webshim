jQuery.webshims.ready("form-extend",function(g,i,C){var v=parseInt("NaN",10),A=document,e=i.inputTypes,t=function(a){return typeof a=="number"||a&&a==a*1},w=function(a){return g('<input type="'+a+'" />').attr("type")===a},l=function(a){return(a.getAttribute("type")||"").toLowerCase()},B=function(a,c){var b=g.attr(a,"step");if(b==="any")return b;c=c||l(a);if(!e[c]||!e[c].step)return b;b=e.number.asNumber(b);return(!isNaN(b)&&b>0?b:e[c].step)*e[c].stepScaleFactor},x=function(a,c,b){if(!(a+"AsNumber"in
b)){b[a+"AsNumber"]=e[b.type].asNumber(c.attr(a));if(isNaN(b[a+"AsNumber"])&&a+"Default"in e[b.type])b[a+"AsNumber"]=e[b.type][a+"Default"]}},u=function(a,c){a=""+a;c-=a.length;for(var b=0;b<c;b++)a="0"+a;return a};i.addValidityRule("stepMismatch",function(a,c,b){if(c==="")return false;if(!("type"in b))b.type=l(a[0]);if(b.type=="date")return false;var f=false;if(e[b.type]&&e[b.type].step){if(!("step"in b))b.step=B(a[0],b.type);if(b.step=="any")return false;if(!("valueAsNumber"in b))b.valueAsNumber=
e[b.type].asNumber(c);if(isNaN(b.valueAsNumber))return false;x("min",a,b);a=b.minAsNumber;if(isNaN(a))a=e[b.type].stepBase||0;f=Math.abs((b.valueAsNumber-a)%b.step);f=!(f<=1.0E-7||Math.abs(f-b.step)<=1.0E-7)}return f});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){i.addValidityRule(a.name,function(c,b,f){var j=false;if(b==="")return j;if(!("type"in f))f.type=l(c[0]);if(e[f.type]&&e[f.type].asNumber){if(!("valueAsNumber"in f))f.valueAsNumber=
e[f.type].asNumber(b);if(isNaN(f.valueAsNumber))return false;x(a.attr,c,f);if(isNaN(f[a.attr+"AsNumber"]))return j;j=f[a.attr+"AsNumber"]*a.factor<f.valueAsNumber*a.factor-1.0E-7}return j})});i.attr("valueAsNumber",{elementNames:["input"],getter:function(a){var c=l(a);return e[c]&&e[c].asNumber?e[c].asNumber(g.attr(a,"value")):v},setter:function(a,c,b){var f=l(a);if(e[f]&&e[f].numberToString)if(isNaN(c))g.attr(a,"value","");else{c=e[f].numberToString(c);if(c!==false)g.attr(a,"value",c);else throw"INVALID_STATE_ERR: DOM Exception 11";
}else b()}});i.attr("valueAsDate",{elementNames:["input"],getter:function(a){var c=l(a);return e[c]&&e[c].asDate&&!e[c].noAsDate?e[c].asDate(g.attr(a,"value")):null},setter:function(a,c,b){var f=l(a);if(e[f]&&e[f].dateToString){if(!C.noHTMLExtFixes)throw"there are some serious issues in opera's implementation. don't use!";if(c===null)g.attr(a,"value","");else{c=e[f].dateToString(c);if(c!==false)g.attr(a,"value",c);else throw"INVALID_STATE_ERR: DOM Exception 11";}}else b()}});var m={number:{mismatch:function(a){return!t(a)},
step:1,stepScaleFactor:1,asNumber:function(a){return t(a)?a*1:v},numberToString:function(a){return t(a)?a:false}},range:{minDefault:0,maxDefault:100},date:{mismatch:function(a){if(!a||!a.split||!/\d$/.test(a))return true;var c=a.split(/\u002D/);if(c.length!==3)return true;var b=false;g.each(c,function(f,j){if(!(t(j)||j&&j=="0"+j*1)){b=true;return false}});if(b)return b;if(c[0].length!==4||c[1].length!=2||c[1]>12||c[2].length!=2||c[2]>33)b=true;return a!==this.dateToString(this.asDate(a,true))},step:1,
stepScaleFactor:864E5,asDate:function(a,c){if(!c&&this.mismatch(a))return null;return new Date(this.asNumber(a,true))},asNumber:function(a,c){var b=v;if(c||!this.mismatch(a)){a=a.split(/\u002D/);b=Date.UTC(a[0],a[1]-1,a[2])}return b},numberToString:function(a){return t(a)?this.dateToString(new Date(a*1)):false},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+u(a.getUTCMonth()+1,2)+"-"+u(a.getUTCDate(),2):false}},time:{mismatch:function(a,c){if(!a||!a.split||!/\d$/.test(a))return true;
a=a.split(/\u003A/);if(a.length<2||a.length>3)return true;var b=false,f;if(a[2]){a[2]=a[2].split(/\u002E/);f=parseInt(a[2][1],10);a[2]=a[2][0]}g.each(a,function(j,o){if(!(t(o)||o&&o=="0"+o*1)||o.length!==2){b=true;return false}});if(b)return true;if(a[0]>23||a[0]<0||a[1]>59||a[1]<0)return true;if(a[2]&&(a[2]>59||a[2]<0))return true;if(f&&isNaN(f))return true;if(f)if(f<100)f*=100;else if(f<10)f*=10;return c===true?[a,f]:false},step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(a){a=new Date(this.asNumber(a));
return isNaN(a)?null:a},asNumber:function(a){var c=v;a=this.mismatch(a,true);if(a!==true){c=Date.UTC("1970",0,1,a[0][0],a[0][1],a[0][2]||0);if(a[1])c+=a[1]}return c},dateToString:function(a){if(a&&a.getUTCHours){var c=u(a.getUTCHours(),2)+":"+u(a.getUTCMinutes(),2),b=a.getSeconds();if(b!="0")c+=":"+u(b,2);b=a.getUTCMilliseconds();if(b!="0")c+="."+u(b,3);return c}else return false}},"datetime-local":{mismatch:function(a,c){if(!a||!a.split||(a+"special").split(/\u0054/).length!==2)return true;a=a.split(/\u0054/);
return e.date.mismatch(a[0])||e.time.mismatch(a[1],c)},noAsDate:true,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var c=v,b=this.mismatch(a,true);if(b!==true){a=a.split(/\u0054/)[0].split(/\u002D/);c=Date.UTC(a[0],a[1]-1,a[2],b[0][0],b[0][1],b[0][2]||0);if(b[1])c+=b[1]}return c},dateToString:function(a,c){return e.date.dateToString(a)+"T"+e.time.dateToString(a,c)}}};w("number")||i.addInputType("number",m.number);w("range")||i.addInputType("range",g.extend({},
m.number,m.range));w("date")||i.addInputType("date",m.date);w("time")||i.addInputType("time",g.extend({},m.date,m.time));w("datetime-local")||i.addInputType("datetime-local",g.extend({},m.date,m.time,m["datetime-local"]));(function(){var a=i.modules["form-number-date"].options,c=g.browser.msie&&parseInt(g.browser.version,10)<8?2:0,b=function(h,k,d){d=d||{};if(!("type"in d))d.type=l(h);if(!("step"in d))d.step=B(h,d.type);if(!("valueAsNumber"in d))d.valueAsNumber=e[d.type].asNumber(g.attr(h,"value"));
var y=d.step=="any"?e[d.type].step*e[d.type].stepScaleFactor:d.step;x("min",g(h),d);x("max",g(h),d);if(isNaN(d.valueAsNumber))d.valueAsNumber=e[d.type].stepBase||0;if(d.step!=="any")if((h=Math.round((d.valueAsNumber-(d.minAsnumber||0))%d.step*1E7)/1E7)&&Math.abs(h)!=d.step)d.valueAsNumber-=h;h=d.valueAsNumber+y*k;if(!isNaN(d.minAsNumber)&&h<d.minAsNumber)h=d.valueAsNumber*k<d.minAsNumber?d.minAsNumber:isNaN(d.maxAsNumber)?Number.MAX_VALUE:d.maxAsNumber;else if(!isNaN(d.maxAsNumber)&&h>d.maxAsNumber)h=
d.valueAsNumber*k>d.maxAsNumber?d.maxAsNumber:isNaN(d.minAsNumber)?Number.MIN_VALUE:d.minAsNumber;return Math.round(h*1E7)/1E7};i.modules["form-number-date"].getNextStep=b;var f=function(h,k,d){if(!(h.disabled||h.readOnly||g(d).hasClass("step-controls"))){g.attr(h,"value",e[k].numberToString(b(h,g(d).hasClass("step-up")?1:-1,{type:k})));g(h).unbind("blur.stepeventshim");i.triggerInlineForm(h,"input");if(A.activeElement){if(A.activeElement!==h)try{h.focus()}catch(y){}setTimeout(function(){if(A.activeElement!==
h)try{h.focus()}catch(n){}g(h).one("blur.stepeventshim",function(){g(h).trigger("change")})},0)}}};if(a.stepArrows){var j={elementNames:["input"],setter:function(h,k,d){d();if(k=g.data(h,"step-controls"))k[h.disabled||h.readonly?"addClass":"removeClass"]("disabled-step-control")}};i.attr("disabled",j);i.attr("readonly",j)}var o={38:1,40:-1};i.addReady(function(h,k){a.stepArrows&&g("input",h).add(k.filter("input")).each(function(){var d=l(this);if(!(!e[d]||!e[d].asNumber||!a.stepArrows||a.stepArrows!==
true&&!a.stepArrows[d])){var y=this,n=g(this).css("direction")=="rtl"?{action:"insertBefore",side:"Left",otherSide:"right"}:{action:"insertAfter",side:"Right",otherSide:"Left"},p=g('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>')[n.action](this).bind("selectstart dragstart",function(){return false}).bind("mousedown mousepress",function(z){f(y,d,z.target);return false});g(this).addClass("has-step-controls").data("step-controls",p).attr({readonly:this.readOnly,
disabled:this.disabled,autocomplete:"off"}).bind(g.browser.msie?"keydown":"keypress",function(z){if(!(this.disabled||this.readOnly||!o[z.keyCode])){g.attr(this,"value",e[d].numberToString(b(this,o[z.keyCode],{type:d})));i.triggerInlineForm(this,"input");return false}});if(a.calculateWidth){var q=g(this),s={w:q.width()};if(s.w){var r={mL:parseInt(p.css("margin"+n.otherSide),10)||0,w:p.outerWidth()};s.mR=parseInt(q.css("margin"+n.side),10)||0;c?p.css("marginBottom",(q.innerHeight()-p.height()/2)/2-
1):p.css("marginBottom",(parseInt(q.css("paddingBottom"),10)||0)/-2);s.mR&&q.css("margin"+n.side,0);if(r.mL<=r.w*-1){p.css("margin"+n.side,Math.floor(Math.abs(r.w+r.mL)+s.mR));q.css("padding"+n.side,(parseInt(g(this).css("padding"+n.side),10)||0)+Math.abs(r.mL));q.css("width",Math.floor(s.w+r.mL))}else{p.css("margin"+n.side,s.mR);q.css("width",Math.floor(s.w-r.mL-r.w))}}}}})})})();i.attr("type",{elementNames:["input"],getter:function(a){var c=l(a);return i.inputTypes[c]?c:a.type||a.getAttribute("type")},
setter:true});i.createReadyEvent("form-number-date")},true);
