jQuery.webshims.register("mediaelement-swf",function(c,e,w,t,s,m){var n=e.mediaelement,z=w.swfobject,x=Modernizr.audio&&Modernizr.video,A=z.hasFlashPlayerVersion("9.0.115"),B={paused:!0,ended:!1,currentSrc:"",duration:w.NaN,readyState:0,networkState:0,videoHeight:0,videoWidth:0,error:null,buffered:{start:function(a){if(a)e.error("buffered index size error");else return 0},end:function(a){if(a)e.error("buffered index size error");else return 0},length:0}},J=Object.keys(B),C={currentTime:0,volume:1,
muted:!1};Object.keys(C);var D=c.extend({isActive:"html5",activating:"html5",wasSwfReady:!1,_bufferedEnd:0,_bufferedStart:0,_metadata:!1,_callMeta:!1,currentTime:0,_ppFlag:s},B,C),E=/^jwplayer-/,h=function(a){if(a=t.getElementById(a.replace(E,"")))return a=e.data(a,"mediaelement"),a.isActive=="flash"?a:null},o=function(a){return(a=e.data(a,"mediaelement"))&&a.isActive=="flash"?a:null},g=function(a,b){b=c.Event(b);b.preventDefault();c.event.trigger(b,s,a)},u,K=e.cfg.basePath+"jwplayer/player.swf",
F=e.cfg.basePath+"swf/jwwebshims.swf";e.extendUNDEFProp(m.jwParams,{allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent"});e.extendUNDEFProp(m.jwVars,{screencolor:"ffffffff"});e.extendUNDEFProp(m.jwAttrs,{bgcolor:"#000000"});n.jwEvents={View:{PLAY:function(a){var b=h(a.id);if(b&&!b.stopPlayPause&&(b._ppFlag=!0,b.paused==a.state)){b.paused=!a.state;if(b.ended)b.ended=!1;g(b._elem,a.state?"play":"pause")}}},Model:{BUFFER:function(a){var b=h(a.id);if(b&&b._bufferedEnd!=a.percentage){b.networkState=
a.percentage==100?1:2;if(!b.duration){try{if(b.duration=b.jwapi.getPlaylist()[0].duration,b.duration<=0)b.duration=w.NaN}catch(d){}b.duration&&(g(b._elem,"durationchange"),(b._elemNodeName=="audio"||b._callMeta)&&this.META(c.extend({duration:b.duration},a),b))}if(b.ended)b.ended=!1;if(b.duration){if(a.percentage>1&&b.readyState<3)b.readyState=3,g(b._elem,"canplay");if(b._bufferedEnd&&b._bufferedEnd>a.percentage)b._bufferedStart=b.currentTime||0;b._bufferedEnd=a.percentage;b.buffered.length=1;if(a.percentage==
100)b.networkState=1,b.readyState=4;c.event.trigger("progress",s,b._elem,!0)}}},META:function(a,b){b=b&&b.networkState?b:h(a.id);if("duration"in a){if(b&&!b._metadata){b._metadata=!0;var d=b.duration;b.duration=a.duration;b.videoHeight=a.height||0;b.videoWidth=a.width||0;if(!b.networkState)b.networkState=2;if(b.readyState<1)b.readyState=1;d!==b.duration&&g(b._elem,"durationchange");g(b._elem,"loadedmetadata")}}else b._callMeta=!0},TIME:function(a){var b=h(a.id);if(b&&b.currentTime!==a.position){b.currentTime=
a.position;if(b.readyState<2)b.readyState=2;if(b.ended)b.ended=!1;g(b._elem,"timeupdate")}},STATE:function(a){var b=h(a.id);if(b)switch(a.newstate){case "BUFFERING":if(b.readyState>1)b.readyState=1;if(b.ended)b.ended=!1;g(b._elem,"waiting");break;case "PLAYING":b.paused=!1;b._ppFlag=!0;if(b.readyState<3)b.readyState=3,g(b._elem,"canplay");if(b.ended)b.ended=!1;g(b._elem,"playing");break;case "PAUSED":if(!b.paused&&!b.stopPlayPause)b.paused=!0,b._ppFlag=!0,g(b._elem,"pause");break;case "COMPLETED":if(b.readyState<
4)b.readyState=4;b.ended=!0;g(b._elem,"ended")}}},Controller:{ERROR:function(a){var b=h(a.id);b&&n.setError(b._elem,a.message)},SEEK:function(a){var b=h(a.id);if(b){if(b.ended)b.ended=!1;if(b.paused)try{b.jwapi.sendEvent("play","false")}catch(d){}if(b.currentTime!=a.position)b.currentTime=a.position,g(b._elem,"timeupdate")}},VOLUME:function(a){var b=h(a.id);if(b&&(a=a.percentage/100,b.volume!=a))b.volume=a,g(b._elem,"volumechange")},MUTE:function(a){if(!u||!a.state){var b=h(a.id);if(b&&b.muted!=a.state)b.muted=
a.state,g(b._elem,"volumechange")}}}};var L=function(a){c.each(n.jwEvents,function(b,d){c.each(d,function(d){a.jwapi["add"+b+"Listener"](d,"jQuery.webshims.mediaelement.jwEvents."+b+"."+d)})})},G=function(a){a&&(a._ppFlag===s&&c.prop(a._elem,"autoplay")||!a.paused)&&setTimeout(function(){if(a.isActive=="flash"&&(a._ppFlag===s||!a.paused))try{c(a._elem).play()}catch(b){}},1)},M=function(a){if(a&&a._elemNodeName=="video"){var b,d,f,e={},i,k,g,l=function(j,p){if(p&&j&&!(p<1||j<1||a.isActive!="flash"))if(b&&
(b.remove(),b=!1),e.width=j,e.height=p,clearTimeout(k),d=a._elem.style.width=="auto",f=a._elem.style.height=="auto",d||f){i=i||c(a._elem).getShadowElement();var q;d&&!f?(q=i.height(),j*=q/p,p=q):!d&&f&&(q=i.width(),p*=q/j,j=q);g=!0;setTimeout(function(){g=!1},9);i.css({width:j,height:p})}},h=function(){if(!(a.isActive!="flash"||c.prop(a._elem,"readyState")&&c.prop(this,"videoWidth"))){var i=c.prop(a._elem,"poster");if(i&&(d=a._elem.style.width=="auto",f=a._elem.style.height=="auto",d||f))b&&(b.remove(),
b=!1),b=c('<img style="position: absolute; height: auto; width: auto; top: 0px; left: 0px; visibility: hidden;" />'),b.bind("load error alreadycomplete",function(){clearTimeout(k);var a=this,d=a.naturalWidth||a.width||a.offsetWidth,i=a.naturalHeight||a.height||a.offsetHeight;i&&d?(l(d,i),a=null):setTimeout(function(){d=a.naturalWidth||a.width||a.offsetWidth;i=a.naturalHeight||a.height||a.offsetHeight;l(d,i);b&&(b.remove(),b=!1);a=null},9);c(this).unbind()}).prop("src",i).appendTo("body").each(function(){this.complete||
this.error?c(this).triggerHandler("alreadycomplete"):(clearTimeout(k),k=setTimeout(function(){c(a._elem).triggerHandler("error")},9999))})}};c(a._elem).bind("loadedmetadata",function(){l(c.prop(this,"videoWidth"),c.prop(this,"videoHeight"))}).bind("emptied",h).bind("swfstageresize",function(){g||l(e.width,e.height)}).bind("emptied",function(){e={}}).triggerHandler("swfstageresize");h();c.prop(a._elem,"readyState")&&l(c.prop(a._elem,"videoWidth"),c.prop(a._elem,"videoHeight"))}};n.playerResize=function(a){a&&
(a=t.getElementById(a.replace(E,"")))&&c(a).triggerHandler("swfstageresize")};c(t).bind("emptied",function(a){a=o(a.target);G(a)});var v;n.jwPlayerReady=function(a){var b=h(a.id);if(b&&b.jwapi){clearTimeout(v);b.jwData=a;b.wasSwfReady?c(b._elem).mediaLoad():(a=parseFloat(a.version,10),(a<5.6||a>=6)&&e.warn("mediaelement-swf is only testet with jwplayer 5.6+"),c.prop(b._elem,"volume",b.volume),c.prop(b._elem,"muted",b.muted),L(b));b.wasSwfReady=!0;var a=b.actionQueue.length,d=0,f;if(a&&b.isActive==
"flash")for(;b.actionQueue.length&&a>d;)d++,f=b.actionQueue.shift(),b.jwapi[f.fn].apply(b.jwapi,f.args);if(b.actionQueue.length)b.actionQueue=[];G(b)}};var y=c.noop;if(x){var N={play:1,playing:1},H=["play","pause","playing","canplay","progress","waiting","ended","loadedmetadata","durationchange","emptied"],I=H.map(function(a){return a+".webshimspolyfill"}).join(" "),O=function(a){var b=e.data(a.target,"mediaelement");b&&(a.originalEvent&&a.originalEvent.type===a.type)==(b.activating=="flash")&&(a.stopImmediatePropagation(),
N[a.type]&&b.isActive!=b.activating&&c(a.target).pause())},y=function(a){c(a).unbind(I).bind(I,O);H.forEach(function(b){e.moveToFirstEvent(a,b)})};y(t)}n.setActive=function(a,b,d){d||(d=e.data(a,"mediaelement"));if(d&&d.isActive!=b){b!="html5"&&b!="flash"&&e.warn("wrong type for mediaelement activating: "+b);var f=e.data(a,"shadowData");d.activating=b;c(a).pause();d.isActive=b;b=="flash"?(f.shadowElement=f.shadowFocusElement=d.shadowElem[0],c(a).hide().getShadowElement().show()):(c(a).show().getShadowElement().hide(),
f.shadowElement=f.shadowFocusElement=!1)}};var P=function(){var a=["_bufferedEnd","_bufferedStart","_metadata","_ppFlag","currentSrc","currentTime","duration","ended","networkState","paused","videoHeight","videoWidth","_callMeta"],b=a.length;return function(d){if(d){for(var c=b,e=d.networkState;--c;)delete d[a[c]];d.actionQueue=[];d.buffered.length=0;e&&g(d._elem,"emptied")}}}();n.createSWF=function(a,b,d){if(A){var f=c.extend({},m.jwVars,{image:c.prop(a,"poster")||"",file:b.srcProp}),g=c(a).data("jwvars")||
{};if(d&&d.swfCreated)n.setActive(a,"flash",d),P(d),d.currentSrc=b.srcProp,c.extend(f,g),m.changeJW(f,a,b,d,"load"),r(a,"sendEvent",["LOAD",f]);else{var i=c.prop(a,"controls"),k="jwplayer-"+e.getID(a),h=c.extend({},m.jwParams,c(a).data("jwparams")),l=a.nodeName.toLowerCase(),o=c.extend({},m.jwAttrs,{name:k,id:k},c(a).data("jwattrs")),j=c('<div class="polyfill-'+l+' polyfill-mediaelement" id="wrapper-'+k+'"><div id="'+k+'"></div>').css({position:"relative",overflow:"hidden"});l=="audio"&&!i?j.css({width:0,
height:0}):j.css({width:a.style.width||c(a).width(),height:a.style.height||c(a).height()});j.insertBefore(a);d=e.data(a,"mediaelement",e.objectCreate(D,{actionQueue:{value:[]},shadowElem:{value:j},_elemNodeName:{value:l},_elem:{value:a},currentSrc:{value:b.srcProp},swfCreated:{value:!0},buffered:{value:{start:function(b){if(b>=d.buffered.length)e.error("buffered index size error");else return 0},end:function(b){if(b>=d.buffered.length)e.error("buffered index size error");else return(d.duration-d._bufferedStart)*
d._bufferedEnd/100+d._bufferedStart},length:0}}}));x&&c.extend(d,{volume:c.prop(a,"volume"),muted:c.prop(a,"muted")});c.extend(f,{id:k,controlbar:i?m.jwVars.controlbar||(l=="video"?"over":"bottom"):"none",icons:""+(i&&l=="video")},g,{playerready:"jQuery.webshims.mediaelement.jwPlayerReady"});f.plugins?f.plugins+=","+F:f.plugins=F;e.addShadowDom(a,j);y(a);n.setActive(a,"flash",d);m.changeJW(f,a,b,d,"embed");M(d);z.embedSWF(K,k,"100%","100%","9.0.0",!1,f,h,o,function(b){if(b.success)d.jwapi=b.ref,i||
c(b.ref).attr("tabindex","-1").css("outline","none"),v||(clearTimeout(v),v=setTimeout(function(){var a=c(b.ref).css({minHeight:"2px",minWidth:"2px",display:"block"});a[0].offsetWidth>1&&a[0].offsetHeight>1&&location.protocol.indexOf("file:")===0?e.warn("Add your local development-directory to the local-trusted security sandbox:  http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html"):(a[0].offsetWidth<2||a[0].offsetHeight<2)&&e.info("JS-SWF connection can't be established on hidden or unconnected flash objects")},
8E3))})}}else setTimeout(function(){c(a).mediaLoad()},1)};var r=function(a,b,d,c){return(c=c||o(a))?(c.jwapi&&c.jwapi[b]?c.jwapi[b].apply(c.jwapi,d||[]):(c.actionQueue.push({fn:b,args:d}),c.actionQueue.length>10&&setTimeout(function(){c.actionQueue.length>5&&c.actionQueue.shift()},99)),c):!1};["audio","video"].forEach(function(a){var b={},d,f=function(c){a=="audio"&&(c=="videoHeight"||c=="videoWidth")||(b[c]={get:function(){var b=o(this);return b?b[c]:x&&d[c].prop._supget?d[c].prop._supget.apply(this):
D[c]},writeable:!1})},h=function(a,c){f(a);delete b[a].writeable;b[a].set=c};h("volume",function(b){var a=o(this);if(a){if(b*=100,!isNaN(b)){(b<0||b>100)&&e.error("volume greater or less than allowed "+b/100);a.muted&&(u=!0);r(this,"sendEvent",["VOLUME",b],a);if(u){try{a.jwapi.sendEvent("mute","true")}catch(c){}u=!1}setTimeout(function(){b/=100;if(!(a.volume==b||a.isActive!="flash"))a.volume=b,g(a._elem,"volumechange"),a=null},1)}}else if(d.volume.prop._supset)return d.volume.prop._supset.apply(this,
arguments)});h("muted",function(b){var a=o(this);if(a)b=!!b,r(this,"sendEvent",["mute",""+b],a),setTimeout(function(){if(!(a.muted==b||a.isActive!="flash"))a.muted=b,g(a._elem,"volumechange"),a=null},1);else if(d.muted.prop._supset)return d.muted.prop._supset.apply(this,arguments)});h("currentTime",function(b){var a=o(this);if(a){if(b*=1,!isNaN(b)){if(a.paused)clearTimeout(a.stopPlayPause),a.stopPlayPause=setTimeout(function(){a.paused=!0;a.stopPlayPause=!1},50);r(this,"sendEvent",["SEEK",""+b],a);
if(a.paused){if(a.readyState>0)a.currentTime=b,g(a._elem,"timeupdate");try{a.jwapi.sendEvent("play","false")}catch(c){}}}}else if(d.currentTime.prop._supset)return d.currentTime.prop._supset.apply(this,arguments)});["play","pause"].forEach(function(a){b[a]={value:function(){var b=o(this);if(b)b.stopPlayPause&&clearTimeout(b.stopPlayPause),r(this,"sendEvent",["play",a=="play"],b),setTimeout(function(){if(b.isActive=="flash"&&(b._ppFlag=!0,b.paused!=(a!="play")))b.paused=a!="play",g(b._elem,a)},1);
else if(d[a].prop._supvalue)return d[a].prop._supvalue.apply(this,arguments)}}});J.forEach(f);e.onNodeNamesPropertyModify(a,"controls",function(b,d){var e=r(this,d?"showControls":"hideControls",[a]);c(this)[d?"addClass":"removeClass"]("webshims-controls");e&&c(e.jwapi).attr("tabindex",d?"0":"-1")});d=e.defineNodeNameProperties(a,b,"prop")});if(A){var Q=c.cleanData;c.cleanData=function(a){a&&a[0]&&a[0].nodeType==1&&c(a).filter("object").each(function(){if("sendEvent"in this)try{this.sendEvent("play",
!1)}catch(b){}try{for(var a in this)typeof this[a]=="function"&&(this[a]=null)}catch(c){}});return Q.apply(this,arguments)}}});
