jQuery.webshims.register("mediaelement-swf",function(c,e,s,t,m,l){var n=e.mediaelement,w=s.swfobject,x=Modernizr.audio&&Modernizr.video,y=w.hasFlashPlayerVersion("9.0.115"),z,A={paused:!0,ended:!1,currentSrc:"",duration:s.NaN,readyState:0,networkState:0,videoHeight:0,videoWidth:0,error:null,buffered:m},F=Object.keys(A),B={currentTime:0,volume:1,muted:!1};Object.keys(B);var G=c.extend({isActive:"html5",activating:"html5",wasSwfReady:!1,_bufferedEnd:0,_bufferedStart:0,_metadata:!1,currentTime:0,_ppFlag:m},
A,B),H=/^jwplayer-/,i=function(a){if(a=t.getElementById(a.replace(H,"")))return a=e.data(a,"mediaelement"),a.isActive=="flash"?a:null},k=function(a){return(a=e.data(a,"mediaelement"))&&a.isActive=="flash"?a:null},f=function(a,b){b=c.Event(b);b.preventDefault();c.event.trigger(b,m,a)},q,u=e.cfg.basePath+"swf/jwwebshims.swf",I=e.cfg.basePath+"jwplayer/player.swf";y&&e.ready("WINDOWLOAD",function(){z||c.ajax(u,e.xhrPreloadOption)});e.extendUNDEFProp(l.jwParams,{allowscriptaccess:"always",allowfullscreen:"true",
wmode:"transparent"});e.extendUNDEFProp(l.jwVars,{screencolor:"ffffffff",controlbar:"over"});e.extendUNDEFProp(l.jwAttrs,{bgcolor:"#000000"});n.jwEvents={View:{PLAY:function(a){var b=i(a.id);if(b&&!b.stopPlayPause&&(b._ppFlag=!0,b.paused==a.state)){b.paused=!a.state;if(b.ended)b.ended=!1;f(b._elem,a.state?"play":"pause")}}},Model:{BUFFER:function(a){var b=i(a.id);if(b&&b._bufferEnd!=a.percentage){b.networkState=a.percentage==100?1:2;if(!b.duration){try{if(b.duration=b.jwapi.getPlaylist()[0].duration,
b.duration<=0)b.duration=s.NaN}catch(d){}b.duration&&(f(b._elem,"durationchange"),b._elemNodeName=="audio"&&this.META(c.extend({duration:b.duration},a),b))}if(b.ended)b.ended=!1;if(b.duration){b._bufferedEnd=a.percentage;b.buffered.length=1;if(a.percentage==100)b.networkState=1,b.readyState=4;c.event.trigger("progress",m,b._elem,!0)}}},META:function(a,b){if("duration"in a||"youtubequalitylevels"in a)if((b=b&&b.networkState?b:i(a.id))&&!b._metadata){b._metadata=!0;if(!b.duration||"duration"in a||!("youtubequalitylevels"in
a)){var d=b.duration;b.duration=a.duration;b.videoHeight=a.height||0;b.videoWidth=a.width||0;if(!b.networkState)b.networkState=2;if(b.readyState<1)b.readyState=1;d!==b.duration&&f(b._elem,"durationchange")}f(b._elem,"loadedmetadata")}},TIME:function(a){var b=i(a.id);if(b&&b.currentTime!==a.position){b.currentTime=a.position;if(b.readyState<2)b.readyState=2;if(b.ended)b.ended=!1;f(b._elem,"timeupdate")}},STATE:function(a){var b=i(a.id);if(b)switch(a.newstate){case "BUFFERING":if(b.readyState>1)b.readyState=
1;if(b.ended)b.ended=!1;f(b._elem,"waiting");break;case "PLAYING":b.paused=!1;b._ppFlag=!0;if(b.readyState<3)b.readyState=3,f(b._elem,"canplay");if(b.ended)b.ended=!1;f(b._elem,"playing");break;case "PAUSED":if(!b.paused&&!b.stopPlayPause)b.paused=!0,b._ppFlag=!0,f(b._elem,"pause");break;case "COMPLETED":if(b.readyState<4)b.readyState=4;b.ended=!0;f(b._elem,"ended")}}},Controller:{ERROR:function(a){i(a.id)&&n.setError(elem,a.message)},SEEK:function(a){var b=i(a.id);if(b){if(b.ended)b.ended=!1;if(b.paused)try{b.jwapi.sendEvent("play",
"false")}catch(d){}if(b.currentTime!=a.position)b.currentTime=a.position,f(b._elem,"timeupdate")}},VOLUME:function(a){var b=i(a.id);if(b&&(a=a.percentage/100,b.volume!=a))b.volume=a,f(b._elem,"volumechange")},MUTE:function(a){if(!q||!a.state){var b=i(a.id);if(b&&b.muted!=a.state)b.muted=a.state,f(b._elem,"volumechange")}}}};var J=function(a){c.each(n.jwEvents,function(b,d){c.each(d,function(d){a.jwapi["add"+b+"Listener"](d,"jQuery.webshims.mediaelement.jwEvents."+b+"."+d)})})},C=function(a){a&&(a._ppFlag===
m&&c.prop(a._elem,"autoplay")||!a.paused)&&setTimeout(function(){if(a.isActive=="flash"&&(a._ppFlag===m||!a.paused))try{c(a._elem).play()}catch(b){}},1)},K=function(a){if(a&&a._elemNodeName=="video"){var b,d,g,e,j,h=function(h,o){if(o&&h&&!(o<1||h<1||a.isActive!="flash"))if(b&&(b.remove(),b=!1),clearTimeout(j),d=a._elem.style.width=="auto",g=a._elem.style.height=="auto",d||g){e=e||c(a._elem).getShadowElement();var f;d&&!g?(f=c(a._elem).height(),h*=f/o,o=f):!d&&g&&(f=c(a._elem).width(),o*=f/h,h=f);
e.css({width:h,height:o})}},f=function(){if(!(a.isActive!="flash"||c.prop(a._elem,"readyState"))){var e=c.prop(a._elem,"poster");if(e&&(d=a._elem.style.width=="auto",g=a._elem.style.height=="auto",d||g))b&&(b.remove(),b=!1),b=c('<img style="position: absolute; height: auto; width: auto; top: 0px; left: 0px; visibility: hidden;" />'),b.bind("load error alreadycomplete",function(){clearTimeout(j);c(this).unbind();var a=this,d=a.naturalWidth||a.width||a.offsetWidth,g=a.naturalHeight||a.height||a.offsetHeight;
g&&d?(h(d,g),a=null):setTimeout(function(){d=a.naturalWidth||a.width||a.offsetWidth;g=a.naturalHeight||a.height||a.offsetHeight;h(d,g);b&&(b.remove(),b=!1);a=null},9)}).prop("src",e).appendTo("body").each(function(){this.complete||this.error?c(this).triggerHandler("alreadycomplete"):(clearTimeout(j),j=setTimeout(function(){c(a._elem).triggerHandler("error")},9E3))})}};c(a._elem).bind("loadedmetadata",function(){h(c.prop(this,"videoWidth"),c.prop(this,"videoHeight"))}).bind("emptied",f).each(function(){c.prop(a._elem,
"readyState")?h(c.prop(this,"videoWidth"),c.prop(this,"videoHeight")):f()})}};c(t).bind("emptied",function(a){a=k(a.target);C(a)});var r;n.jwPlayerReady=function(a){var b=i(a.id);if(b&&b.jwapi){clearTimeout(r);b.jwData=a;if(b.wasSwfReady){var a=b.actionQueue.length,d=0,g;if(a&&b.isActive=="flash")for(;b.actionQueue.length&&a>d;)d++,g=b.actionQueue.shift(),b.jwapi[g.fn].apply(b.jwapi,g.args);if(b.actionQueue.length)b.actionQueue=[]}else a=parseFloat(a.version,10),(a<5.6||a>=6)&&e.warn("mediaelement-swf is only testet with jwplayer 5.6+"),
c.prop(b._elem,"volume",b.volume),c.prop(b._elem,"muted",b.muted),J(b);b.wasSwfReady=!0;C(b)}};var D=c.noop;if(x){var L={play:1,playing:1},v=["play","pause","playing","canplay","progress","waiting","ended","loadedmetadata","durationchange","emptied"].map(function(a){return a+".webshimspolyfill"}).join(" "),E=function(a){var b=e.data(a.target,"mediaelement");b&&(a.originalEvent&&a.originalEvent.type===a.type)==(b.activating=="flash")&&(a.stopImmediatePropagation(),L[a.type]&&b.isActive!=b.activating&&
c(a.target).pause())};c(t).bind(v,E);D=function(a){c(a).unbind(v).bind(v,E)}}n.setActive=function(a,b,d){d||(d=e.data(a,"mediaelement"));if(d&&d.isActive!=b)b!="html5"&&b!="flash"&&e.warn("wrong type for mediaelement activating: "+b),d.activating=b,c(a).pause(),e.data(a,"mediaelementError",!1),d.isActive=b,b=="flash"?c(a).hide().getShadowElement().show():c(a).show().getShadowElement().hide()};var M=function(){return function(a){if(a){for(var b=12,d=a.networkState;--b;)delete a[b];a.actionQueue=[];
a.buffered.length=0;d&&f(a._elem,"emptied")}}}();n.createSWF=function(a,b,d){if(y){z=!0;var g=c.extend({},l.jwVars,{image:c.prop(a,"poster")||"",file:b.srcProp}),f=c(a).data("jwvars")||{};if(d)n.setActive(a,"flash",d),M(d),d.currentSrc=b.srcProp,c.extend(g,f),l.changeJW(g,a,b,d,"load"),p(a,"sendEvent",["LOAD",g]);else{var j=c.prop(a,"controls"),h="jwplayer-"+e.getID(a),i=c.extend({},l.jwParams,c(a).data("jwparams")),k=a.nodeName.toLowerCase(),o=c.extend({},l.jwAttrs,{name:h,id:h},c(a).data("jwattrs")),
m=c('<div class="polyfill-'+k+'" id="wrapper-'+h+'"><div id="'+h+'"></div>').css({width:a.style.width||c(a).width(),height:a.style.height||c(a).height(),position:"relative"}).insertBefore(a),d=e.data(a,"mediaelement",e.objectCreate(G,{actionQueue:{value:[]},_elemNodeName:{value:k},_elem:{value:a},currentSrc:{value:b.srcProp},buffered:{value:{start:function(b){if(b>=d.buffered.length)e.error("buffered index size error");else return 0},end:function(b){if(b>=d.buffered.length)e.error("buffered index size error");
else return d.duration*d._bufferedEnd/100+d._bufferedStart},length:0}}}));x&&c.extend(d,{volume:c.prop(a,"volume"),muted:c.prop(a,"muted")});c.extend(g,{id:h,controlbar:j?l.jwVars.controlbar||"over":"none",icons:""+j},f,{playerready:"jQuery.webshims.mediaelement.jwPlayerReady"});g.plugins?g.plugins+=","+u:g.plugins=u;e.addShadowDom(a,m);D(a);n.setActive(a,"flash",d);l.changeJW(g,a,b,d,"embed");K(d);w.embedSWF(I,h,"100%","100%","9.0.0",!1,g,i,o,function(b){if(b.success)d.jwapi=b.ref,j||c(b.ref).attr("tabindex",
"-1").css("outline","none"),r||(clearTimeout(r),r=setTimeout(function(){var a=c(b.ref);a[0].offsetWidth>1&&a[0].offsetHeight>1&&location.protocol.indexOf("file:")===0?e.warn("Add your local development-directory to the local-trusted security sandbox:  http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html"):e.info("JS-SWF connection can't be established on hidden or unconnected flash objects")},8E3))})}}else setTimeout(function(){c(a).mediaLoad()},1)};var p=function(a,
b,d,c){return(c=c||k(a))?(c.jwapi&&c.jwapi[b]?c.jwapi[b].apply(c.jwapi,d||[]):(c.actionQueue.push({fn:b,args:d}),c.actionQueue.length>10&&setTimeout(function(){c.actionQueue.length>5&&c.actionQueue.shift()},99)),c):!1};["audio","video"].forEach(function(a){var b={},c,g=function(j){a=="audio"&&(j=="videoHeight"||j=="videoWidth")||(b[j]={get:function(){var b=k(this);if(b)return b[j];else if(c[j].prop._supget)return c[j].prop._supget.apply(this)},writeable:!1})},i=function(a,c){g(a);delete b[a].writeable;
b[a].set=c};i("volume",function(b){var a=k(this);if(a){if(b*=100,!isNaN(b)){(b<0||b>100)&&e.error("volume greater or less than allowed "+b/100);a.muted&&(q=!0);p(this,"sendEvent",["VOLUME",b],a);if(q){try{a.jwapi.sendEvent("mute","true")}catch(g){}q=!1}setTimeout(function(){if(!(a.volume==b||a.isActive!="flash"))a.volume=b,f(a._elem,"volumechange"),a=null},1)}}else if(c.volume.prop._supset)return c.volume.prop._supset.apply(this,arguments)});i("muted",function(b){var a=k(this);if(a)b=!!b,p(this,"sendEvent",
["mute",""+b],a),setTimeout(function(){if(!(a.muted==b||a.isActive!="flash"))a.muted=b,f(a._elem,"volumechange"),a=null},1);else if(c.muted.prop._supset)return c.muted.prop._supset.apply(this,arguments)});i("currentTime",function(b){var a=k(this);if(a){if(b*=1,!isNaN(b)){if(a.paused)clearTimeout(a.stopPlayPause),a.stopPlayPause=setTimeout(function(){a.paused=!0;a.stopPlayPause=!1},50);p(this,"sendEvent",["SEEK",""+b],a);if(a.paused){if(a.readyState>0)a.currentTime=b,f(a._elem,"timeupdate");try{a.jwapi.sendEvent("play",
"false")}catch(e){}}}}else if(c.currentTime.prop._supset)return c.currentTime.prop._supset.apply(this,arguments)});["play","pause"].forEach(function(a){b[a]={value:function(){var b=k(this);if(b)b.stopPlayPause&&clearTimeout(b.stopPlayPause),p(this,"sendEvent",["play",a=="play"],b),setTimeout(function(){if(b.isActive=="flash"&&(b._ppFlag=!0,b.paused!=(a!="play")))b.paused=a!="play",f(b._elem,a)},1);else if(c[a].prop._supvalue)return c[a].prop._supvalue.apply(this,arguments)}}});F.forEach(g);e.onNodeNamesPropertyModify(a,
"controls",function(a,b){p(this,b?"showControls":"hideControls")});c=e.defineNodeNameProperties(a,b,"prop")})});
