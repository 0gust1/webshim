webshims.register("form-native-extend",function(e,t,n,r,i,a){"use strict";var o=n.Modernizr,s=o.inputtypes;if(o.formvalidation&&!t.bugs.bustedValidity){var u=t.inputTypes,l={},c=function(){var t,n=function(){e(this).prop("validity")},r=function(){e("input").each(n)};return function(){clearTimeout(t),t=setTimeout(r,9)}}();t.addInputType=function(n,r){u[n]=r,e.isDOMReady&&o.formvalidation&&!t.bugs.bustedValidity&&c()},t.addValidityRule=function(e,t){l[e]=t},t.addValidityRule("typeMismatch",function(e,t,n,r){if(""===t)return!1;var i=r.typeMismatch;return"type"in n||(n.type=(e[0].getAttribute("type")||"").toLowerCase()),u[n.type]&&u[n.type].mismatch&&(i=u[n.type].mismatch(t,e)),i});var p=a.overrideMessages,d=!s.number||!s.time||!s.range||p,f=["customError","typeMismatch","rangeUnderflow","rangeOverflow","stepMismatch","tooLong","patternMismatch","valueMissing","valid"],h=p?["value","checked"]:["value"],m=[],v=function(t,n){if(t){var i=(t.getAttribute&&t.getAttribute("type")||t.type||"").toLowerCase();(p||u[i])&&(p&&!n&&"radio"==i&&t.name?e(r.getElementsByName(t.name)).each(function(){e.prop(this,"validity")}):e.prop(t,"validity"))}},g={};if(["input","textarea","select"].forEach(function(n){var r=t.defineNodeNameProperty(n,"setCustomValidity",{prop:{value:function(i){i+="";var a="input"==n?e(this).getNativeElement()[0]:this;r.prop._supvalue.call(a,i),d&&(t.data(a,"hasCustomError",!!i),v(a))}}});g[n]=r.prop._supvalue}),(d||p)&&(h.push("min"),h.push("max"),h.push("step"),m.push("input")),p&&(h.push("required"),h.push("pattern"),m.push("select"),m.push("textarea")),d){var y;if(m.forEach(function(n){var r=t.defineNodeNameProperty(n,"validity",{prop:{get:function(){if(!y){var a="input"==n?e(this).getNativeElement()[0]:this,o=r.prop._supget.call(a);if(!o)return o;var s={};if(f.forEach(function(e){s[e]=o[e]}),!e.prop(a,"willValidate"))return s;y=!0;var c,d=e(a),h={type:(a.getAttribute&&a.getAttribute("type")||"").toLowerCase(),nodeName:(a.nodeName||"").toLowerCase()},m=d.val(),v=!!t.data(a,"hasCustomError");if(y=!1,s.customError=v,s.valid&&s.customError)s.valid=!1;else if(!s.valid){var b=!0;e.each(s,function(e,t){return t?(b=!1,!1):i}),b&&(s.valid=!0)}return e.each(l,function(e,r){s[e]=r(d,m,h,s),s[e]&&(s.valid||!c)&&(p||u[h.type]&&u[h.type].mismatch)&&(g[n].call(a,t.createValidationMessage(a,e)),s.valid=!1,c=!0)}),s.valid?(g[n].call(a,""),t.data(a,"hasCustomError",!1)):!p||c||v||e.each(s,function(e,r){return"valid"!==e&&r?(g[n].call(a,t.createValidationMessage(a,e)),!1):i}),s}},writeable:!1}})}),h.forEach(function(e){t.onNodeNamesPropertyModify(m,e,function(){v(this)})}),r.addEventListener){var b,w=function(t){if("form"in t.target){var n=t.target.form;clearTimeout(b),v(t.target),n&&p&&e("input",n).each(function(){"password"==this.type&&v(this)})}};r.addEventListener("change",w,!0),p&&(r.addEventListener("blur",w,!0),r.addEventListener("keydown",function(e){13==e.keyCode&&w(e)},!0)),r.addEventListener("input",function(e){clearTimeout(b),b=setTimeout(function(){v(e.target)},290)},!0)}var T=m.join(",");t.addReady(function(t,n){e(T,t).add(n.filter(T)).each(function(){e.prop(this,"validity")})}),p&&t.ready("DOM form-message",function(){t.activeLang({register:"form-core",callback:function(){e("input, select, textarea").getNativeElement().each(function(){if(!t.data(this,"hasCustomError")){var n,r=this,a=e.prop(r,"validity")||{valid:!0};a.valid||(n=(r.nodeName||"").toLowerCase(),e.each(a,function(e,a){return"valid"!==e&&a?(g[n].call(r,t.createValidationMessage(r,e)),!1):i}))}})}})})}t.defineNodeNameProperty("input","type",{prop:{get:function(){var e=this,n=(e.getAttribute("type")||"").toLowerCase();return t.inputTypes[n]?n:e.type}}})}});