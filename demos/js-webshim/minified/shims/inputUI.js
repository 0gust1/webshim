(function(c){c.support.inputUI="shim";var i=c.webshims.modules.inputUI.options;i.startInputUI=function(d){d&&c.webshims.loader.loadList(["jquery-ui"])};i.startInputUI(i._autoStart);var f=function(d){c("input",d).each(function(){var b=c.attr(this,"type");f[b]&&!c.data(this,"inputUIReplace")&&f[b](c(this))})};f.common=function(d,b,a){i.replaceNative&&d.bind("invalid",function(g){setTimeout(function(){if(!c.data(g.target,"maybePreventedinvalid"))throw"you have to handle invalid events, if you replace native input-widgets.";
},9)});var e={css:{marginRight:d.css("marginRight"),marginLeft:d.css("marginLeft")},outerWidth:d.outerWidth()};b.addClass(d[0].className).data("html5element",d);d.after(b).data("inputUIReplace",{visual:b,methods:a}).hide();return e};f.date=function(d){if(c.fn.datepicker){var b=c('<input type="text" class="input-date" />'),a=this.common(d,b,f.date.attrs),e=function(){f.date.blockAttr=true;d.attr("value",c.datepicker.formatDate("yy-mm-dd",b.datepicker("getDate")));f.date.blockAttr=false;d.trigger("change")};
if(a.css){b.css(a.css);a.outerWidth&&b.outerWidth(a.outerWidth)}b.datepicker(c.extend({},i.date,{onSelect:e})).bind("change",e).data("datepicker").dpDiv.addClass("input-date-datepicker-control");c.each(["disabled","min","max","value"],function(g,h){d.attr(h,function(j,k){return k||""})})}};f.date.attrs={disabled:function(d,b,a){b.datepicker("option","disabled",!!a)},min:function(d,b,a){try{a=c.datepicker.parseDate("yy-mm-dd",a)}catch(e){a=false}a&&b.datepicker("option","minDate",a)},max:function(d,
b,a){try{a=c.datepicker.parseDate("yy-mm-dd",a)}catch(e){a=false}a&&b.datepicker("option","maxDate",a)},value:function(d,b,a){if(!f.date.blockAttr){try{var e=c.datepicker.parseDate("yy-mm-dd",a)}catch(g){e=false}e?b.datepicker("setDate",e):b.attr("value",a)}}};f.range=function(d){if(c.fn.slider){var b=c('<span class="input-range" />'),a=this.common(d,b,f.range.attrs);if(a.css){b.css(a.css);a.outerWidth&&b.outerWidth(a.outerWidth)}b.slider(c.extend(i.slider,{change:function(e,g){if(e.originalEvent){f.range.blockAttr=
true;d.attr("value",g.value);f.range.blockAttr=false;d.trigger("change")}}}));c.each(["disabled","min","max","value","step"],function(e,g){d.attr(g,function(h,j){return j||""})})}};f.range.attrs={disabled:function(d,b,a){b.slider("option","disabled",!!a)},min:function(d,b,a){a=a?a*1||0:0;b.slider("option","min",a)},max:function(d,b,a){a=a||a===0?a*1||100:100;b.slider("option","max",a)},value:function(d,b,a){a=c(d).attr("valueAsNumber");if(isNaN(a)){a=(b.slider("option","max")-b.slider("option","min"))/
2;d.value=a}f.range.blockAttr||b.slider("option","value",a)},step:function(d,b,a){a=a?a*1||1:1;b.slider("option","step",a)}};c.each(["disabled","min","max","value","step"],function(d,b){c.webshims.attr(b,{elementNames:["input"],setter:function(a,e,g){var h=c.data(a,"inputUIReplace");g();h&&h.methods[b]&&h.methods[b](a,h.visual,e)},getter:true})});var l=function(d){if(d){d=c.extend({},d,i.date);c("input.input-date.hasDatepicker").datepicker("option",d).each(function(){var b=c.data(this,"html5element");
b&&c.each(["disabled","min","max","value"],function(a,e){b.attr(e,function(g,h){return h||""})})});c.datepicker.setDefaults(d)}};c(document).bind("jquery-uiReady.langchange input-widgetsReady.langchange",function(){c.datepicker&&c(document).bind("htmlExtLangChange",function(){c.webshims.activeLang(c.datepicker.regional,"inputUI",l)}).unbind("jquery-uiReady.langchange input-widgetsReady.langchange")});c.webshims.ready("number-date-type",function(){c.webshims.addReady(function(d){c(document).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",
function(){if(c.datepicker||c.fn.slider){f(d);c.datepicker&&c.fn.slider&&c(document).unbind("jquery-uiReady.initinputui input-widgetsReady.initinputui")}})});c.webshims.createReadyEvent("inputUI")},true,true)})(jQuery);
