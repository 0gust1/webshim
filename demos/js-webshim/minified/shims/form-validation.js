jQuery.webshims.register("form-validation",function(e,t,n,i,a,r){var o="webkitURL"in n,s=o&&Modernizr.formvalidation&&!t.bugs.bustedValidity,u="user-error",l="user-success",c={checkbox:1,radio:1},p=e([]),d=function(t){t=e(t);var n,a,r=p;return"radio"==t[0].type&&(a=t.prop("form"),n=t[0].name,r=n?a?e(a[n]):e(i.getElementsByName(n)).filter(function(){return!e.prop(this,"form")}):t,r=r.filter('[type="radio"]')),r},f=function(t,n){var i;return e.each(t,function(t,r){return r?(i="customError"==t?e.prop(n,"validationMessage"):t,!1):a}),i},h=function(e){var t;try{t=i.activeElement.name===e}catch(n){}return t},m={radio:1,checkbox:1,"select-one":1,"select-multiple":1,file:1},v={time:1,date:1,month:1,datetime:1,week:1,"datetime-local":1},g=function(t){var n,i;if(t.target&&(n=e(t.target).getNativeElement()[0],"submit"!=n.type&&e.prop(n,"willValidate"))){i=e.data(n,"webshimsswitchvalidityclass");var a=function(){if(!(s&&v[t.target.type]&&e(t.target).is(":focus")||"change"==t.type&&!m[n.type]||"focusout"==t.type&&"radio"==n.type&&h(n.name))){var i,a,r,o,p,g=e.prop(n,"validity"),y=e(n).getShadowElement();e(n).trigger("refreshCustomValidityRules"),g.valid?y.hasClass(l)||(i=l,a=u,o="changedvaliditystate",r="changedvalid",c[n.type]&&n.checked&&d(n).not(n).removeClass(a).addClass(i).removeAttr("aria-invalid"),y.removeAttr("aria-invalid"),e.removeData(n,"webshimsinvalidcause")):(p=f(g,n),e.data(n,"webshimsinvalidcause")!=p&&(e.data(n,"webshimsinvalidcause",p),o="changedvaliditystate"),y.hasClass(u)||(i=u,a=l,c[n.type]&&!n.checked&&d(n).not(n).removeClass(a).addClass(i).attr("aria-invalid","true"),y.attr("aria-invalid","true"),r="changedinvalid")),i&&(y.addClass(i).removeClass(a),setTimeout(function(){e(n).trigger(r)},0)),o&&setTimeout(function(){e(n).trigger(o)},0),e.removeData(n,"webshimsswitchvalidityclass")}};i&&clearTimeout(i),"refreshvalidityui"==t.type?a():e.data(n,"webshimsswitchvalidityclass",setTimeout(a,9))}};e(i.body).on(r.validityUIEvents||"focusout change refreshvalidityui invalid",g).on("reset",function(t){e(t.target).filter("form").jProp("elements").filter(".user-error, .user-success").removeAttr("aria-invalid").removeClass(".user-error, .user-success").getNativeElement().each(function(){e.removeData(this,"webshimsinvalidcause")}).trigger("resetvalidityui")});var y=function(){t.scrollRoot=o||"BackCompat"==i.compatMode?e(i.body):e(i.documentElement)},b=Modernizr.boxSizing||Modernizr["display-table"]||e.support.getSetAttribute?"minWidth":"width";y(),t.ready("DOM",y),t.getRelOffset=function(t,n){t=e(t);var i,a=e(n).offset();return e.swap(e(t)[0],{visibility:"hidden",display:"inline-block",left:0,top:0},function(){i=t.offset()}),a.top-=i.top,a.left-=i.left,a},e.extend(t.wsPopover,{isInElement:function(t,n){return t==n||e.contains(t,n)},show:function(t){var a=e.Event("wspopoverbeforeshow");if(this.element.trigger(a),!a.isDefaultPrevented()&&!this.isVisible){this.isVisible=!0,t=e(t||this.options.prepareFor).getNativeElement();var r=this,o=e(t).getShadowElement();this.clear(),this.element.removeClass("ws-po-visible").css("display","none"),this.prepareFor(t,o),this.position(o),r.timers.show=setTimeout(function(){r.element.css("display",""),r.timers.show=setTimeout(function(){r.element.addClass("ws-po-visible").trigger("wspopovershow")},9)},9),e(i).on("focusin"+this.eventns+" mousedown"+this.eventns,function(e){!r.options.hideOnBlur||r.stopBlur||r.isInElement(r.lastElement[0]||i.body,e.target)||r.isInElement(t[0]||i.body,e.target)||r.isInElement(r.element[0],e.target)||r.hide()}),e(n).on("resize"+this.eventns+" pospopover"+this.eventns,function(){clearTimeout(r.timers.repos),r.timers.repos=setTimeout(function(){r.position(o)},900)})}},prepareFor:function(t,n){var i,a=e.extend({},this.options,e(t.prop("form")||[]).data("wspopover")||{},t.data("wspopover")),r=this,o={};this.lastElement=e(t).getShadowFocusElement(),this.prepared&&this.options.prepareFor||("element"==a.appendTo?this.element.insertAfter(t):this.element.appendTo(a.appendTo)),this.element.attr({"data-class":t.prop("className"),"data-id":t.prop("id")}),o[b]=a.constrainWidth?n.outerWidth():"",this.element.css(o),a.hideOnBlur&&(i=function(e){r.stopBlur?e.stopImmediatePropagation():r.hide()},r.timers.bindBlur=setTimeout(function(){r.lastElement.off(r.eventns).on("focusout"+r.eventns+" blur"+r.eventns,i),r.lastElement.getNativeElement().off(r.eventns)},10)),!this.prepared&&e.fn.bgIframe&&this.element.bgIframe(),this.prepared=!0},clear:function(){e(n).off(this.eventns),e(i).off(this.eventns),this.stopBlur=!1,e.each(this.timers,function(e,t){clearTimeout(t)})},hide:function(){var t=e.Event("wspopoverbeforehide");if(this.element.trigger(t),!t.isDefaultPrevented()&&this.isVisible){this.isVisible=!1;var i=this,a=function(){i.element.css("display","none").attr({"data-id":"","data-class":"",hidden:"hidden"}),clearTimeout(i.timers.forcehide)};this.clear(),this.element.removeClass("ws-po-visible").trigger("wspopoverhide"),e(n).on("resize"+this.eventns,a),i.timers.forcehide=setTimeout(a,999)}},position:function(e){var n=t.getRelOffset(this.element.css({marginTop:0,marginLeft:0,marginRight:0,marginBottom:0}).removeAttr("hidden"),e);n.top+=e.outerHeight(),this.element.css({marginTop:"",marginLeft:"",marginRight:"",marginBottom:""}).css(n)}}),t.validityAlert=function(){var i=t.objectCreate(t.wsPopover,{},r.messagePopover),a=i.hide.bind(i);return i.element.addClass("validity-alert").attr({role:"alert"}),e.extend(i,{hideDelay:5e3,showFor:function(t,n,i,r){t=e(t).getNativeElement(),this.clear(),this.hide(),r||(this.getMessage(t,n),this.show(t),this.hideDelay&&(this.timers.delayedHide=setTimeout(a,this.hideDelay))),i||this.setFocus(t)},setFocus:function(i){var a,r=e(i).getShadowFocusElement(),o=t.scrollRoot.scrollTop(),s=r.offset().top-30;o>s&&(t.scrollRoot.animate({scrollTop:s-5},{queue:!1,duration:Math.max(Math.min(600,1.5*(o-s)),80)}),a=!0);try{r[0].focus()}catch(u){}a&&(t.scrollRoot.scrollTop(o),setTimeout(function(){t.scrollRoot.scrollTop(o)},0)),e(n).triggerHandler("pospopover"+this.eventns)},getMessage:function(e,t){t||(t=e.getErrorMessage()),t?i.contentElement.text(t):this.hide()}}),i}();var w={slide:{show:"slideDown",hide:"slideUp"},fade:{show:"fadeIn",hide:"fadeOut"}};w[r.iVal.fx]||(r.iVal.fx="slide"),t.errorbox={create:function(t,n){n||(n=this.getFieldWrapper(t));var i=e("div.ws-errorbox",n);return i.length||(i=e('<div class="ws-errorbox" hidden="hidden">'),n.append(i)),n.data("errorbox",i),i},getFieldWrapper:function(n){var i;return r.iVal.fieldWrapper&&(i="function"==typeof r.iVal.fieldWrapper?r.iVal.fieldWrapper.apply(this,arguments):e(n).parent().closest(r.iVal.fieldWrapper),i.length||(i=!1,t.error("could not find fieldwrapper: "+r.iVal.fieldWrapper))),i||(i=e(n).parent().closest(":not(span, label, em, strong, b, mark, p)")),i},get:function(t,n){n||(n=this.getFieldWrapper(t));var i=n.data("errorbox");return i?"string"==typeof i&&(i=e("#"+i),e.data(t,"errorbox",i)):i=this.create(t,n),i},addSuccess:function(t,n){var i,a=e.prop(t,"type"),r=c[a]?e.prop(t,"checked"):e(t).val();r&&(n.addClass("ws-success"),i=m[a]?"change":"blur",e(t).off(".recheckvalid").on(i+".recheckinvalid",function(){r=c[a]?e.prop(t,"checked"):e(t).val(),r||(n.removeClass("ws-success"),e(t).off(".recheckvalid"))}))},hide:function(t,n){var i=this.getFieldWrapper(t),a=i.data("errorbox");return a&&a.jquery&&(i.removeClass("ws-invalid"),a.message="",e(t).filter("input").off(".recheckinvalid"),a.slideUp(function(){e(this).attr({hidden:"hidden"})})),n||this.addSuccess(t,i),i},recheckInvalidInput:function(t){var n,i=function(){g({type:"input",target:t})};e(t).filter('input:not([type="checkbox"], [type="radio"])').off(".recheckinvalid").on("input.recheckinvalid",function(){clearTimeout(n),n=setTimeout(i,400)})},show:function(t,n){var i=this.getFieldWrapper(t),a=this.get(t,i);return a.message!=n&&(a.stop(!0,!0).html("<p>"+n+"</p>"),a.message=n,i.addClass("ws-invalid").removeClass("ws-success"),a.is("[hidden]")&&(this.recheckInvalidInput(t),a.css({display:"none"}).removeAttr("hidden")[w[r.iVal.fx].show]())),i.removeClass("ws-success"),e(t).off(".recheckvalid"),i},reset:function(e){this.hide(e,!0).removeClass("ws-success")},toggle:function(t){var n=e(t).getErrorMessage();n?this.show(t,n):this.hide(t,n)}},e(i.body).on({changedvaliditystate:function(n){if(r.iVal.sel){var i=e(n.target).jProp("form");i.is(r.iVal.sel)&&t.errorbox.toggle(n.target)}},resetvalidityui:function(n){if(r.iVal.sel){var i=e(n.target).jProp("form");i.is(r.iVal.sel)&&t.errorbox.reset(n.target)}},firstinvalid:function(n){if(r.iVal.sel&&r.iVal.handleBubble){var i=e(n.target).jProp("form");i.is(r.iVal.sel)&&(n.preventDefault(),t.validityAlert.showFor(n.target,!1,!1,"hide"==r.iVal.handleBubble))}},submit:function(t){return r.iVal.sel&&e(t.target).is(r.iVal.sel)&&e.prop(t.target,"noValidate")&&!e(t.target).checkValidity()?!1:a}}),t.modules["form-core"].getGroupElements=d,s&&function(){(function(){var t=/^(?:textarea|input)$/i,a=!1;i.addEventListener("contextmenu",function(e){t.test(e.target.nodeName||"")&&(a=e.target.form)&&setTimeout(function(){a=!1},1)},!1),e(n).on("invalid",function(e){e.originalEvent&&a&&a==e.target.form&&(e.wrongWebkitInvalid=!0,e.stopImmediatePropagation())})})()}()});