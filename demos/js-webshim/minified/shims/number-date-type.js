(function(d){var t,x=function(){if(!t){t=true;var o=parseInt("NaN",10),s=document,h=d.webshims.inputTypes,m=function(a){return typeof a=="number"||a&&a==a*1},p=function(a){return d('<input type="'+a+'" />').attr("type")===a},j=function(a){return(a.getAttribute("type")||"").toLowerCase()},u=function(a,b){var c=d.attr(a,"step");if(c==="any")return c;b=b||j(a);if(!h[b]||!h[b].step)return c;c=h.number.asNumber(c);return(!isNaN(c)&&c>0?c:h[b].step)*h[b].stepScaleFactor},r=function(a,b,c){if(!(a+"AsNumber"in
c)){c[a+"AsNumber"]=h[c.type].asNumber(b.attr(a));if(isNaN(c[a+"AsNumber"])&&a+"Default"in h[c.type])c[a+"AsNumber"]=h[c.type][a+"Default"]}},n=function(a,b){a=""+a;b-=a.length;for(var c=0;c<b;c++)a="0"+a;return a};d.webshims.addValidityRule("stepMismatch",function(a,b,c){if(b==="")return false;if(!("type"in c))c.type=j(a[0]);if(c.type=="date")return false;var g=false;if(h[c.type]&&h[c.type].step){if(!("step"in c))c.step=u(a[0],c.type);if(c.step=="any")return false;if(!("valueAsNumber"in c))c.valueAsNumber=
h[c.type].asNumber(b);if(isNaN(c.valueAsNumber))return false;r("min",a,c);a=c.minAsNumber;if(isNaN(a))a=h[c.type].stepBase||0;g=Math.abs((c.valueAsNumber-a)%c.step);g=!(g<=1.0E-7||Math.abs(g-c.step)<=1.0E-7)}return g});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){d.webshims.addValidityRule(a.name,function(b,c,g){var f=false;if(c==="")return f;if(!("type"in g))g.type=j(b[0]);if(h[g.type]&&h[g.type].asNumber){if(!("valueAsNumber"in g))g.valueAsNumber=
h[g.type].asNumber(c);if(isNaN(g.valueAsNumber))return false;r(a.attr,b,g);if(isNaN(g[a.attr+"AsNumber"]))return f;f=g[a.attr+"AsNumber"]*a.factor<g.valueAsNumber*a.factor-1.0E-7}return f})});d.webshims.attr("valueAsNumber",{elementNames:["input"],getter:function(a){var b=j(a);return h[b]&&h[b].asNumber?h[b].asNumber(d.attr(a,"value")):o},setter:function(a,b,c){var g=j(a);if(h[g]&&h[g].numberToString)if(isNaN(b))d.attr(a,"value","");else{b=h[g].numberToString(b);if(b!==false)d.attr(a,"value",b);else throw"INVALID_STATE_ERR: DOM Exception 11";
}else c()}});d.webshims.attr("valueAsDate",{elementNames:["input"],getter:function(a){var b=j(a);return h[b]&&h[b].asDate&&!h[b].noAsDate?h[b].asDate(d.attr(a,"value")):null},setter:function(a,b,c){var g=j(a);if(h[g]&&h[g].dateToString){if(!window.noHTMLExtFixes)throw"there are some serious issues in opera's implementation. don't use!";if(b===null)d.attr(a,"value","");else{b=h[g].dateToString(b);if(b!==false)d.attr(a,"value",b);else throw"INVALID_STATE_ERR: DOM Exception 11";}}else c()}});var k={number:{mismatch:function(a){return!m(a)},
step:1,stepScaleFactor:1,asNumber:function(a){return m(a)?a*1:o},numberToString:function(a){return m(a)?a:false}},range:{minDefault:0,maxDefault:100},date:{mismatch:function(a){if(!a||!a.split||!/\d$/.test(a))return true;var b=a.split(/\u002D/);if(b.length!==3)return true;var c=false;d.each(b,function(g,f){if(!(m(f)||f&&f=="0"+f*1)){c=true;return false}});if(c)return c;if(b[0].length!==4||b[1].length!=2||b[1]>12||b[2].length!=2||b[2]>33)c=true;return a!==this.dateToString(this.asDate(a,true))},step:1,
stepScaleFactor:864E5,asDate:function(a,b){if(!b&&this.mismatch(a))return null;return new Date(this.asNumber(a,true))},asNumber:function(a,b){var c=o;if(b||!this.mismatch(a)){a=a.split(/\u002D/);c=Date.UTC(a[0],a[1]-1,a[2])}return c},numberToString:function(a){return m(a)?this.dateToString(new Date(a*1)):false},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+n(a.getUTCMonth()+1,2)+"-"+n(a.getUTCDate(),2):false}},time:{mismatch:function(a,b){if(!a||!a.split||!/\d$/.test(a))return true;
a=a.split(/\u003A/);if(a.length<2||a.length>3)return true;var c=false,g;if(a[2]){a[2]=a[2].split(/\u002E/);g=parseInt(a[2][1],10);a[2]=a[2][0]}d.each(a,function(f,i){if(!(m(i)||i&&i=="0"+i*1)||i.length!==2){c=true;return false}});if(c)return true;if(a[0]>23||a[0]<0||a[1]>59||a[1]<0)return true;if(a[2]&&(a[2]>59||a[2]<0))return true;if(g&&isNaN(g))return true;if(g)if(g<100)g*=100;else if(g<10)g*=10;return b===true?[a,g]:false},step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(a){a=new Date(this.asNumber(a));
return isNaN(a)?null:a},asNumber:function(a){var b=o;a=this.mismatch(a,true);if(a!==true){b=Date.UTC("1970",0,1,a[0][0],a[0][1],a[0][2]||0);if(a[1])b+=a[1]}return b},dateToString:function(a){if(a&&a.getUTCHours){var b=n(a.getUTCHours(),2)+":"+n(a.getUTCMinutes(),2),c=a.getSeconds();if(c!="0")b+=":"+n(c,2);c=a.getUTCMilliseconds();if(c!="0")b+="."+n(c,3);return b}else return false}},"datetime-local":{mismatch:function(a,b){if(!a||!a.split||(a+"special").split(/\u0054/).length!==2)return true;a=a.split(/\u0054/);
return h.date.mismatch(a[0])||h.time.mismatch(a[1],b)},noAsDate:true,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var b=o,c=this.mismatch(a,true);if(c!==true){a=a.split(/\u0054/)[0].split(/\u002D/);b=Date.UTC(a[0],a[1]-1,a[2],c[0][0],c[0][1],c[0][2]||0);if(c[1])b+=c[1]}return b},dateToString:function(a,b){return h.date.dateToString(a)+"T"+h.time.dateToString(a,b)}}};p("number")||d.webshims.addInputType("number",k.number);p("range")||d.webshims.addInputType("range",
d.extend({},k.number,k.range));p("date")||d.webshims.addInputType("date",k.date);p("time")||d.webshims.addInputType("time",d.extend({},k.date,k.time));p("datetime-local")||d.webshims.addInputType("datetime-local",d.extend({},k.date,k.time,k["datetime-local"]));(function(){var a=d.webshims.modules["number-date-type"].options,b=function(f,i,e){e=e||{};if(!("type"in e))e.type=j(f);if(!("step"in e))e.step=u(f,e.type);if(!("valueAsNumber"in e))e.valueAsNumber=h[e.type].asNumber(d.attr(f,"value"));var l=
e.step=="any"?h[e.type].step*h[e.type].stepScaleFactor:e.step;r("min",d(f),e);r("max",d(f),e);if(isNaN(e.valueAsNumber))e.valueAsNumber=h[e.type].stepBase||0;if(e.step!=="any")e.valueAsNumber=Math.round((e.valueAsNumber-(e.valueAsNumber-(e.minAsnumber||0))%e.step)*1E7)/1E7;f=e.valueAsNumber+l*i;if(!isNaN(e.minAsNumber)&&f<e.minAsNumber)f=e.valueAsNumber*i<e.minAsNumber?e.minAsNumber:isNaN(e.maxAsNumber)?Number.MAX_VALUE:e.maxAsNumber;else if(!isNaN(e.maxAsNumber)&&f>e.maxAsNumber)f=e.valueAsNumber*
i>e.maxAsNumber?e.maxAsNumber:isNaN(e.minAsNumber)?Number.MIN_VALUE:e.minAsNumber;return f};d.webshims.modules["number-date-type"].getNextStep=b;var c=function(f,i,e){if(!(f.disabled||f.readOnly||d(e).hasClass("step-controls"))){d.attr(f,"value",h[i].numberToString(b(f,d(e).hasClass("step-up")?1:-1,{type:i})));d(f).unbind("blur.stepeventshim");d.webshims.triggerInlineForm(f,"input");if(s.activeElement){if(s.activeElement!==f)try{f.focus()}catch(l){}setTimeout(function(){if(s.activeElement!==f)try{f.focus()}catch(q){}d(f).one("blur.stepeventshim",
function(){d(f).trigger("change")})},0)}}};if(a.stepArrows){var g={elementNames:["input"],setter:function(f,i,e){e();if(i=d.data(f,"step-controls"))i[f.disabled||f.readonly?"addClass":"removeClass"]("disabled-step-control")}};d.webshims.attr("disabled",g);d.webshims.attr("readonly",g)}d.webshims.addReady(function(f){a.stepArrows&&d("input",f).each(function(){var i=j(this);if(!(!h[i]||!h[i].asNumber||!a.stepArrows||a.stepArrows!==true&&!a.stepArrows[i])){var e=this,l=d(this).css("direction")=="rtl"?
{action:"insertBefore",side:"Left",otherSide:"right"}:{action:"insertAfter",side:"Right",otherSide:"left"},q=d('<span class="step-controls"><span class="step-up" /><span class="step-down" tabindex="-1" /></span>')[l.action](this).bind("selectstart dragstart",function(){return false}).bind("mousedown mousepress",function(y){c(e,i,y.target);return false});d(this).addClass("has-step-controls").data("step-controls",q).attr({readonly:this.readOnly,disabled:this.disabled});if(a.calculateWidth){var v=d(this).width()||
parseInt(d(this).css("width"),10);if(v){var w=(parseInt(d(this).css("margin"+l.side),10)||0)+(parseInt(q.css("margin"+l.side),10)||0);d(this).css("width",v-q.outerWidth(true));w&&q.css("margin"+l.side,w)}}}})})})();d.webshims.attr("type",{elementNames:["input"],getter:function(a){var b=j(a);return d.webshims.inputTypes[b]?b:a.type||a.getAttribute("type")},setter:true});d.webshims.createReadyEvent("number-date-type")}};d.support.validity===true?d.webshims.ready("validation-base",x,true):d.webshims.ready("validity",
x,true)})(jQuery);
