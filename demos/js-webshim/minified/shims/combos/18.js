jQuery.webshims.register("form-datalist",function(a,b,l,n,s){b.propTypes.element=function(i){b.createPropDefault(i,"attr");if(!i.prop)i.prop={get:function(){var b=i.attr.get.call(this);b&&(b=a("#"+b)[0])&&i.propNodeName&&!a.nodeName(b,i.propNodeName)&&(b=null);return b||null},writeable:!1}};(function(){var i=a.webshims.cfg.forms,h=Modernizr.input.list;if(!h||i.customDatalist){var t=0,p={submit:1,button:1,reset:1,hidden:1,range:1,date:1},q=a.browser.msie&&7>parseInt(a.browser.version,10),v={},o=function(a){if(!a)return[];
if(v[a])return v[a];var b;try{b=JSON.parse(localStorage.getItem("storedDatalistOptions"+a))}catch(c){}v[a]=b||[];return b||[]},m={_create:function(g){if(!p[a.prop(g.input,"type")]){var b=g.datalist,c=a.data(g.input,"datalistWidget");if(b&&c&&c.datalist!==b)c.datalist=b,c.id=g.id,c.shadowList.prop("className","datalist-polyfill "+(c.datalist.className||"")+" "+c.datalist.id+"-shadowdom"),i.positionDatalist?c.shadowList.insertAfter(g.input):c.shadowList.appendTo("body"),a(c.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",
a.proxy(c,"_resetListCached")),c._resetListCached();else if(b){if(!(c&&c.datalist===b)){t++;var d=this;this.hideList=a.proxy(d,"hideList");this.timedHide=function(){clearTimeout(d.hideTimer);d.hideTimer=setTimeout(d.hideList,9)};this.datalist=b;this.id=g.id;this.hasViewableData=!0;this._autocomplete=a.attr(g.input,"autocomplete");a.data(g.input,"datalistWidget",this);this.shadowList=a('<div class="datalist-polyfill '+(this.datalist.className||"")+" "+this.datalist.id+'-shadowdom" />');i.positionDatalist?
this.shadowList.insertAfter(g.input):this.shadowList.appendTo("body");this.index=-1;this.input=g.input;this.arrayOptions=[];this.shadowList.delegate("li","mouseenter.datalistWidget mousedown.datalistWidget click.datalistWidget",function(e){var k=a("li:not(.hidden-item)",d.shadowList),c="mousedown"==e.type||"click"==e.type;d.markItem(k.index(e.currentTarget),c,k);"click"==e.type&&(d.hideList(),a(g.input).trigger("datalistselect"));return"mousedown"!=e.type}).bind("focusout",this.timedHide);g.input.setAttribute("autocomplete",
"off");a(g.input).attr({"aria-haspopup":"true"}).bind("input.datalistWidget",function(){if(!d.triggeredByDatalist)d.changedValue=!1,d.showHideOptions()}).bind("keydown.datalistWidget",function(e){var c=e.keyCode,f;if(40==c&&!d.showList())return d.markItem(d.index+1,!0),!1;if(d.isListVisible){if(38==c)return d.markItem(d.index-1,!0),!1;if(!e.shiftKey&&(33==c||36==c))return d.markItem(0,!0),!1;if(!e.shiftKey&&(34==c||35==c))return e=a("li:not(.hidden-item)",d.shadowList),d.markItem(e.length-1,!0,e),
!1;if(13==c||27==c)return 13==c&&(f=a("li.active-item:not(.hidden-item)",d.shadowList),d.changeValue(a("li.active-item:not(.hidden-item)",d.shadowList))),d.hideList(),f&&f[0]&&a(g.input).trigger("datalistselect"),!1}}).bind("focus.datalistWidget",function(){a(this).hasClass("list-focus")&&d.showList()}).bind("mousedown.datalistWidget",function(){(this==n.activeElement||a(this).is(":focus"))&&d.showList()}).bind("blur.datalistWidget",this.timedHide);a(this.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",
a.proxy(this,"_resetListCached"));this._resetListCached();g.input.form&&g.input.id&&a(g.input.form).bind("submit.datalistWidget"+g.input.id,function(){var e=a.prop(g.input,"value"),c=(g.input.name||g.input.id)+a.prop(g.input,"type");if(!d.storedOptions)d.storedOptions=o(c);if(e&&-1==d.storedOptions.indexOf(e)&&(d.storedOptions.push(e),e=d.storedOptions,c)){e=e||[];try{localStorage.setItem("storedDatalistOptions"+c,JSON.stringify(e))}catch(f){}}});a(l).bind("unload.datalist"+this.id+" beforeunload.datalist"+
this.id,function(){d.destroy()})}}else c&&c.destroy()}},destroy:function(){var g=a.attr(this.input,"autocomplete");a(this.input).unbind(".datalistWidget").removeData("datalistWidget");this.shadowList.remove();a(n).unbind(".datalist"+this.id);a(l).unbind(".datalist"+this.id);this.input.form&&this.input.id&&a(this.input.form).unbind("submit.datalistWidget"+this.input.id);this.input.removeAttribute("aria-haspopup");g===s?this.input.removeAttribute("autocomplete"):a(this.input).attr("autocomplete",g)},
_resetListCached:function(a){var j=this,c;this.needsUpdate=!0;this.lastUpdatedValue=!1;this.lastUnfoundValue="";this.updateTimer||(l.QUnit||(c=a&&n.activeElement==j.input)?j.updateListOptions(c):b.ready("WINDOWLOAD",function(){j.updateTimer=setTimeout(function(){j.updateListOptions();j=null;t=1},200+100*t)}))},updateListOptions:function(b){this.needsUpdate=!1;clearTimeout(this.updateTimer);this.updateTimer=!1;this.shadowList.css({fontSize:a.curCSS(this.input,"fontSize"),fontFamily:a.curCSS(this.input,
"fontFamily")});this.searchStart=a(this.input).hasClass("search-start");var j=[],c=[],d=[],e,k,f,w;for(k=a.prop(this.datalist,"options"),f=0,w=k.length;f<w;f++){e=k[f];if(e.disabled)return;e={value:a(e).val()||"",text:a.trim(a.attr(e,"label")||e.textContent||e.innerText||a.text([e])||""),className:e.className||"",style:a.attr(e,"style")||""};e.text?e.text!=e.value&&(e.className+=" different-label-value"):e.text=e.value;c[f]=e.value;d[f]=e}if(!this.storedOptions)this.storedOptions=o((this.input.name||
this.input.id)+a.prop(this.input,"type"));this.storedOptions.forEach(function(e){-1==c.indexOf(e)&&d.push({value:e,text:e,className:"stored-suggest",style:""})});for(f=0,w=d.length;f<w;f++)k=d[f],j[f]='<li class="'+k.className+'" style="'+k.style+'" tabindex="-1" role="listitem"><span class="option-label">'+k.text+'</span> <span class="option-value">'+k.value+"</span></li>";this.arrayOptions=d;this.shadowList.html('<div class="datalist-outer-box"><div class="datalist-box"><ul role="list">'+j.join("\n")+
"</ul></div></div>");a.fn.bgIframe&&q&&this.shadowList.bgIframe();(b||this.isListVisible)&&this.showHideOptions()},showHideOptions:function(b){var j=a.prop(this.input,"value").toLowerCase();if(!(j===this.lastUpdatedValue||this.lastUnfoundValue&&0===j.indexOf(this.lastUnfoundValue))){this.lastUpdatedValue=j;var c=!1,d=this.searchStart,e=a("li",this.shadowList);j?this.arrayOptions.forEach(function(k,f){var b;if(!("lowerText"in k))k.lowerText=k.text!=k.value?k.text.toLowerCase()+k.value.toLowerCase():
k.text.toLowerCase();b=k.lowerText.indexOf(j);(b=d?!b:-1!==b)?(a(e[f]).removeClass("hidden-item"),c=!0):a(e[f]).addClass("hidden-item")}):e.length&&(e.removeClass("hidden-item"),c=!0);this.hasViewableData=c;!b&&c&&this.showList();if(!c)this.lastUnfoundValue=j,this.hideList()}},setPos:function(){this.shadowList.css({marginTop:0,marginLeft:0,marginRight:0,marginBottom:0});var g=i.positionDatalist?a(this.input).position():b.getRelOffset(this.shadowList,this.input);g.top+=a(this.input).outerHeight();
g.width=a(this.input).outerWidth()-(parseInt(this.shadowList.css("borderLeftWidth"),10)||0)-(parseInt(this.shadowList.css("borderRightWidth"),10)||0);this.shadowList.css({marginTop:"",marginLeft:"",marginRight:"",marginBottom:""}).css(g);return g},showList:function(){if(this.isListVisible)return!1;this.needsUpdate&&this.updateListOptions();this.showHideOptions(!0);if(!this.hasViewableData)return!1;this.isListVisible=!0;var b=this,j;b.setPos();b.shadowList.addClass("datalist-visible").find("li.active-item").removeClass("active-item");
a(n).unbind(".datalist"+b.id).bind("mousedown.datalist"+b.id+" focusin.datalist"+b.id,function(c){c.target===b.input||b.shadowList[0]===c.target||a.contains(b.shadowList[0],c.target)?(clearTimeout(b.hideTimer),setTimeout(function(){clearTimeout(b.hideTimer)},9)):b.timedHide()});a(l).unbind(".datalist"+b.id).bind("resize.datalist"+b.id+" orientationchange.datalist "+b.id+" emchange.datalist"+b.id,function(){clearTimeout(j);j=setTimeout(function(){b.setPos()},9)});clearTimeout(j);return!0},hideList:function(){if(!this.isListVisible)return!1;
var g=this,j=function(){g.changedValue&&a(g.input).trigger("change");g.changedValue=!1};g.shadowList.removeClass("datalist-visible list-item-active");g.index=-1;g.isListVisible=!1;if(g.changedValue){g.triggeredByDatalist=!0;b.triggerInlineForm&&b.triggerInlineForm(g.input,"input");if(g.input==n.activeElement||a(g.input).is(":focus"))a(g.input).one("blur",j);else j();g.triggeredByDatalist=!1}a(n).unbind(".datalist"+g.id);a(l).unbind(".datalist"+g.id).bind("resize.datalist"+g.id+" orientationchange.datalist "+
g.id+" emchange.datalist"+g.id,function(){g.shadowList.css({top:0,left:0});a(l).unbind(".datalist"+g.id)});return!0},scrollIntoView:function(b){var j=a("ul",this.shadowList),c=a("div.datalist-box",this.shadowList),d=b.position();d.top-=(parseInt(j.css("paddingTop"),10)||0)+(parseInt(j.css("marginTop"),10)||0)+(parseInt(j.css("borderTopWidth"),10)||0);0>d.top?c.scrollTop(c.scrollTop()+d.top-2):(d.top+=b.outerHeight(),b=c.height(),d.top>b&&c.scrollTop(c.scrollTop()+(d.top-b)+2))},changeValue:function(b){if(b[0]){var b=
a("span.option-value",b).text(),j=a.prop(this.input,"value");if(b!=j)a(this.input).prop("value",b).triggerHandler("updateInput"),this.changedValue=!0}},markItem:function(b,j,c){c=c||a("li:not(.hidden-item)",this.shadowList);if(c.length)0>b?b=c.length-1:b>=c.length&&(b=0),c.removeClass("active-item"),this.shadowList.addClass("list-item-active"),c=c.filter(":eq("+b+")").addClass("active-item"),j&&(this.changeValue(c),this.scrollIntoView(c)),this.index=b}};(function(){h||b.defineNodeNameProperty("datalist",
"options",{prop:{writeable:!1,get:function(){var j=a("select",this);j[0]?j=j[0].options:(j=a("option",this).get(),j.length&&b.warn("you should wrap you option-elements for a datalist in a select element to support IE and other old browsers."));return j}}});var g={autocomplete:{attr:{get:function(){var b=a.data(this,"datalistWidget");return b?b._autocomplete:"autocomplete"in this?this.autocomplete:this.getAttribute("autocomplete")},set:function(b){var c=a.data(this,"datalistWidget");c?(c._autocomplete=
b,"off"==b&&c.hideList()):"autocomplete"in this?this.autocomplete=b:this.setAttribute("autocomplete",b)}}}};if(!h||!1 in a("<input />")[0])g.selectedOption={prop:{writeable:!1,get:function(){var b=a.prop(this,"list"),c=null,d;if(!b)return c;d=a.attr(this,"value");if(!d)return c;b=a.prop(b,"options");if(!b.length)return c;a.each(b,function(e,b){if(d==a.prop(b,"value"))return c=b,!1});return c}}};g.list=h?{attr:{get:function(){var g=b.contentAttr(this,"list");null!=g?this.removeAttribute("list"):g=
a.data(this,"datalistListAttr");return null==g?s:g},set:function(g){a.data(this,"datalistListAttr",g);b.objectCreate(m,s,{input:this,id:g,datalist:a.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"}:{attr:{get:function(){var a=b.contentAttr(this,"list");return null==a?s:a},set:function(g){b.contentAttr(this,"list",g);b.objectCreate(m,s,{input:this,id:g,datalist:a.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"};b.defineNodeNameProperties("input",
g);if(a.event.customEvent)a.event.customEvent.updateDatalist=!0,a.event.customEvent.updateInput=!0,a.event.customEvent.datalistselect=!0;b.addReady(function(a,c){c.filter("datalist > select, datalist, datalist > option, datalist > select > option").closest("datalist").triggerHandler("updateDatalist")})})()}})()});
jQuery.webshims.register("form-extend",function(a,b,l,n,s,i){l=l.Modernizr;s=l.inputtypes;if(l.formvalidation&&!b.bugs.bustedValidity){var h=b.inputTypes,t={};b.addInputType=function(e,a){h[e]=a};b.addValidityRule=function(a,c){t[a]=c};b.addValidityRule("typeMismatch",function(a,c,b,d){if(""===c)return!1;d=d.typeMismatch;if(!("type"in b))b.type=(a[0].getAttribute("type")||"").toLowerCase();h[b.type]&&h[b.type].mismatch&&(d=h[b.type].mismatch(c,a));return d});var p=i.overrideMessages,q=!s.number||
!s.time||!s.range||p,v="customError,typeMismatch,rangeUnderflow,rangeOverflow,stepMismatch,tooLong,patternMismatch,valueMissing,valid".split(","),i=p?["value","checked"]:["value"],o=[],m=function(e,c){if(e){var b=(e.getAttribute&&e.getAttribute("type")||e.type||"").toLowerCase();if(p||h[b])p&&!c&&"radio"==b&&e.name?a(n.getElementsByName(e.name)).each(function(){a.prop(this,"validity")}):a.prop(e,"validity")}},g={};["input","textarea","select"].forEach(function(e){var c=b.defineNodeNameProperty(e,
"setCustomValidity",{prop:{value:function(f){var f=f+"",d="input"==e?a(this).getNativeElement()[0]:this;c.prop._supvalue.call(d,f);b.bugs.validationMessage&&b.data(d,"customvalidationMessage",f);q&&(b.data(d,"hasCustomError",!!f),m(d))}}});g[e]=c.prop._supvalue});if(q||p)i.push("min"),i.push("max"),i.push("step"),o.push("input");p&&(i.push("required"),i.push("pattern"),o.push("select"),o.push("textarea"));if(q){var j;o.forEach(function(e){var c=b.defineNodeNameProperty(e,"validity",{prop:{get:function(){if(!j){var f=
"input"==e?a(this).getNativeElement()[0]:this,d=c.prop._supget.call(f);if(!d)return d;var r={};v.forEach(function(a){r[a]=d[a]});if(!a.prop(f,"willValidate"))return r;j=!0;var i=a(f),m={type:(f.getAttribute&&f.getAttribute("type")||"").toLowerCase(),nodeName:(f.nodeName||"").toLowerCase()},u=i.val(),y=!!b.data(f,"hasCustomError"),x;j=!1;r.customError=y;if(r.valid&&r.customError)r.valid=!1;else if(!r.valid){var l=!0;a.each(r,function(a,e){if(e)return l=!1});if(l)r.valid=!0}a.each(t,function(a,c){r[a]=
c(i,u,m,r);if(r[a]&&(r.valid||!x)&&(p||h[m.type]&&h[m.type].mismatch))g[e].call(f,b.createValidationMessage(f,a)),r.valid=!1,x=!0});r.valid?(g[e].call(f,""),b.data(f,"hasCustomError",!1)):p&&!x&&!y&&a.each(r,function(a,c){if("valid"!==a&&c)return g[e].call(f,b.createValidationMessage(f,a)),!1});return r}},writeable:!1}})});i.forEach(function(a){b.onNodeNamesPropertyModify(o,a,function(){m(this)})});if(n.addEventListener){var c;n.addEventListener("change",function(e){var b=e.target.form;clearTimeout(c);
m(e.target);b&&p&&a("input",b).each(function(){"password"==this.type&&m(this)})},!0);n.addEventListener("input",function(a){clearTimeout(c);c=setTimeout(function(){m(a.target)},290)},!0)}var d=o.join(",");b.addReady(function(e,c){a(d,e).add(c.filter(d)).each(function(){a.prop(this,"validity")})});p&&b.ready("DOM form-message",function(){b.activeLang({register:"form-core",callback:function(){a("input, select, textarea").getNativeElement().each(function(){if(!b.data(this,"hasCustomError")){var e=this,
c=a.prop(e,"validity")||{valid:!0},f;c.valid||(f=(e.nodeName||"").toLowerCase(),a.each(c,function(a,c){if("valid"!==a&&c)return g[f].call(e,b.createValidationMessage(e,a)),!1}))}})}})})}b.defineNodeNameProperty("input","type",{prop:{get:function(){var a=(this.getAttribute("type")||"").toLowerCase();return b.inputTypes[a]?a:this.type}}});l.input.list&&!(a("<datalist><select><option></option></select></datalist>").prop("options")||[]).length&&b.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,
get:function(){var c=this.options||[];if(!c.length){var b=a("select",this);if(b[0]&&b[0].options&&b[0].options.length)c=b[0].options}return c}}})}});
jQuery.webshims.register("form-number-date-api",function(a,b){var l,n,s;if(!b.getStep)b.getStep=function(c,b){var e=a.attr(c,"step");if("any"===e)return e;b=b||q(c);if(!h[b]||!h[b].step)return e;e=l.asNumber(e);return(!isNaN(e)&&0<e?e:h[b].step)*h[b].stepScaleFactor};if(!b.addMinMaxNumberToCache)b.addMinMaxNumberToCache=function(a,b,e){a+"AsNumber"in e||(e[a+"AsNumber"]=h[e.type].asNumber(b.attr(a)),isNaN(e[a+"AsNumber"])&&a+"Default"in h[e.type]&&(e[a+"AsNumber"]=h[e.type][a+"Default"]))};var i=
parseInt("NaN",10),h=b.inputTypes,t=function(a){return"number"==typeof a||a&&a==1*a},p=function(b){return a('<input type="'+b+'" />').prop("type")===b},q=function(a){return(a.getAttribute("type")||"").toLowerCase()},v=b.addMinMaxNumberToCache,o=function(a,b){for(var a=""+a,b=b-a.length,e=0;e<b;e++)a="0"+a;return a},m=b.bugs.valueAsNumberSet||b.bugs.bustedValidity;b.addValidityRule("stepMismatch",function(a,d,e,k){if(""===d)return!1;if(!("type"in e))e.type=q(a[0]);if("date"==e.type)return!1;k=(k||
{}).stepMismatch;if(h[e.type]&&h[e.type].step){if(!("step"in e))e.step=b.getStep(a[0],e.type);if("any"==e.step)return!1;if(!("valueAsNumber"in e))e.valueAsNumber=h[e.type].asNumber(d);if(isNaN(e.valueAsNumber))return!1;v("min",a,e);a=e.minAsNumber;isNaN(a)&&(a=h[e.type].stepBase||0);k=Math.abs((e.valueAsNumber-a)%e.step);k=!(1.0E-7>=k||1.0E-7>=Math.abs(k-e.step))}return k});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){b.addValidityRule(a.name,
function(b,e,k,f){f=(f||{})[a.name]||!1;if(""===e)return f;if(!("type"in k))k.type=q(b[0]);if(h[k.type]&&h[k.type].asNumber){if(!("valueAsNumber"in k))k.valueAsNumber=h[k.type].asNumber(e);if(isNaN(k.valueAsNumber))return!1;v(a.attr,b,k);if(isNaN(k[a.attr+"AsNumber"]))return f;f=k[a.attr+"AsNumber"]*a.factor<k.valueAsNumber*a.factor-1.0E-7}return f})});b.reflectProperties(["input"],["max","min","step"]);var g=b.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var b=q(this),b=h[b]&&
h[b].asNumber?h[b].asNumber(a.prop(this,"value")):g.prop._supget&&g.prop._supget.apply(this,arguments);null==b&&(b=i);return b},set:function(c){var d=q(this);h[d]&&h[d].numberToString?isNaN(c)?a.prop(this,"value",""):(d=h[d].numberToString(c),!1!==d?a.prop(this,"value",d):b.warn("INVALID_STATE_ERR: DOM Exception 11")):g.prop._supset&&g.prop._supset.apply(this,arguments)}}}),j=b.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var b=q(this);return h[b]&&h[b].asDate&&!h[b].noAsDate?
h[b].asDate(a.prop(this,"value")):j.prop._supget&&j.prop._supget.call(this)||null},set:function(c){var d=q(this);if(h[d]&&h[d].dateToString&&!h[d].noAsDate){if(null===c)return a.prop(this,"value",""),"";d=h[d].dateToString(c);if(!1!==d)return a.prop(this,"value",d),d;b.warn("INVALID_STATE_ERR: DOM Exception 11")}else return j.prop._supset&&j.prop._supset.apply(this,arguments)||null}}});l={mismatch:function(a){return!t(a)},step:1,stepScaleFactor:1,asNumber:function(a){return t(a)?1*a:i},numberToString:function(a){return t(a)?
a:!1}};n={minDefault:0,maxDefault:100};s={mismatch:function(b){if(!b||!b.split||!/\d$/.test(b))return!0;var d=b.split(/\u002D/);if(3!==d.length)return!0;var e=!1;a.each(d,function(a,b){if(!(t(b)||b&&b=="0"+1*b))return e=!0,!1});if(e)return e;if(4!==d[0].length||2!=d[1].length||12<d[1]||2!=d[2].length||33<d[2])e=!0;return b!==this.dateToString(this.asDate(b,!0))},step:1,stepScaleFactor:864E5,asDate:function(a,b){return!b&&this.mismatch(a)?null:new Date(this.asNumber(a,!0))},asNumber:function(a,b){var e=
i;if(b||!this.mismatch(a))a=a.split(/\u002D/),e=Date.UTC(a[0],a[1]-1,a[2]);return e},numberToString:function(a){return t(a)?this.dateToString(new Date(1*a)):!1},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+o(a.getUTCMonth()+1,2)+"-"+o(a.getUTCDate(),2):!1}};if(m||!p("range")||!p("time"))n=a.extend({},l,n);(m||!p("number"))&&b.addInputType("number",l);(m||!p("range"))&&b.addInputType("range",n);(m||!p("date"))&&b.addInputType("date",s)});
jQuery.webshims.register("form-number-date-ui",function(a,b,l,n,s,i){var h=b.triggerInlineForm,t=Modernizr.inputtypes,p=function(){var a={"padding-box":"innerWidth","border-box":"outerWidth","content-box":"width"},b=Modernizr.prefixed&&Modernizr.prefixed("boxSizing");return function(f,c){var d,g,h;g="width";b&&(g=a[f.css(b)]||g);d=f[g]();g="width"==g;if(d){var u=parseInt(c.css("marginLeft"),10)||0,j=c.outerWidth();(h=parseInt(f.css("marginRight"),10)||0)&&f.css("marginRight",0);u<=-1*j?(c.css("marginRight",
Math.floor(Math.abs(j+u)+h)),f.css("paddingRight",(parseInt(f.css("paddingRight"),10)||0)+Math.abs(u)),g&&f.css("width",Math.floor(d+u))):(c.css("marginRight",h),f.css("width",Math.floor(d-u-j)))}}}(),q={dateFormat:"yy-mm-dd"},v=a([]),o,m=function(e,c){a("input",e).add(c.filter("input")).each(function(){var e=a.prop(this,"type");if(m[e]&&!b.data(this,"shadowData"))m[e](a(this))})},g=function(b,c){if(i.lazyDate){var f=a.data(b[0],"setDateLazyTimer");f&&clearTimeout(f);a.data(b[0],"setDateLazyTimer",
setTimeout(function(){b.datepicker("setDate",c);a.removeData(b[0],"setDateLazyTimer");b=null},0))}else b.datepicker("setDate",c)};if(i.lazyDate===s)try{i.lazyDate=a.browser.msie&&9>b.browserVersion||500>a(l).width()&&500>a(l).height()}catch(j){}var c={tabindex:1,tabIndex:1,title:1,"aria-required":1,"aria-invalid":1};if(!i.copyAttrs)i.copyAttrs={};b.extendUNDEFProp(i.copyAttrs,c);m.common=function(e,k,f){Modernizr.formvalidation&&e.bind("firstinvalid",function(a){(b.fromSubmit||!o)&&e.unbind("invalid.replacedwidgetbubble").bind("invalid.replacedwidgetbubble",
function(f){!a.isInvalidUIPrevented()&&!f.isDefaultPrevented()&&(b.validityAlert.showFor(a.target),a.preventDefault(),f.preventDefault());e.unbind("invalid.replacedwidgetbubble")})});var d,g,h=a("input, span.ui-slider-handle",k),j=e[0].attributes;for(d in i.copyAttrs)if((g=j[d])&&g.specified)c[d]&&h[0]?h.attr(d,g.nodeValue):k[0].setAttribute(d,g.nodeValue);g=e.attr("id");d=i.calculateWidth?{css:{marginRight:e.css("marginRight"),marginLeft:e.css("marginLeft")},outerWidth:e.outerWidth()}:{};d.label=
g?a('label[for="'+g+'"]',e[0].form):v;g=b.getID(d.label);k.addClass(e[0].className);b.addShadowDom(e,k,{data:f||{},shadowFocusElement:a("input.input-datetime-local-date, span.ui-slider-handle",k)[0],shadowChilds:h});e.after(k).hide();e[0].form&&a(e[0].form).bind("reset",function(a){a.originalEvent&&!a.isDefaultPrevented()&&setTimeout(function(){e.prop("value",e.prop("value"))},0)});1==k.length&&!a("*",k)[0]&&(k.attr("aria-labelledby",g),d.label.bind("click",function(){k.focus();return!1}));return d};
Modernizr.formvalidation&&["input","form"].forEach(function(a){var c=b.defineNodeNameProperty(a,"checkValidity",{prop:{value:function(){o=!0;var a=c.prop._supvalue.apply(this,arguments);o=!1;return a}}})});if(!t.date||i.replaceUI){var d=function(e,c,f,d){var g,h,j=function(){u.dpDiv.unbind("mousedown.webshimsmousedownhandler");h=g=!1},u=c.bind("focusin",function(){j();u.dpDiv.unbind("mousedown.webshimsmousedownhandler").bind("mousedown.webshimsmousedownhandler",function(){g=!0})}).bind("focusout blur",
function(a){g&&(h=!0,a.stopImmediatePropagation())}).datepicker(a.extend({onClose:function(){h&&n.activeElement!==c[0]?(j(),c.trigger("focusout"),c.triggerHandler("blur")):j()}},q,i.datepicker,e.data("datepicker"))).bind("change",f).data("datepicker");u.dpDiv.addClass("input-date-datepicker-control");d&&b.triggerDomUpdate(d[0]);["disabled","min","max","value","step"].forEach(function(a){var b=e.prop(a);""!==b&&("disabled"!=a||!b)&&e.prop(a,b)});return u};m.date=function(b){if(a.fn.datepicker){var c=
a('<input class="input-date" type="text" />'),f=this.common(b,c,m.date.attrs),g=d(b,c,function(f){m.date.blockAttr=!0;var d;if(i.lazyDate){var g=a.data(c[0],"setDateLazyTimer");g&&(clearTimeout(g),a.removeData(c[0],"setDateLazyTimer"))}try{d=(d=a.datepicker.parseDate(c.datepicker("option","dateFormat"),c.prop("value")))?a.datepicker.formatDate("yy-mm-dd",d):c.prop("value")}catch(j){d=c.prop("value")}b.prop("value",d);m.date.blockAttr=!1;f.stopImmediatePropagation();h(b[0],"input");h(b[0],"change")});
f.css&&(c.css(f.css),f.outerWidth&&c.outerWidth(f.outerWidth),g.trigger[0]&&p(c,g.trigger))}};m.date.attrs={disabled:function(b,c,f){a.prop(c,"disabled",!!f)},min:function(b,c,f){try{f=a.datepicker.parseDate("yy-mm-dd",f)}catch(d){f=!1}f&&a(c).datepicker("option","minDate",f)},max:function(b,c,f){try{f=a.datepicker.parseDate("yy-mm-dd",f)}catch(d){f=!1}f&&a(c).datepicker("option","maxDate",f)},value:function(b,c,f){if(!m.date.blockAttr){try{var d=a.datepicker.parseDate("yy-mm-dd",f)}catch(h){d=!1}d?
g(a(c),d):a.prop(c,"value",f)}}}}if(!t.range||i.replaceUI)m.range=function(b){if(a.fn.slider){var c=a('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>'),f=this.common(b,c,m.range.attrs);a("span",c).attr("aria-labelledby",f.label.attr("id"));f.label.bind("click",function(){a("span",c).focus();return!1});f.css&&(c.css(f.css),f.outerWidth&&c.outerWidth(f.outerWidth));c.slider(a.extend({},i.slider,b.data("slider"),{slide:function(a,c){if(a.originalEvent)m.range.blockAttr=
!0,b.prop("value",c.value),m.range.blockAttr=!1,h(b[0],"input"),h(b[0],"change")}}));["disabled","min","max","step","value"].forEach(function(c){var f=b.attr(c),d;"value"==c&&!f&&(d=b.getShadowElement())&&(f=(a(d).slider("option","max")-a(d).slider("option","min"))/2);null!=f&&b.attr(c,f)})}},m.range.attrs={disabled:function(b,c,f){f=!!f;a(c).slider("option","disabled",f);a("span",c).attr({"aria-disabled":f+"",tabindex:f?"-1":"0"})},min:function(b,c,f){f=f?1*f||0:0;a(c).slider("option","min",f);a("span",
c).attr({"aria-valuemin":f})},max:function(b,c,f){f=f||0===f?1*f||100:100;a(c).slider("option","max",f);a("span",c).attr({"aria-valuemax":f})},value:function(b,c,f){f=a(b).prop("valueAsNumber");isNaN(f)||(m.range.blockAttr||a(c).slider("option","value",f),a("span",c).attr({"aria-valuenow":f,"aria-valuetext":f}))},step:function(b,c,f){f=f&&a.trim(f)?1*f||1:1;a(c).slider("option","step",f)}};if(!b.bugs.valueAsNumberSet&&(i.replaceUI||!Modernizr.inputtypes.date||!Modernizr.inputtypes.range))l=function(){b.data(this,
"hasShadow")&&a.prop(this,"value",a.prop(this,"value"))},b.onNodeNamesPropertyModify("input","valueAsNumber",l),b.onNodeNamesPropertyModify("input","valueAsDate",l);a.each(["disabled","min","max","value","step"],function(a,c){b.onNodeNamesPropertyModify("input",c,function(a){var e=b.data(this,"shadowData");if(e&&e.data&&e.data[c]&&e.nativeElement===this)e.data[c](this,e.shadowElement,a)})});if(!i.availabeLangs)i.availabeLangs="af ar ar-DZ az bg bs ca cs da de el en-AU en-GB en-NZ eo es et eu fa fi fo fr fr-CH gl he hr hu hy id is it ja ko kz lt lv ml ms nl no pl pt-BR rm ro ru sk sl sq sr sr-SR sv ta th tr uk vi zh-CN zh-HK zh-TW".split(" ");
l=function(){a.datepicker&&(b.activeLang({langObj:a.datepicker.regional,module:"form-number-date-ui",callback:function(b){a("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option",a.extend(q,b,i.datepicker))}}),a(n).unbind("jquery-uiReady.langchange input-widgetsReady.langchange"))};a(n).bind("jquery-uiReady.langchange input-widgetsReady.langchange",l);l();(function(){var c=function(){var b={};return function(c){return c in b?b[c]:b[c]=a('<input type="'+c+'" />')[0].type===
c}}();if(!c("number")){var d=b.cfg["forms-ext"],f=b.inputTypes,g=function(c,e,d){d=d||{};if(!("type"in d))d.type=a.prop(c,"type");if(!("step"in d))d.step=b.getStep(c,d.type);if(!("valueAsNumber"in d))d.valueAsNumber=f[d.type].asNumber(a.prop(c,"value"));var g="any"==d.step?f[d.type].step*f[d.type].stepScaleFactor:d.step;b.addMinMaxNumberToCache("min",a(c),d);b.addMinMaxNumberToCache("max",a(c),d);if(isNaN(d.valueAsNumber))d.valueAsNumber=f[d.type].stepBase||0;if("any"!==d.step&&(c=Math.round(1E7*
((d.valueAsNumber-(d.minAsnumber||0))%d.step))/1E7)&&Math.abs(c)!=d.step)d.valueAsNumber-=c;c=d.valueAsNumber+g*e;return c=!isNaN(d.minAsNumber)&&c<d.minAsNumber?d.valueAsNumber*e<d.minAsNumber?d.minAsNumber:isNaN(d.maxAsNumber)?d.valueAsNumber:d.maxAsNumber:!isNaN(d.maxAsNumber)&&c>d.maxAsNumber?d.valueAsNumber*e>d.maxAsNumber?d.maxAsNumber:isNaN(d.minAsNumber)?d.valueAsNumber:d.minAsNumber:Math.round(1E7*c)/1E7};b.modules["form-number-date-ui"].getNextStep=g;var j=function(b,c,d){if(!b.disabled&&
!b.readOnly&&!a(d).hasClass("step-controls")&&(a.prop(b,"value",f[c].numberToString(g(b,a(d).hasClass("step-up")?1:-1,{type:c}))),a(b).unbind("blur.stepeventshim"),h(b,"input"),n.activeElement)){if(n.activeElement!==b)try{b.focus()}catch(e){}setTimeout(function(){if(n.activeElement!==b)try{b.focus()}catch(c){}a(b).one("blur.stepeventshim",function(){h(b,"change")})},0)}};if(d.stepArrows){var i={set:function(){var a=b.data(this,"step-controls");if(a)a[this.disabled||this.readonly?"addClass":"removeClass"]("disabled-step-control")}};
b.onNodeNamesPropertyModify("input","disabled",i);b.onNodeNamesPropertyModify("input","readonly",a.extend({},i))}var m={38:1,40:-1};b.addReady(function(i,l){d.stepArrows&&a("input",i).add(l.filter("input")).each(function(){var i=a.prop(this,"type");if(f[i]&&f[i].asNumber&&d.stepArrows&&!(!0!==d.stepArrows&&!d.stepArrows[i]||c(i)||a(l).hasClass("has-step-controls"))){var l=this,n=a('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(l).bind("selectstart dragstart",
function(){return!1}).bind("mousedown mousepress",function(a){j(l,i,a.target);return!1}).bind("mousepressstart mousepressend",function(b){a(b.target)["mousepressstart"==b.type?"addClass":"removeClass"]("mousepress-ui")}),q=function(b,c){if(!l.disabled&&!l.readOnly)return a.prop(l,"value",f[i].numberToString(g(l,c,{type:i}))),h(l,"input"),!1},o=a(l).addClass("has-step-controls").attr({readonly:l.readOnly,disabled:l.disabled,autocomplete:"off",role:"spinbutton"}).bind(a.browser.msie?"keydown":"keypress",
function(b){if(!l.disabled&&!l.readOnly&&m[b.keyCode])return a.prop(l,"value",f[i].numberToString(g(l,m[b.keyCode],{type:i}))),h(l,"input"),!1});a.fn.mwheelIntent?o.add(n).bind("mwheelIntent",q):o.bind("focus",function(){o.add(n).unbind(".mwhellwebshims").bind("mousewheel.mwhellwebshims",q)}).bind("blur",function(){a(l).add(n).unbind(".mwhellwebshims")});b.data(l,"step-controls",n);d.calculateWidth&&(p(o,n),n.css("marginTop",(o.outerHeight()-n.outerHeight())/2))}})})}})();b.addReady(function(c,d){a(n).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",
function(){(a.datepicker||a.fn.slider)&&m(c,d);a.datepicker&&a.fn.slider?a(n).unbind(".initinputui"):b.modules["input-widgets"].src||b.warn('jQuery UI Widget factory is already included, but not datepicker or slider. configure src of $.webshims.modules["input-widgets"].src')})})});
