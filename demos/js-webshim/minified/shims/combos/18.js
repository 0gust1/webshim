jQuery.webshims.register("form-datalist",function(a,b,m,o,s){b.propTypes.element=function(k){b.createPropDefault(k,"attr");if(!k.prop)k.prop={get:function(){var b=k.attr.get.call(this);b&&(b=o.getElementById(b))&&k.propNodeName&&!a.nodeName(b,k.propNodeName)&&(b=null);return b||null},writeable:!1}};(function(){var k=a.webshims.cfg.forms,l=Modernizr.input.list;if(!l||k.customDatalist){var t=0,q={submit:1,button:1,reset:1,hidden:1,range:1,date:1},r=a.browser.msie&&7>parseInt(a.browser.version,10),v=
{},p=function(a){if(!a)return[];if(v[a])return v[a];var b;try{b=JSON.parse(localStorage.getItem("storedDatalistOptions"+a))}catch(c){}v[a]=b||[];return b||[]},n={_create:function(e){if(!q[a.prop(e.input,"type")]){var b=e.datalist,c=a.data(e.input,"datalistWidget");if(b&&c&&c.datalist!==b)c.datalist=b,c.id=e.id,c.shadowList.prop("className","datalist-polyfill "+(c.datalist.className||"")+" "+c.datalist.id+"-shadowdom"),k.positionDatalist?c.shadowList.insertAfter(e.input):c.shadowList.appendTo("body"),
a(c.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",a.proxy(c,"_resetListCached")),c._resetListCached();else if(b){if(!(c&&c.datalist===b)){t++;var d=this;this.hideList=a.proxy(d,"hideList");this.timedHide=function(){clearTimeout(d.hideTimer);d.hideTimer=setTimeout(d.hideList,9)};this.datalist=b;this.id=e.id;this.hasViewableData=!0;this._autocomplete=a.attr(e.input,"autocomplete");a.data(e.input,"datalistWidget",this);this.shadowList=a('<div class="datalist-polyfill '+
(this.datalist.className||"")+" "+this.datalist.id+'-shadowdom" />');k.positionDatalist||a(e.input).hasClass("position-datalist")?this.shadowList.insertAfter(e.input):this.shadowList.appendTo("body");this.index=-1;this.input=e.input;this.arrayOptions=[];this.shadowList.delegate("li","mouseenter.datalistWidget mousedown.datalistWidget click.datalistWidget",function(c){var h=a("li:not(.hidden-item)",d.shadowList),i="mousedown"==c.type||"click"==c.type;d.markItem(h.index(c.currentTarget),i,h);"click"==
c.type&&(d.hideList(),k.customDatalist&&a(e.input).trigger("datalistselect"));return"mousedown"!=c.type}).bind("focusout",this.timedHide);e.input.setAttribute("autocomplete","off");a(e.input).attr({"aria-haspopup":"true"}).bind("input.datalistWidget",function(){if(!d.triggeredByDatalist)d.changedValue=!1,d.showHideOptions()}).bind("keydown.datalistWidget",function(c){var h=c.keyCode,i;if(40==h&&!d.showList())return d.markItem(d.index+1,!0),!1;if(d.isListVisible){if(38==h)return d.markItem(d.index-
1,!0),!1;if(!c.shiftKey&&(33==h||36==h))return d.markItem(0,!0),!1;if(!c.shiftKey&&(34==h||35==h))return c=a("li:not(.hidden-item)",d.shadowList),d.markItem(c.length-1,!0,c),!1;if(13==h||27==h)return 13==h&&(i=a("li.active-item:not(.hidden-item)",d.shadowList),d.changeValue(a("li.active-item:not(.hidden-item)",d.shadowList))),d.hideList(),k.customDatalist&&i&&i[0]&&a(e.input).trigger("datalistselect"),!1}}).bind("focus.datalistWidget",function(){a(this).hasClass("list-focus")&&d.showList()}).bind("mousedown.datalistWidget",
function(){a(this).is(":focus")&&d.showList()}).bind("blur.datalistWidget",this.timedHide);a(this.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",a.proxy(this,"_resetListCached"));this._resetListCached();e.input.form&&(e.input.name||e.input.id)&&a(e.input.form).bind("submit.datalistWidget"+e.input.id,function(){if(!a(e.input).hasClass("no-datalist-cache")&&"off"!=d._autocomplete){var c=a.prop(e.input,"value"),h=(e.input.name||e.input.id)+a.prop(e.input,"type");
if(!d.storedOptions)d.storedOptions=p(h);if(c&&-1==d.storedOptions.indexOf(c)&&(d.storedOptions.push(c),c=d.storedOptions,h)){c=c||[];try{localStorage.setItem("storedDatalistOptions"+h,JSON.stringify(c))}catch(i){}}}});a(m).bind("unload.datalist"+this.id+" beforeunload.datalist"+this.id,function(){d.destroy()})}}else c&&c.destroy()}},destroy:function(){var e=a.attr(this.input,"autocomplete");a(this.input).unbind(".datalistWidget").removeData("datalistWidget");this.shadowList.remove();a(o).unbind(".datalist"+
this.id);a(m).unbind(".datalist"+this.id);this.input.form&&this.input.id&&a(this.input.form).unbind("submit.datalistWidget"+this.input.id);this.input.removeAttribute("aria-haspopup");e===s?this.input.removeAttribute("autocomplete"):a(this.input).attr("autocomplete",e)},_resetListCached:function(a){var j=this,c;this.needsUpdate=!0;this.lastUpdatedValue=!1;this.lastUnfoundValue="";this.updateTimer||(m.QUnit||(c=a&&o.activeElement==j.input)?j.updateListOptions(c):b.ready("WINDOWLOAD",function(){j.updateTimer=
setTimeout(function(){j.updateListOptions();j=null;t=1},200+100*t)}))},updateListOptions:function(e){this.needsUpdate=!1;clearTimeout(this.updateTimer);this.updateTimer=!1;this.shadowList.css({fontSize:a.css(this.input,"fontSize"),fontFamily:a.css(this.input,"fontFamily")});this.searchStart=k.customDatalist&&a(this.input).hasClass("search-start");var b=[],c=[],d=[],f,h,i,g;for(h=a.prop(this.datalist,"options"),i=0,g=h.length;i<g;i++){f=h[i];if(f.disabled)return;f={value:a(f).val()||"",text:a.trim(a.attr(f,
"label")||f.textContent||f.innerText||a.text([f])||""),className:f.className||"",style:a.attr(f,"style")||""};f.text?f.text!=f.value&&(f.className+=" different-label-value"):f.text=f.value;c[i]=f.value;d[i]=f}if(!this.storedOptions)this.storedOptions=a(this.input).hasClass("no-datalist-cache")||"off"==this._autocomplete?[]:p((this.input.name||this.input.id)+a.prop(this.input,"type"));this.storedOptions.forEach(function(a){-1==c.indexOf(a)&&d.push({value:a,text:a,className:"stored-suggest",style:""})});
for(i=0,g=d.length;i<g;i++)h=d[i],b[i]='<li class="'+h.className+'" style="'+h.style+'" tabindex="-1" role="listitem"><span class="option-label">'+h.text+'</span> <span class="option-value">'+h.value+"</span></li>";this.arrayOptions=d;this.shadowList.html('<div class="datalist-outer-box"><div class="datalist-box"><ul role="list">'+b.join("\n")+"</ul></div></div>");a.fn.bgIframe&&r&&this.shadowList.bgIframe();(e||this.isListVisible)&&this.showHideOptions()},showHideOptions:function(b){var j=a.prop(this.input,
"value").toLowerCase();if(!(j===this.lastUpdatedValue||this.lastUnfoundValue&&0===j.indexOf(this.lastUnfoundValue))){this.lastUpdatedValue=j;var c=!1,d=this.searchStart,f=a("li",this.shadowList);j?this.arrayOptions.forEach(function(h,i){var g;if(!("lowerText"in h))h.lowerText=h.text!=h.value?h.value.toLowerCase()+h.text.toLowerCase():h.text.toLowerCase();g=h.lowerText.indexOf(j);(g=d?!g:-1!==g)?(a(f[i]).removeClass("hidden-item"),c=!0):a(f[i]).addClass("hidden-item")}):f.length&&(f.removeClass("hidden-item"),
c=!0);this.hasViewableData=c;!b&&c&&this.showList();if(!c)this.lastUnfoundValue=j,this.hideList()}},setPos:function(){this.shadowList.css({marginTop:0,marginLeft:0,marginRight:0,marginBottom:0});var e=k.positionDatalist?a(this.input).position():b.getRelOffset(this.shadowList,this.input);e.top+=a(this.input).outerHeight();e.width=a(this.input).outerWidth()-(parseInt(this.shadowList.css("borderLeftWidth"),10)||0)-(parseInt(this.shadowList.css("borderRightWidth"),10)||0);this.shadowList.css({marginTop:"",
marginLeft:"",marginRight:"",marginBottom:""}).css(e);return e},showList:function(){if(this.isListVisible)return!1;this.needsUpdate&&this.updateListOptions();this.showHideOptions(!0);if(!this.hasViewableData)return!1;this.isListVisible=!0;var b=this,j;b.setPos();b.shadowList.addClass("datalist-visible").find("li.active-item").removeClass("active-item");a(o).unbind(".datalist"+b.id).bind("mousedown.datalist"+b.id+" focusin.datalist"+b.id,function(c){c.target===b.input||b.shadowList[0]===c.target||
a.contains(b.shadowList[0],c.target)?(clearTimeout(b.hideTimer),setTimeout(function(){clearTimeout(b.hideTimer)},9)):b.timedHide()});a(m).unbind(".datalist"+b.id).bind("resize.datalist"+b.id+" orientationchange.datalist "+b.id+" emchange.datalist"+b.id,function(){clearTimeout(j);j=setTimeout(function(){b.setPos()},9)});clearTimeout(j);return!0},hideList:function(){if(!this.isListVisible)return!1;var e=this,j=function(){e.changedValue&&a(e.input).trigger("change");e.changedValue=!1};e.shadowList.removeClass("datalist-visible list-item-active");
e.index=-1;e.isListVisible=!1;if(e.changedValue){e.triggeredByDatalist=!0;b.triggerInlineForm&&b.triggerInlineForm(e.input,"input");if(a(e.input).is(":focus"))a(e.input).one("blur",j);else j();e.triggeredByDatalist=!1}a(o).unbind(".datalist"+e.id);a(m).unbind(".datalist"+e.id).bind("resize.datalist"+e.id+" orientationchange.datalist "+e.id+" emchange.datalist"+e.id,function(){e.shadowList.css({top:0,left:0});a(m).unbind(".datalist"+e.id)});return!0},scrollIntoView:function(b){var j=a("ul",this.shadowList),
c=a("div.datalist-box",this.shadowList),d=b.position();d.top-=(parseInt(j.css("paddingTop"),10)||0)+(parseInt(j.css("marginTop"),10)||0)+(parseInt(j.css("borderTopWidth"),10)||0);0>d.top?c.scrollTop(c.scrollTop()+d.top-2):(d.top+=b.outerHeight(),b=c.height(),d.top>b&&c.scrollTop(c.scrollTop()+(d.top-b)+2))},changeValue:function(b){if(b[0]){var b=a("span.option-value",b).text(),j=a.prop(this.input,"value");if(b!=j)a(this.input).prop("value",b).triggerHandler("updateInput"),this.changedValue=!0}},markItem:function(b,
j,c){c=c||a("li:not(.hidden-item)",this.shadowList);if(c.length)0>b?b=c.length-1:b>=c.length&&(b=0),c.removeClass("active-item"),this.shadowList.addClass("list-item-active"),c=c.filter(":eq("+b+")").addClass("active-item"),j&&(this.changeValue(c),this.scrollIntoView(c)),this.index=b}};(function(){l||b.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var e=a("select",this);e[0]?e=e[0].options:(e=a("option",this).get(),e.length&&b.warn("you should wrap your option-elements for a datalist in a select element to support IE and other old browsers."));
return e}}});var e={autocomplete:{attr:{get:function(){var b=a.data(this,"datalistWidget");return b?b._autocomplete:"autocomplete"in this?this.autocomplete:this.getAttribute("autocomplete")},set:function(b){var c=a.data(this,"datalistWidget");c?(c._autocomplete=b,"off"==b&&c.hideList()):"autocomplete"in this?this.autocomplete=b:this.setAttribute("autocomplete",b)}}}};l?((a("<datalist><select><option></option></select></datalist>").prop("options")||[]).length||b.defineNodeNameProperty("datalist","options",
{prop:{writeable:!1,get:function(){var b=this.options||[];if(!b.length){var c=a("select",this);if(c[0]&&c[0].options&&c[0].options.length)b=c[0].options}return b}}}),e.list={attr:{get:function(){var e=b.contentAttr(this,"list");null!=e?this.removeAttribute("list"):e=a.data(this,"datalistListAttr");return null==e?s:e},set:function(e){a.data(this,"datalistListAttr",e);b.objectCreate(n,s,{input:this,id:e,datalist:a.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"}):
e.list={attr:{get:function(){var a=b.contentAttr(this,"list");return null==a?s:a},set:function(e){b.contentAttr(this,"list",e);b.objectCreate(n,s,{input:this,id:e,datalist:a.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"};b.defineNodeNameProperties("input",e);if(a.event.customEvent)a.event.customEvent.updateDatalist=!0,a.event.customEvent.updateInput=!0,a.event.customEvent.datalistselect=!0;b.addReady(function(a,c){c.filter("datalist > select, datalist, datalist > option, datalist > select > option").closest("datalist").triggerHandler("updateDatalist")})})()}})()});
jQuery.webshims.register("form-extend",function(a,b,m,o,s,k){m=m.Modernizr;s=m.inputtypes;if(m.formvalidation&&!b.bugs.bustedValidity){var l=b.inputTypes,t={};b.addInputType=function(a,c){l[a]=c};b.addValidityRule=function(a,c){t[a]=c};b.addValidityRule("typeMismatch",function(a,c,b,d){if(""===c)return!1;d=d.typeMismatch;if(!("type"in b))b.type=(a[0].getAttribute("type")||"").toLowerCase();l[b.type]&&l[b.type].mismatch&&(d=l[b.type].mismatch(c,a));return d});var q=k.overrideMessages,r=!s.number||
!s.time||!s.range||q,v="customError,typeMismatch,rangeUnderflow,rangeOverflow,stepMismatch,tooLong,patternMismatch,valueMissing,valid".split(","),k=q?["value","checked"]:["value"],p=[],n=function(c,b){if(c){var g=(c.getAttribute&&c.getAttribute("type")||c.type||"").toLowerCase();if(q||l[g])q&&!b&&"radio"==g&&c.name?a(o.getElementsByName(c.name)).each(function(){a.prop(this,"validity")}):a.prop(c,"validity")}},e={};["input","textarea","select"].forEach(function(c){var i=b.defineNodeNameProperty(c,
"setCustomValidity",{prop:{value:function(g){var g=g+"",d="input"==c?a(this).getNativeElement()[0]:this;i.prop._supvalue.call(d,g);b.bugs.validationMessage&&b.data(d,"customvalidationMessage",g);r&&(b.data(d,"hasCustomError",!!g),n(d))}}});e[c]=i.prop._supvalue});if(r||q)k.push("min"),k.push("max"),k.push("step"),p.push("input");q&&(k.push("required"),k.push("pattern"),p.push("select"),p.push("textarea"));if(r){var j;p.forEach(function(c){var i=b.defineNodeNameProperty(c,"validity",{prop:{get:function(){if(!j){var g=
"input"==c?a(this).getNativeElement()[0]:this,d=i.prop._supget.call(g);if(!d)return d;var f={};v.forEach(function(a){f[a]=d[a]});if(!a.prop(g,"willValidate"))return f;j=!0;var k=a(g),n={type:(g.getAttribute&&g.getAttribute("type")||"").toLowerCase(),nodeName:(g.nodeName||"").toLowerCase()},u=k.val(),x=!!b.data(g,"hasCustomError"),w;j=!1;f.customError=x;if(f.valid&&f.customError)f.valid=!1;else if(!f.valid){var m=!0;a.each(f,function(a,c){if(c)return m=!1});if(m)f.valid=!0}a.each(t,function(a,i){f[a]=
i(k,u,n,f);if(f[a]&&(f.valid||!w)&&(q||l[n.type]&&l[n.type].mismatch))e[c].call(g,b.createValidationMessage(g,a)),f.valid=!1,w=!0});f.valid?(e[c].call(g,""),b.data(g,"hasCustomError",!1)):q&&!w&&!x&&a.each(f,function(a,i){if("valid"!==a&&i)return e[c].call(g,b.createValidationMessage(g,a)),!1});return f}},writeable:!1}})});k.forEach(function(a){b.onNodeNamesPropertyModify(p,a,function(){n(this)})});if(o.addEventListener){var c,d=function(b){if("form"in b.target){var i=b.target.form;clearTimeout(c);
n(b.target);i&&q&&a("input",i).each(function(){"password"==this.type&&n(this)})}};o.addEventListener("change",d,!0);q&&(o.addEventListener("blur",d,!0),o.addEventListener("keydown",function(a){13==a.keyCode&&d(a)},!0));o.addEventListener("input",function(a){clearTimeout(c);c=setTimeout(function(){n(a.target)},290)},!0)}var f=p.join(",");b.addReady(function(c,b){a(f,c).add(b.filter(f)).each(function(){a.prop(this,"validity")})});q&&b.ready("DOM form-message",function(){b.activeLang({register:"form-core",
callback:function(){a("input, select, textarea").getNativeElement().each(function(){if(!b.data(this,"hasCustomError")){var c=this,i=a.prop(c,"validity")||{valid:!0},g;i.valid||(g=(c.nodeName||"").toLowerCase(),a.each(i,function(a,i){if("valid"!==a&&i)return e[g].call(c,b.createValidationMessage(c,a)),!1}))}})}})})}b.defineNodeNameProperty("input","type",{prop:{get:function(){var a=(this.getAttribute("type")||"").toLowerCase();return b.inputTypes[a]?a:this.type}}})}});
jQuery.webshims.register("form-number-date-api",function(a,b){var m,o,s;if(!b.getStep)b.getStep=function(c,b){var f=a.attr(c,"step");if("any"===f)return f;b=b||r(c);if(!l[b]||!l[b].step)return f;f=m.asNumber(f);return(!isNaN(f)&&0<f?f:l[b].step)*l[b].stepScaleFactor};if(!b.addMinMaxNumberToCache)b.addMinMaxNumberToCache=function(a,b,f){a+"AsNumber"in f||(f[a+"AsNumber"]=l[f.type].asNumber(b.attr(a)),isNaN(f[a+"AsNumber"])&&a+"Default"in l[f.type]&&(f[a+"AsNumber"]=l[f.type][a+"Default"]))};var k=
parseInt("NaN",10),l=b.inputTypes,t=function(a){return"number"==typeof a||a&&a==1*a},q=function(c){return a('<input type="'+c+'" />').prop("type")===c},r=function(a){return(a.getAttribute("type")||"").toLowerCase()},v=b.addMinMaxNumberToCache,p=function(a,b){for(var a=""+a,b=b-a.length,f=0;f<b;f++)a="0"+a;return a},n=b.bugs.valueAsNumberSet||b.bugs.bustedValidity;b.addValidityRule("stepMismatch",function(a,d,f,h){if(""===d)return!1;if(!("type"in f))f.type=r(a[0]);if("date"==f.type)return!1;h=(h||
{}).stepMismatch;if(l[f.type]&&l[f.type].step){if(!("step"in f))f.step=b.getStep(a[0],f.type);if("any"==f.step)return!1;if(!("valueAsNumber"in f))f.valueAsNumber=l[f.type].asNumber(d);if(isNaN(f.valueAsNumber))return!1;v("min",a,f);a=f.minAsNumber;isNaN(a)&&(a=l[f.type].stepBase||0);h=Math.abs((f.valueAsNumber-a)%f.step);h=!(1.0E-7>=h||1.0E-7>=Math.abs(h-f.step))}return h});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){b.addValidityRule(a.name,
function(b,f,h,i){i=(i||{})[a.name]||!1;if(""===f)return i;if(!("type"in h))h.type=r(b[0]);if(l[h.type]&&l[h.type].asNumber){if(!("valueAsNumber"in h))h.valueAsNumber=l[h.type].asNumber(f);if(isNaN(h.valueAsNumber))return!1;v(a.attr,b,h);if(isNaN(h[a.attr+"AsNumber"]))return i;i=h[a.attr+"AsNumber"]*a.factor<h.valueAsNumber*a.factor-1.0E-7}return i})});b.reflectProperties(["input"],["max","min","step"]);var e=b.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var b=r(this),b=l[b]&&
l[b].asNumber?l[b].asNumber(a.prop(this,"value")):e.prop._supget&&e.prop._supget.apply(this,arguments);null==b&&(b=k);return b},set:function(c){var d=r(this);l[d]&&l[d].numberToString?isNaN(c)?a.prop(this,"value",""):(d=l[d].numberToString(c),!1!==d?a.prop(this,"value",d):b.warn("INVALID_STATE_ERR: DOM Exception 11")):e.prop._supset&&e.prop._supset.apply(this,arguments)}}}),j=b.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var b=r(this);return l[b]&&l[b].asDate&&!l[b].noAsDate?
l[b].asDate(a.prop(this,"value")):j.prop._supget&&j.prop._supget.call(this)||null},set:function(c){var d=r(this);if(l[d]&&l[d].dateToString&&!l[d].noAsDate){if(null===c)return a.prop(this,"value",""),"";d=l[d].dateToString(c);if(!1!==d)return a.prop(this,"value",d),d;b.warn("INVALID_STATE_ERR: DOM Exception 11")}else return j.prop._supset&&j.prop._supset.apply(this,arguments)||null}}});m={mismatch:function(a){return!t(a)},step:1,stepScaleFactor:1,asNumber:function(a){return t(a)?1*a:k},numberToString:function(a){return t(a)?
a:!1}};o={minDefault:0,maxDefault:100};s={mismatch:function(b){if(!b||!b.split||!/\d$/.test(b))return!0;var d=b.split(/\u002D/);if(3!==d.length)return!0;var f=!1;a.each(d,function(a,b){if(!(t(b)||b&&b=="0"+1*b))return f=!0,!1});if(f)return f;if(4!==d[0].length||2!=d[1].length||12<d[1]||2!=d[2].length||33<d[2])f=!0;return b!==this.dateToString(this.asDate(b,!0))},step:1,stepScaleFactor:864E5,asDate:function(a,b){return!b&&this.mismatch(a)?null:new Date(this.asNumber(a,!0))},asNumber:function(a,b){var f=
k;if(b||!this.mismatch(a))a=a.split(/\u002D/),f=Date.UTC(a[0],a[1]-1,a[2]);return f},numberToString:function(a){return t(a)?this.dateToString(new Date(1*a)):!1},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+p(a.getUTCMonth()+1,2)+"-"+p(a.getUTCDate(),2):!1}};if(n||!q("range")||!q("time"))o=a.extend({},m,o);(n||!q("number"))&&b.addInputType("number",m);(n||!q("range"))&&b.addInputType("range",o);(n||!q("date"))&&b.addInputType("date",s)});
jQuery.webshims.register("form-number-date-ui",function(a,b,m,o,s,k){var l=b.triggerInlineForm,t=Modernizr.inputtypes,q=function(){var a={"padding-box":"innerWidth","border-box":"outerWidth","content-box":"width"},b=Modernizr.prefixed&&Modernizr.prefixed("boxSizing");return function(g,c){var f,d,e;d="width";b&&(d=a[g.css(b)]||d);f=g[d]();d="width"==d;if(f){var u=parseInt(c.css("marginLeft"),10)||0,k=c.outerWidth();(e=parseInt(g.css("marginRight"),10)||0)&&g.css("marginRight",0);u<=-1*k?(c.css("marginRight",
Math.floor(Math.abs(k+u-0.1)+e)),g.css("paddingRight",(parseInt(g.css("paddingRight"),10)||0)+Math.abs(u)),d&&g.css("width",Math.floor(f+u))):(c.css("marginRight",e),g.css("width",Math.floor(f-u-k-0.2)))}}}(),r={},v=a([]),p,n=function(h,c){a("input",h).add(c.filter("input")).each(function(){var c=a.prop(this,"type");if(n[c]&&!b.data(this,"shadowData"))n[c](a(this))})},e=function(b,c){if(k.lazyDate){var g=a.data(b[0],"setDateLazyTimer");g&&clearTimeout(g);a.data(b[0],"setDateLazyTimer",setTimeout(function(){b.datepicker("setDate",
c);a.removeData(b[0],"setDateLazyTimer");b=null},0))}else b.datepicker("setDate",c)};if(k.lazyDate===s)try{k.lazyDate=a.browser.msie&&9>b.browserVersion||500>a(m).width()&&500>a(m).height()}catch(j){}var c={tabindex:1,tabIndex:1,title:1,"aria-required":1,"aria-invalid":1};if(!k.copyAttrs)k.copyAttrs={};b.extendUNDEFProp(k.copyAttrs,c);var d=function(a){return k.calculateWidth?{css:{marginRight:a.css("marginRight"),marginLeft:a.css("marginLeft")},outerWidth:a.outerWidth()}:{}};n.common=function(h,
i,g){Modernizr.formvalidation&&h.bind("firstinvalid",function(a){(b.fromSubmit||!p)&&h.unbind("invalid.replacedwidgetbubble").bind("invalid.replacedwidgetbubble",function(c){!a.isInvalidUIPrevented()&&!c.isDefaultPrevented()&&(b.validityAlert.showFor(a.target),a.preventDefault(),c.preventDefault());h.unbind("invalid.replacedwidgetbubble")})});var d,f,e=a("input, span.ui-slider-handle",i),l=h[0].attributes;for(d in k.copyAttrs)if((f=l[d])&&f.specified)c[d]&&e[0]?e.attr(d,f.nodeValue):i[0].setAttribute(d,
f.nodeValue);d=(d=h.attr("id"))?a('label[for="'+d+'"]',h[0].form):v;i.addClass(h[0].className);b.addShadowDom(h,i,{data:g||{},shadowFocusElement:a("input.input-datetime-local-date, span.ui-slider-handle",i)[0],shadowChilds:e});h.after(i);h[0].form&&a(h[0].form).bind("reset",function(a){a.originalEvent&&!a.isDefaultPrevented()&&setTimeout(function(){h.prop("value",h.prop("value"))},0)});d[0]&&(i.getShadowFocusElement().attr("aria-labelledby",b.getID(d)),d.bind("click",function(){h.getShadowFocusElement().focus();
return!1}))};Modernizr.formvalidation&&["input","form"].forEach(function(a){var c=b.defineNodeNameProperty(a,"checkValidity",{prop:{value:function(){p=!0;var a=c.prop._supvalue.apply(this,arguments);p=!1;return a}}})});if(!t.date||k.replaceUI){var f=function(c,d,g,f){var e,l,j=function(){u.dpDiv.unbind("mousedown.webshimsmousedownhandler");l=e=!1},u=d.bind("focusin",function(){j();u.dpDiv.unbind("mousedown.webshimsmousedownhandler").bind("mousedown.webshimsmousedownhandler",function(){e=!0})}).bind("focusout blur",
function(a){e&&(l=!0,a.stopImmediatePropagation())}).datepicker(a.extend({onClose:function(){l&&d.not(":focus")?(j(),d.trigger("focusout"),d.triggerHandler("blur")):j()}},r,k.datepicker,c.data("datepicker"))).bind("change",g).data("datepicker");u.dpDiv.addClass("input-date-datepicker-control");f&&b.triggerDomUpdate(f[0]);"disabled,min,max,value,step,data-placeholder".split(",").forEach(function(a){var b=c.prop(a);""!==b&&("disabled"!=a||!b)&&c.prop(a,b)});return u};n.date=function(c){if(a.fn.datepicker){var i=
a('<input class="input-date" type="text" />'),g=f(c,i,function(b){n.date.blockAttr=!0;var g;if(k.lazyDate){var d=a.data(i[0],"setDateLazyTimer");d&&(clearTimeout(d),a.removeData(i[0],"setDateLazyTimer"))}try{g=(g=a.datepicker.parseDate(i.datepicker("option","dateFormat"),i.prop("value")))?a.datepicker.formatDate("yy-mm-dd",g):i.prop("value")}catch(f){g=i.prop("value")}c.prop("value",g);n.date.blockAttr=!1;b.stopImmediatePropagation();l(c[0],"input");l(c[0],"change")});this.common(c,i,n.date.attrs);
a(c).bind("updateshadowdom",function(){if(g.trigger[0]){c.css({display:""});var a=d(c);a.css&&(i.css(a.css),a.outerWidth&&i.outerWidth(a.outerWidth),q(i,g.trigger))}c.css({display:"none"})}).triggerHandler("updateshadowdom");g.trigger[0]&&setTimeout(function(){b.ready("WINDOWLOAD",function(){a(c).triggerHandler("updateshadowdom")})},9)}};n.date.attrs={disabled:function(b,c,g){a.prop(c,"disabled",!!g)},min:function(b,c,g){try{g=a.datepicker.parseDate("yy-mm-dd",g)}catch(d){g=!1}g&&a(c).datepicker("option",
"minDate",g)},max:function(b,c,g){try{g=a.datepicker.parseDate("yy-mm-dd",g)}catch(d){g=!1}g&&a(c).datepicker("option","maxDate",g)},"data-placeholder":function(b,c,g){b=(g||"").split("-");3==b.length&&(g=a(c).datepicker("option","dateFormat").replace("yy",b[0]).replace("mm",b[1]).replace("dd",b[2]));a.prop(c,"placeholder",g)},value:function(b,c,g){if(!n.date.blockAttr){try{var d=a.datepicker.parseDate("yy-mm-dd",g)}catch(f){d=!1}d?e(a(c),d):a.prop(c,"value",g)}}}}if(!t.range||k.replaceUI)n.range=
function(b){if(a.fn.slider){var c=a('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>');this.common(b,c,n.range.attrs);b.bind("updateshadowdom",function(){b.css({display:""});var a=d(b);a.css&&(c.css(a.css),a.outerWidth&&c.outerWidth(a.outerWidth));b.css({display:"none"})}).triggerHandler("updateshadowdom");c.slider(a.extend(!0,{},k.slider,b.data("slider"))).bind("slide",function(a,c){if(a.originalEvent)n.range.blockAttr=!0,b.prop("value",c.value),n.range.blockAttr=
!1,l(b[0],"input"),l(b[0],"change")});["disabled","min","max","step","value"].forEach(function(c){var d=b.attr(c),f;"value"==c&&!d&&(f=b.getShadowElement())&&(d=(a(f).slider("option","max")-a(f).slider("option","min"))/2);null!=d&&b.attr(c,d)})}},n.range.attrs={disabled:function(b,c,d){d=!!d;a(c).slider("option","disabled",d);a("span",c).attr({"aria-disabled":d+"",tabindex:d?"-1":"0"})},min:function(b,c,d){d=d?1*d||0:0;a(c).slider("option","min",d);a("span",c).attr({"aria-valuemin":d})},max:function(b,
c,d){d=d||0===d?1*d||100:100;a(c).slider("option","max",d);a("span",c).attr({"aria-valuemax":d})},value:function(b,c,d){d=a(b).prop("valueAsNumber");isNaN(d)||(n.range.blockAttr||a(c).slider("option","value",d),a("span",c).attr({"aria-valuenow":d,"aria-valuetext":d}))},step:function(b,c,d){d=d&&a.trim(d)?1*d||1:1;a(c).slider("option","step",d)}};if(!b.bugs.valueAsNumberSet&&(k.replaceUI||!Modernizr.inputtypes.date||!Modernizr.inputtypes.range))m=function(){b.data(this,"hasShadow")&&a.prop(this,"value",
a.prop(this,"value"))},b.onNodeNamesPropertyModify("input","valueAsNumber",m),b.onNodeNamesPropertyModify("input","valueAsDate",m);a.each("disabled,min,max,value,step,data-placeholder".split(","),function(a,c){b.onNodeNamesPropertyModify("input",c,function(a){var d=b.data(this,"shadowData");if(d&&d.data&&d.data[c]&&d.nativeElement===this)d.data[c](this,d.shadowElement,a)})});if(!k.availabeLangs)k.availabeLangs="af ar ar-DZ az bg bs ca cs da de el en-AU en-GB en-NZ eo es et eu fa fi fo fr fr-CH gl he hr hu hy id is it ja ko kz lt lv ml ms nl no pl pt-BR rm ro ru sk sl sq sr sr-SR sv ta th tr uk vi zh-CN zh-HK zh-TW".split(" ");
m=function(){a.datepicker&&(b.activeLang({langObj:a.datepicker.regional,module:"form-number-date-ui",callback:function(b){b=a.extend({},r,b,k.datepicker);b.dateFormat&&k.datepicker.dateFormat!=b.dateFormat&&a("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option","dateFormat",b.dateFormat).getNativeElement().filter("[data-placeholder]").attr("data-placeholder",function(a,b){return b});a.datepicker.setDefaults(b)}}),a(o).unbind("jquery-uiReady.langchange input-widgetsReady.langchange"))};
a(o).bind("jquery-uiReady.langchange input-widgetsReady.langchange",m);m();(function(){var c=function(){var b={};return function(c){return c in b?b[c]:b[c]=a('<input type="'+c+'" />')[0].type===c}}();if(!c("number")){var d=b.cfg["forms-ext"],f=b.inputTypes,e=function(c,d,e){e=e||{};if(!("type"in e))e.type=a.prop(c,"type");if(!("step"in e))e.step=b.getStep(c,e.type);if(!("valueAsNumber"in e))e.valueAsNumber=f[e.type].asNumber(a.prop(c,"value"));var h="any"==e.step?f[e.type].step*f[e.type].stepScaleFactor:
e.step;b.addMinMaxNumberToCache("min",a(c),e);b.addMinMaxNumberToCache("max",a(c),e);if(isNaN(e.valueAsNumber))e.valueAsNumber=f[e.type].stepBase||0;if("any"!==e.step&&(c=Math.round(1E7*((e.valueAsNumber-(e.minAsnumber||0))%e.step))/1E7)&&Math.abs(c)!=e.step)e.valueAsNumber-=c;c=e.valueAsNumber+h*d;return c=!isNaN(e.minAsNumber)&&c<e.minAsNumber?e.valueAsNumber*d<e.minAsNumber?e.minAsNumber:isNaN(e.maxAsNumber)?e.valueAsNumber:e.maxAsNumber:!isNaN(e.maxAsNumber)&&c>e.maxAsNumber?e.valueAsNumber*d>
e.maxAsNumber?e.maxAsNumber:isNaN(e.minAsNumber)?e.valueAsNumber:e.minAsNumber:Math.round(1E7*c)/1E7};b.modules["form-number-date-ui"].getNextStep=e;var k=function(b,c,d){if(!b.disabled&&!b.readOnly&&!a(d).hasClass("step-controls")&&(a.prop(b,"value",f[c].numberToString(e(b,a(d).hasClass("step-up")?1:-1,{type:c}))),a(b).unbind("blur.stepeventshim"),l(b,"input"),o.activeElement)){if(o.activeElement!==b)try{b.focus()}catch(h){}setTimeout(function(){if(o.activeElement!==b)try{b.focus()}catch(c){}a(b).one("blur.stepeventshim",
function(){l(b,"change")})},0)}};if(d.stepArrows){var j={set:function(){var a=b.data(this,"step-controls");if(a)a[this.disabled||this.readonly?"addClass":"removeClass"]("disabled-step-control")}};b.onNodeNamesPropertyModify("input","disabled",j);b.onNodeNamesPropertyModify("input","readonly",a.extend({},j))}var n={38:1,40:-1};b.addReady(function(j,m){d.stepArrows&&a("input",j).add(m.filter("input")).each(function(){var j=a.prop(this,"type");if(f[j]&&f[j].asNumber&&d.stepArrows&&!(!0!==d.stepArrows&&
!d.stepArrows[j]||c(j)||a(m).hasClass("has-step-controls"))){var m=this,o=a('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(m).bind("selectstart dragstart",function(){return!1}).bind("mousedown mousepress",function(a){k(m,j,a.target);return!1}).bind("mousepressstart mousepressend",function(b){a(b.target)["mousepressstart"==b.type?"addClass":"removeClass"]("mousepress-ui")}),r=function(b,c){if(!m.disabled&&!m.readOnly)return a.prop(m,
"value",f[j].numberToString(e(m,c,{type:j}))),l(m,"input"),!1},p=a(m).addClass("has-step-controls").attr({readonly:m.readOnly,disabled:m.disabled,autocomplete:"off",role:"spinbutton"}).bind(a.browser.msie?"keydown":"keypress",function(b){if(!m.disabled&&!m.readOnly&&n[b.keyCode])return a.prop(m,"value",f[j].numberToString(e(m,n[b.keyCode],{type:j}))),l(m,"input"),!1});"number"==j&&p.bind("keypress",function(){return function(a){var b=String.fromCharCode(null==a.charCode?a.keyCode:a.charCode);return a.ctrlKey||
a.metaKey||" ">b||-1<"0123456789.".indexOf(b)}}());a.fn.mwheelIntent?p.add(o).bind("mwheelIntent",r):p.bind("focus",function(){p.add(o).unbind(".mwhellwebshims").bind("mousewheel.mwhellwebshims",r)}).bind("blur",function(){a(m).add(o).unbind(".mwhellwebshims")});b.data(m,"step-controls",o);d.calculateWidth&&(q(p,o),o.css("marginTop",(p.outerHeight()-o.outerHeight())/2))}})})}})();b.addReady(function(c,d){a(o).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",function(){if(a.datepicker||
a.fn.slider){if(a.datepicker&&!r.dateFormat)r.dateFormat=a.datepicker._defaults.dateFormat;n(c,d)}a.datepicker&&a.fn.slider?a(o).unbind(".initinputui"):b.modules["input-widgets"].src||b.warn('jQuery UI Widget factory is already included, but not datepicker or slider. configure src of $.webshims.modules["input-widgets"].src')})})});
