jQuery.webshims.register("form-extend",function(a,c,f,i,q,k){var g=f.Modernizr,f=g.inputtypes;if(g.formvalidation){var n=c.inputTypes,r={};c.addInputType=function(a,b){n[a]=b};c.addValidityRule=function(a,b){r[a]=b};c.addValidityRule("typeMismatch",function(a,b,d,c){if(""===b)return!1;c=c.typeMismatch;if(!("type"in d))d.type=(a[0].getAttribute("type")||"").toLowerCase();n[d.type]&&n[d.type].mismatch&&(c=n[d.type].mismatch(b,a));return c});var l=k.overrideMessages,s=!g.requiredSelect||!f.number||!f.time||
!f.range||l,d="customError,typeMismatch,rangeUnderflow,rangeOverflow,stepMismatch,tooLong,patternMismatch,valueMissing,valid".split(","),k=l?["value","checked"]:["value"],h=l?["textarea"]:[],e=function(b,d){if(b){var c=(b.getAttribute&&b.getAttribute("type")||b.type||"").toLowerCase();if(l||!(g.requiredSelect||"select-one"!=c)||n[c])l&&!d&&"radio"==c&&b.name?a(i.getElementsByName(b.name)).each(function(){a.prop(this,"validity")}):a.prop(b,"validity")}},j={};["input","textarea","select"].forEach(function(b){var d=
c.defineNodeNameProperty(b,"setCustomValidity",{prop:{value:function(p){var p=p+"",h="input"==b?a(this).getNativeElement()[0]:this;d.prop._supvalue.call(h,p);c.bugs.validationMessage&&c.data(h,"customvalidationMessage",p);s&&(c.data(h,"hasCustomError",!!p),e(h))}}});j[b]=d.prop._supvalue});if(s||!g.input.valueAsNumber||l)k.push("min"),k.push("max"),k.push("step"),h.push("input");if(!g.requiredSelect||l)k.push("required"),h.push("select");if(s){var b;h.forEach(function(p){var h=c.defineNodeNameProperty(p,
"validity",{prop:{get:function(){if(!b){var e="input"==p?a(this).getNativeElement()[0]:this,m=h.prop._supget.call(e);if(!m)return m;var o={};d.forEach(function(a){o[a]=m[a]});if(!a.prop(e,"willValidate"))return o;b=!0;var f=a(e),g={type:(e.getAttribute&&e.getAttribute("type")||"").toLowerCase(),nodeName:(e.nodeName||"").toLowerCase()},s=f.val(),i=!!c.data(e,"hasCustomError"),k;b=!1;o.customError=i;if(o.valid&&o.customError)o.valid=!1;else if(!o.valid){var n=!0;a.each(o,function(a,b){if(b)return n=
!1});if(n)o.valid=!0}a.each(r,function(a,b){o[a]=b(f,s,g,o);if(o[a]&&(o.valid||!k))j[p].call(e,c.createValidationMessage(e,a)),o.valid=!1,k=!0});o.valid?(j[p].call(e,""),c.data(e,"hasCustomError",!1)):l&&!k&&!i&&a.each(o,function(a,b){if("valid"!==a&&b)return j[p].call(e,c.createValidationMessage(e,a)),!1});return o}},writeable:!1}})});k.forEach(function(a){c.onNodeNamesPropertyModify(h,a,function(){e(this)})});if(i.addEventListener){var m;i.addEventListener("change",function(a){clearTimeout(m);e(a.target)},
!0);i.addEventListener("input",function(a){clearTimeout(m);m=setTimeout(function(){e(a.target)},290)},!0)}var p=h.join(",");c.addReady(function(b,d){a(p,b).add(d.filter(p)).each(function(){a.prop(this,"validity")})});l&&c.ready("DOM form-message",function(){c.activeLang({register:"form-core",callback:function(){a("input, select, textarea").getNativeElement().each(function(){if(!c.data(this,"hasCustomError")){var b=this,d=a.prop(b,"validity")||{valid:!0},e;d.valid||(e=(b.nodeName||"").toLowerCase(),
a.each(d,function(a,d){if("valid"!==a&&d)return j[e].call(b,c.createValidationMessage(b,a)),!1}))}})}})})}c.defineNodeNameProperty("input","type",{prop:{get:function(){var a=(this.getAttribute("type")||"").toLowerCase();return c.inputTypes[a]?a:this.type}}});g.input.list&&!(a("<datalist><select><option></option></select></datalist>").prop("options")||[]).length&&c.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var b=this.options||[];if(!b.length){var d=a("select",this);
if(d[0]&&d[0].options&&d[0].options.length)b=d[0].options}return b}}})}});jQuery.webshims.gcEval=function(a,c){with(c&&c.form||window)with(c||window)return function(a){eval(a)}.call(c||window,a)};
(function(a){var c=window.Modernizr,f=a.webshims;f.capturingEventPrevented=function(c){var f=c.isDefaultPrevented,g=c.preventDefault;c.preventDefault=function(){clearTimeout(a.data(c.target,c.type+"DefaultPrevented"));a.data(c.target,c.type+"DefaultPrevented",setTimeout(function(){a.removeData(c.target,c.type+"DefaultPrevented")},30));return g.apply(this,arguments)};c.isDefaultPrevented=function(){return!(!f.apply(this,arguments)&&!a.data(c.target,c.type+"DefaultPrevented"))};c._isPolyfilled=!0};
if(c.formvalidation){var i=a('<form action="#" style="width: 1px; height: 1px; overflow: hidden;"><select /><input type="date" required name="a" /><input type="submit" /></form>');c.bugfreeformvalidation=c.requiredSelect=!!("required"in a("select",i)[0]);if(window.opera||a.browser.webkit||window.testGoodWithFix){var q=a("input",i),k,g=function(g){var l=["form-extend","form-native-fix"];g&&(g.preventDefault(),g.stopImmediatePropagation());clearTimeout(k);setTimeout(function(){i&&(i.remove(),i=q=null)},
9);if(!c.bugfreeformvalidation||!c.requiredSelect)f.addPolyfill("form-native-fix",{f:"forms",d:["form-extend"]}),f.modules["form-extend"].test=a.noop;f.isReady("form-number-date-api")&&l.push("form-number-date-api");f.bugs.validationMessage&&l.push("form-message");f.reTest(l);if(a.browser.opera||window.testGoodWithFix)f.loader.loadList(["dom-extend"]),f.ready("dom-extend",function(){var c=function(a){a.preventDefault()};["form","input","textarea","select"].forEach(function(d){var h=f.defineNodeNameProperty(d,
"checkValidity",{prop:{value:function(){f.fromSubmit||a(this).bind("invalid.checkvalidity",c);f.fromCheckValidity=!0;var d=h.prop._supvalue.apply(this,arguments);f.fromSubmit||a(this).unbind("invalid.checkvalidity",c);f.fromCheckValidity=!1;return d}}})})}),c.input.list&&!(a("<datalist><select><option></option></select></datalist>").prop("options")||[]).length&&f.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var c=this.options||[];if(!c.length){var d=a("select",this);
if(d[0]&&d[0].options&&d[0].options.length)c=d[0].options}return c}}})};i.appendTo("head");if(window.opera||window.testGoodWithFix){f.bugs.validationMessage=!q.prop("validationMessage");if((c.inputtypes||{}).date){try{q.prop("valueAsNumber",0)}catch(n){}f.bugs.valueAsNumberSet="1970-01-01"!=q.prop("value")}q.prop("value","")}i.bind("submit",function(a){c.bugfreeformvalidation=!1;g(a)});k=setTimeout(function(){i&&i.triggerHandler("submit")},9);f.capturingEvents(["input"]);f.capturingEvents(["invalid"],
!0);a("input, select",i).bind("invalid",g).filter('[type="submit"]').bind("click",function(a){a.stopImmediatePropagation()}).trigger("click")}else f.capturingEvents(["input"]),f.capturingEvents(["invalid"],!0)}})(jQuery);
jQuery.webshims.register("form-core",function(a,c,f,i,q,k){var g={radio:1},n={checkbox:1,radio:1},r=a([]),l=function(b){var b=a(b),d=b[0].name;return g[b[0].type]&&d?a(b[0].form&&b[0].form[d]||i.getElementsByName(d)).not(b[0]):r},s=c.getContentValidationMessage=function(b,d){var e=b.getAttribute("x-moz-errormessage")||b.getAttribute("data-errormessage")||"";if(e&&-1!=e.indexOf("{")){try{e=jQuery.parseJSON(e)}catch(h){return e}"object"==typeof e&&(d=d||a.prop(b,"validity")||{valid:1},d.valid||a.each(d,
function(a,b){if(b&&"valid"!=a&&e[a])return e=e[a],!1}));c.data(b,"contentErrorMessage",e);if("object"==typeof e)e=e.defaultMessage}return e||""},d={number:1,range:1,date:1,time:1,"datetime-local":1,datetime:1,month:1,week:1};a.extend(a.expr.filters,{"valid-element":function(b){return!(!a.prop(b,"willValidate")||!(a.prop(b,"validity")||{valid:1}).valid)},"invalid-element":function(b){return!(!a.prop(b,"willValidate")||(a.prop(b,"validity")||{valid:1}).valid)},"required-element":function(b){return!(!a.prop(b,
"willValidate")||!a.prop(b,"required"))},"optional-element":function(b){return!!(a.prop(b,"willValidate")&&!1===a.prop(b,"required"))},"in-range":function(b){if(!d[a.prop(b,"type")]||!a.prop(b,"willValidate"))return!1;b=a.prop(b,"validity");return!(!b||b.rangeOverflow||b.rangeUnderflow)},"out-of-range":function(b){if(!d[a.prop(b,"type")]||!a.prop(b,"willValidate"))return!1;b=a.prop(b,"validity");return!(!b||!b.rangeOverflow&&!b.rangeUnderflow)}});["valid","invalid","required","optional"].forEach(function(b){a.expr.filters[b]=
a.expr.filters[b+"-element"]});var f=a.event.customEvent||{},h=a.prop,e={selectedIndex:1,value:1,checked:1,disabled:1,readonly:1};a.prop=function(b,d,c){var j=h.apply(this,arguments);if(b&&"form"in b&&e[d]&&c!==q&&a(b).hasClass("form-ui-invalid")&&(a.prop(b,"validity")||{valid:1}).valid)a(b).getShadowElement().removeClass("form-ui-invalid"),"checked"==d&&c&&l(b).removeClass("form-ui-invalid").removeAttr("aria-invalid");return j};var j=function(b,d){var c;a.each(b,function(b,e){if(e)return c="customError"==
b?a.prop(d,"validationMessage"):b,!1});return c};a(i).bind("focusout change refreshvalidityui",function(b){if(b.target&&"submit"!=b.target.type&&a.prop(b.target,"willValidate")){var d=a.data(b.target,"webshimsswitchvalidityclass");d&&clearTimeout(d);a.data(b.target,"webshimsswitchvalidityclass",setTimeout(function(){var d=a(b.target).getNativeElement()[0],c=a.prop(d,"validity"),e=a(d).getShadowElement(),h,g,m,f;c.valid?e.hasClass("form-ui-valid")||(h="form-ui-valid",g="form-ui-invalid",f="changedvaliditystate",
m="changedvalid",n[d.type]&&d.checked&&l(d).removeClass(g).addClass(h).removeAttr("aria-invalid"),a.removeData(d,"webshimsinvalidcause")):(c=j(c,d),a.data(d,"webshimsinvalidcause")!=c&&(a.data(d,"webshimsinvalidcause",c),f="changedvaliditystate"),e.hasClass("form-ui-invalid")||(h="form-ui-invalid",g="form-ui-valid",n[d.type]&&!d.checked&&l(d).removeClass(g).addClass(h),m="changedinvalid"));h&&(e.addClass(h).removeClass(g),setTimeout(function(){a(d).trigger(m)},0));f&&setTimeout(function(){a(d).trigger(f)},
0);a.removeData(b.target,"webshimsswitchvalidityclass")},9))}});f.changedvaliditystate=!0;f.changedvalid=!0;f.changedinvalid=!0;f.refreshvalidityui=!0;c.triggerInlineForm=function(b,d){b.jquery&&(b=b[0]);var e="on"+d,h=b[e]||b.getAttribute(e)||"",j,g,d=a.Event({type:d,target:b,currentTarget:b});h&&(c.warn("we will drop inline event handler support, with next release. use event binding: $.bind instead"),"string"==typeof h&&(g=c.gcEval(h,b),b[e]&&(j=!0,b[e]=!1)));!1===g&&(d.stopPropagation(),d.preventDefault());
a(b).trigger(d);j&&(b[e]=h);return g};f=function(){c.scrollRoot=a.browser.webkit||"BackCompat"==i.compatMode?a(i.body):a(i.documentElement)};f();c.ready("DOM",f);c.validityAlert=function(){var b=!a.browser.msie||7<parseInt(a.browser.version,10)?"span":"label",d={top:0,left:0},e={hideDelay:5E3,getBodyOffset:function(){d=h.offset()},showFor:function(b,d,c,g){e._create();var b=a(b),m=a(b).getShadowElement(),i=e.getOffsetFromBody(m);e.clear();g?this.hide():(this.getMessage(b,d),this.position(m,i),h.css({fontSize:b.css("fontSize"),
fontFamily:b.css("fontFamily")}),this.show(),this.hideDelay&&(j=setTimeout(f,this.hideDelay)));c||this.setFocus(m,i)},getOffsetFromBody:function(b){b=a(b).offset();a.swap(h[0],{visibility:"hidden",display:"inline-block",left:0,top:0},e.getBodyOffset);b.top-=d.top;b.left-=d.left;return b},setFocus:function(d,e){var j=a(d).getShadowFocusElement(),g=c.scrollRoot.scrollTop(),m=(e||j.offset()).top-30,r;c.getID&&"label"==b&&h.attr("for",c.getID(j));g>m&&(c.scrollRoot.animate({scrollTop:m-5},{queue:!1,duration:Math.max(Math.min(600,
1.5*(g-m)),80)}),r=!0);try{j[0].focus()}catch(p){}r&&(c.scrollRoot.scrollTop(g),setTimeout(function(){c.scrollRoot.scrollTop(g)},0));setTimeout(function(){a(i).bind("focusout.validityalert",f)},10)},getMessage:function(b,d){a("span.va-box",h).text(d||s(b[0])||b.prop("validationMessage"))},position:function(b,d){d=d?a.extend({},d):e.getOffsetFromBody(b);d.top+=b.outerHeight();h.css(d)},show:function(){"none"===h.css("display")&&h.css({opacity:0}).show();h.addClass("va-visible").fadeTo(400,1)},hide:function(){h.removeClass("va-visible").fadeOut()},
clear:function(){clearTimeout(g);clearTimeout(j);a(i).unbind("focusout.validityalert");h.stop().removeAttr("for")},_create:function(){if(!h)h=e.errorBubble=a("<"+b+' class="validity-alert-wrapper" role="alert"><span  class="validity-alert"><span class="va-arrow"><span class="va-arrow-box"></span></span><span class="va-box"></span></span></'+b+">").css({position:"absolute",display:"none"}),c.ready("DOM",function(){h.appendTo("body");a.fn.bgIframe&&a.browser.msie&&7>parseInt(a.browser.version,10)&&
h.bgIframe()})}},h,j=!1,g=!1,f=a.proxy(e,"hide");return e}();(function(){var b,d=[],e;a(i).bind("invalid",function(c){if(!c.wrongWebkitInvalid){var h=a(c.target),j=h.getShadowElement();j.hasClass("form-ui-invalid")||(j.addClass("form-ui-invalid").removeClass("form-ui-valid"),setTimeout(function(){a(c.target).trigger("changedinvalid").trigger("changedvaliditystate")},0));if(!b)b=a.Event("firstinvalid"),b.isInvalidUIPrevented=c.isDefaultPrevented,j=a.Event("firstinvalidsystem"),a(i).triggerHandler(j,
{element:c.target,form:c.target.form,isInvalidUIPrevented:c.isDefaultPrevented}),h.trigger(b);b&&b.isDefaultPrevented()&&c.preventDefault();d.push(c.target);c.extraData="fix";clearTimeout(e);e=setTimeout(function(){var e={type:"lastinvalid",cancelable:!1,invalidlist:a(d)};b=!1;d=[];a(c.target).trigger(e,e)},9);j=h=null}})})();k.replaceValidationUI&&c.ready("DOM",function(){a(i).bind("firstinvalid",function(b){b.isInvalidUIPrevented()||(b.preventDefault(),a.webshims.validityAlert.showFor(b.target,
a(b.target).prop("customValidationMessage")))})})});
jQuery.webshims.register("form-message",function(a,c,f,i,q,k){var g=c.validityMessages,f=k.overrideMessages||k.customMessages?["customValidationMessage"]:[];g.en=g.en||g["en-US"]||{typeMismatch:{email:"Please enter an email address.",url:"Please enter a URL.",number:"Please enter a number.",date:"Please enter a date.",time:"Please enter a time.",range:"Invalid input.","datetime-local":"Please enter a datetime."},rangeUnderflow:{defaultMessage:"Value must be greater than or equal to {%min}."},rangeOverflow:{defaultMessage:"Value must be less than or equal to {%max}."},
stepMismatch:"Invalid input.",tooLong:"Please enter at most {%maxlength} character(s). You entered {%valueLen}.",patternMismatch:"Invalid input. {%title}",valueMissing:{defaultMessage:"Please fill out this field.",checkbox:"Please check this box if you want to proceed."}};["select","radio"].forEach(function(a){g.en.valueMissing[a]="Please select an option."});["date","time","datetime-local"].forEach(function(a){g.en.rangeUnderflow[a]="Value must be at or after {%min}."});["date","time","datetime-local"].forEach(function(a){g.en.rangeOverflow[a]=
"Value must be at or before {%max}."});g["en-US"]=g["en-US"]||g.en;g[""]=g[""]||g["en-US"];g.de=g.de||{typeMismatch:{email:"{%value} ist keine zul\u00e4ssige E-Mail-Adresse",url:"{%value} ist keine zul\u00e4ssige Webadresse",number:"{%value} ist keine Nummer!",date:"{%value} ist kein Datum",time:"{%value} ist keine Uhrzeit",range:"{%value} ist keine Nummer!","datetime-local":"{%value} ist kein Datum-Uhrzeit Format."},rangeUnderflow:{defaultMessage:"{%value} ist zu niedrig. {%min} ist der unterste Wert, den Sie benutzen k\u00f6nnen."},
rangeOverflow:{defaultMessage:"{%value} ist zu hoch. {%max} ist der oberste Wert, den Sie benutzen k\u00f6nnen."},stepMismatch:"Der Wert {%value} ist in diesem Feld nicht zul\u00e4ssig. Hier sind nur bestimmte Werte zul\u00e4ssig. {%title}",tooLong:"Der eingegebene Text ist zu lang! Sie haben {%valueLen} Zeichen eingegeben, dabei sind {%maxlength} das Maximum.",patternMismatch:"{%value} hat f\u00fcr dieses Eingabefeld ein falsches Format! {%title}",valueMissing:{defaultMessage:"Bitte geben Sie einen Wert ein",
checkbox:"Bitte aktivieren Sie das K\u00e4stchen"}};["select","radio"].forEach(function(a){g.de.valueMissing[a]="Bitte w\u00e4hlen Sie eine Option aus"});["date","time","datetime-local"].forEach(function(a){g.de.rangeUnderflow[a]="{%value} ist zu fr\u00fch. {%min} ist die fr\u00fcheste Zeit, die Sie benutzen k\u00f6nnen."});["date","time","datetime-local"].forEach(function(a){g.de.rangeOverflow[a]="{%value} ist zu sp\u00e4t. {%max} ist die sp\u00e4teste Zeit, die Sie benutzen k\u00f6nnen."});var n=
g[""];c.createValidationMessage=function(c,g){var f=n[g];f&&"string"!==typeof f&&(f=f[a.prop(c,"type")]||f[(c.nodeName||"").toLowerCase()]||f.defaultMessage);f&&"value,min,max,title,maxlength,label".split(",").forEach(function(d){if(-1!==f.indexOf("{%"+d)){var h=("label"==d?a.trim(a('label[for="'+c.id+'"]',c.form).text()).replace(/\*$|:$/,""):a.attr(c,d))||"";f=f.replace("{%"+d+"}",h);"value"==d&&(f=f.replace("{%valueLen}",h.length))}});return f||""};(c.bugs.validationMessage||!Modernizr.formvalidation)&&
f.push("validationMessage");c.activeLang({langObj:g,module:"form-core",callback:function(a){n=a}});Modernizr.input.list&&!(a("<datalist><select><option></option></select></datalist>").prop("options")||[]).length&&c.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var c=this.options||[];if(!c.length){var g=a("select",this);if(g[0]&&g[0].options&&g[0].options.length)c=g[0].options}return c}}});f.forEach(function(g){c.defineNodeNamesProperty(["fieldset","output","button"],
g,{prop:{value:"",writeable:!1}});["input","select","textarea"].forEach(function(f){var i=c.defineNodeNameProperty(f,g,{prop:{get:function(){var d=this,h="";if(!a.prop(d,"willValidate"))return h;var e=a.prop(d,"validity")||{valid:1};if(e.valid||(h=c.getContentValidationMessage(d,e)))return h;if(e.customError&&d.nodeName&&(h=Modernizr.formvalidation&&i.prop._supget?i.prop._supget.call(d):c.data(d,"customvalidationMessage")))return h;a.each(e,function(a,b){if("valid"!=a&&b&&(h=c.createValidationMessage(d,
a)))return!1});return h||""},writeable:!1}})})})});
jQuery.webshims.register("form-datalist",function(a,c,f,i,q){c.propTypes.element=function(f){c.createPropDefault(f,"attr");if(!f.prop)f.prop={get:function(){var c=f.attr.get.call(this);c&&(c=a("#"+c)[0])&&f.propNodeName&&!a.nodeName(c,f.propNodeName)&&(c=null);return c||null},writeable:!1}};(function(){if(!Modernizr.input.list){var k=0,g={submit:1,button:1,reset:1,hidden:1,range:1,date:1},n=a.browser.msie&&7>parseInt(a.browser.version,10),r={},l=function(a){if(!a)return[];if(r[a])return r[a];var h;
c.ready("json-storage",function(){try{h=JSON.parse(localStorage.getItem("storedDatalistOptions"+a))}catch(c){}r[a]=h||[]});return h||[]},s={_create:function(d){if(!g[a.prop(d.input,"type")]){var c=d.datalist,e=a.data(d.input,"datalistWidget");if(c&&e&&e.datalist!==c)e.datalist=c,e.id=d.id,e._resetListCached();else if(c){if(!(e&&e.datalist===c)){k++;var j=this;this.timedHide=function(){clearTimeout(j.hideTimer);j.hideTimer=setTimeout(a.proxy(j,"hideList"),9)};this.datalist=c;this.id=d.id;this.hasViewableData=
!0;this._autocomplete=a.attr(d.input,"autocomplete");a.data(d.input,"datalistWidget",this);this.shadowList=a('<div class="datalist-polyfill" />').appendTo("body");this.index=-1;this.input=d.input;this.arrayOptions=[];this.shadowList.delegate("li","mouseenter.datalistWidget mousedown.datalistWidget click.datalistWidget",function(b){var d=a("li:not(.hidden-item)",j.shadowList),c="mousedown"==b.type||"click"==b.type;j.markItem(d.index(b.currentTarget),c,d);"click"==b.type&&j.hideList();return"mousedown"!=
b.type}).bind("focusout",this.timedHide);d.input.setAttribute("autocomplete","off");a(d.input).attr({"aria-haspopup":"true"}).bind("input.datalistWidget",a.proxy(this,"showHideOptions")).bind("keydown.datalistWidget",function(b){var d=b.keyCode;if(40==d&&!j.showList())return j.markItem(j.index+1,!0),!1;if(j.isListVisible){if(38==d)return j.markItem(j.index-1,!0),!1;if(!b.shiftKey&&(33==d||36==d))return j.markItem(0,!0),!1;if(!b.shiftKey&&(34==d||35==d))return b=a("li:not(.hidden-item)",j.shadowList),
j.markItem(b.length-1,!0,b),!1;if(13==d||27==d)return 13==d&&(b=a("li.active-item:not(.hidden-item)",j.shadowList),b[0]&&(a.prop(j.input,"value",a("span.option-value",b).text()),a(j.input).triggerHandler("updateInput"))),j.hideList(),!1}}).bind("focus.datalistWidget",function(){a(this).hasClass("list-focus")&&j.showList()}).bind("blur.datalistWidget",this.timedHide);a(this.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",a.proxy(this,"_resetListCached"));this._resetListCached();
d.input.form&&d.input.id&&a(d.input.form).bind("submit.datalistWidget"+d.input.id,function(){var b=a.prop(d.input,"value"),c=(d.input.name||d.input.id)+a.prop(d.input,"type");if(!j.storedOptions)j.storedOptions=l(c);if(b&&-1==j.storedOptions.indexOf(b)&&(j.storedOptions.push(b),b=j.storedOptions,c)){b=b||[];try{localStorage.setItem("storedDatalistOptions"+c,JSON.stringify(b))}catch(e){}}});a(f).bind("unload",function(){j.destroy()})}}else e&&e.destroy()}},destroy:function(){var d=a.attr(this.input,
"autocomplete");a(this.input).unbind(".datalistWidget").removeData("datalistWidget");this.shadowList.remove();a(i).unbind(".datalist"+this.id);this.input.form&&this.input.id&&a(this.input.form).unbind("submit.datalistWidget"+this.input.id);this.input.removeAttribute("aria-haspopup");d===q?this.input.removeAttribute("autocomplete"):a(this.input).attr("autocomplete",d)},_resetListCached:function(a){var h=this,e;this.needsUpdate=!0;this.lastUpdatedValue=!1;this.lastUnfoundValue="";this.updateTimer||
(f.QUnit||(e=a&&i.activeElement==h.input)?h.updateListOptions(e):c.ready("WINDOWLOAD",function(){h.updateTimer=setTimeout(function(){h.updateListOptions();h=null;k=1},200+100*k)}))},updateListOptions:function(d){this.needsUpdate=!1;clearTimeout(this.updateTimer);this.updateTimer=!1;this.shadowList.css({fontSize:a.curCSS(this.input,"fontSize"),fontFamily:a.curCSS(this.input,"fontFamily")});var c=[],e=[],f=[],b,g,i,k;for(g=a.prop(this.datalist,"options"),i=0,k=g.length;i<k;i++){b=g[i];if(b.disabled)return;
b={value:a(b).val()||"",text:a.trim(a.attr(b,"label")||b.textContent||b.innerText||a.text([b])||""),className:b.className||"",style:a.attr(b,"style")||""};b.text?b.text!=b.value&&(b.className+=" different-label-value"):b.text=b.value;e[i]=b.value;f[i]=b}if(!this.storedOptions)this.storedOptions=l((this.input.name||this.input.id)+a.prop(this.input,"type"));this.storedOptions.forEach(function(a){-1==e.indexOf(a)&&f.push({value:a,text:a,className:"stored-suggest",style:""})});for(i=0,k=f.length;i<k;i++)g=
f[i],c[i]='<li class="'+g.className+'" style="'+g.style+'" tabindex="-1" role="listitem"><span class="option-label">'+g.text+'</span><span class="option-value"> '+g.value+"</span></li>";this.arrayOptions=f;this.shadowList.html('<ul role="list" class="'+(this.datalist.className||"")+" "+this.datalist.id+'-shadowdom">'+c.join("\n")+"</ul>");a.fn.bgIframe&&n&&this.shadowList.bgIframe();(d||this.isListVisible)&&this.showHideOptions()},showHideOptions:function(){var d=a.prop(this.input,"value").toLowerCase();
if(!(d===this.lastUpdatedValue||this.lastUnfoundValue&&0===d.indexOf(this.lastUnfoundValue))){this.lastUpdatedValue=d;var c=!1,e=a("li",this.shadowList);d?this.arrayOptions.forEach(function(f,b){if(!("lowerText"in f))f.lowerText=f.text!=f.value?f.text.toLowerCase()+f.value.toLowerCase():f.text.toLowerCase();-1!==f.lowerText.indexOf(d)?(a(e[b]).removeClass("hidden-item"),c=!0):a(e[b]).addClass("hidden-item")}):e.length&&(e.removeClass("hidden-item"),c=!0);(this.hasViewableData=c)?this.showList():(this.lastUnfoundValue=
d,this.hideList())}},showList:function(){if(this.isListVisible)return!1;this.needsUpdate&&this.updateListOptions();this.showHideOptions();if(!this.hasViewableData)return!1;var d=this,c=a(this.input).offset();c.top+=a(this.input).outerHeight();c.width=a(this.input).outerWidth()-(parseInt(this.shadowList.css("borderLeftWidth"),10)||0)-(parseInt(this.shadowList.css("borderRightWidth"),10)||0);n&&(this.shadowList.css("height","auto"),250<this.shadowList.height()&&this.shadowList.css("height",220));this.shadowList.css(c).addClass("datalist-visible");
this.isListVisible=!0;a(i).bind("mousedown.datalist"+this.id+" focusin.datalist"+this.id,function(c){c.target===d.input||d.shadowList[0]===c.target||a.contains(d.shadowList[0],c.target)?(clearTimeout(d.hideTimer),setTimeout(function(){clearTimeout(d.hideTimer)},0)):d.timedHide()});return!0},hideList:function(){if(!this.isListVisible)return!1;this.shadowList.removeClass("datalist-visible list-item-active").scrollTop(0).find("li.active-item").removeClass("active-item");this.index=-1;this.isListVisible=
!1;a(this.input).removeAttr("aria-activedescendant");a(i).unbind(".datalist"+this.id);return!0},scrollIntoView:function(d){var c=a("> ul",this.shadowList),e=d.position();e.top-=(parseInt(c.css("paddingTop"),10)||0)+(parseInt(c.css("marginTop"),10)||0)+(parseInt(c.css("borderTopWidth"),10)||0);0>e.top?this.shadowList.scrollTop(this.shadowList.scrollTop()+e.top-2):(e.top+=d.outerHeight(),d=this.shadowList.height(),e.top>d&&this.shadowList.scrollTop(this.shadowList.scrollTop()+(e.top-d)+2))},markItem:function(d,
c,e){e=e||a("li:not(.hidden-item)",this.shadowList);if(e.length)0>d?d=e.length-1:d>=e.length&&(d=0),e.removeClass("active-item"),this.shadowList.addClass("list-item-active"),e=e.filter(":eq("+d+")").addClass("active-item"),c&&(a.prop(this.input,"value",a("span.option-value",e).text()),a.attr(this.input,"aria-activedescendant",a.webshims.getID(e)),a(this.input).triggerHandler("updateInput"),this.scrollIntoView(e)),this.index=d}};(function(){c.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,
get:function(){var d=a("select",this);return d[0]?d[0].options:[]}}});c.defineNodeNameProperties("input",{selectedOption:{prop:{writeable:!1,get:function(){var d=a.prop(this,"list"),c=null,e;if(!d)return c;e=a.attr(this,"value");if(!e)return c;d=a.prop(d,"options");if(!d.length)return c;a.each(d,function(d,b){if(e==a.prop(b,"value"))return c=b,!1});return c}}},autocomplete:{attr:{get:function(){var d=a.data(this,"datalistWidget");return d?d._autocomplete:"autocomplete"in this?this.autocomplete:this.getAttribute("autocomplete")},
set:function(d){var c=a.data(this,"datalistWidget");c?(c._autocomplete=d,"off"==d&&c.hideList()):"autocomplete"in this?this.autocomplete=d:this.setAttribute("autocomplete",d)}}},list:{attr:{get:function(){var a=c.contentAttr(this,"list");return null==a?q:a},set:function(d){c.contentAttr(this,"list",d);c.objectCreate(s,q,{input:this,id:d,datalist:a.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"}});if(a.event.customEvent)a.event.customEvent.updateDatalist=!0,
a.event.customEvent.updateInput=!0;c.addReady(function(d,c){c.filter("select, option").each(function(){var c=this.parentNode,d=a.nodeName(c,"datalist");if(c&&!d)c=c.parentNode,d=a.nodeName(c,"datalist");c&&d&&a(c).triggerHandler("updateDatalist")})})})()}})()});
