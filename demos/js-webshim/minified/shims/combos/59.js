jQuery.webshims.register("form-extend",function(b,c,e,i,m,l){e=e.Modernizr;m=e.inputtypes;if(e.formvalidation&&!c.bugs.bustedValidity){var f=c.inputTypes,p={};c.addInputType=function(b,a){f[b]=a};c.addValidityRule=function(b,a){p[b]=a};c.addValidityRule("typeMismatch",function(b,a,d,s){if(""===a)return!1;s=s.typeMismatch;if(!("type"in d))d.type=(b[0].getAttribute("type")||"").toLowerCase();f[d.type]&&f[d.type].mismatch&&(s=f[d.type].mismatch(a,b));return s});var k=l.overrideMessages,r=!m.number||
!m.time||!m.range||k,t="customError,typeMismatch,rangeUnderflow,rangeOverflow,stepMismatch,tooLong,patternMismatch,valueMissing,valid".split(","),l=k?["value","checked"]:["value"],n=[],q=function(j,a){if(j){var d=(j.getAttribute&&j.getAttribute("type")||j.type||"").toLowerCase();if(k||f[d])k&&!a&&"radio"==d&&j.name?b(i.getElementsByName(j.name)).each(function(){b.prop(this,"validity")}):b.prop(j,"validity")}},a={};["input","textarea","select"].forEach(function(j){var o=c.defineNodeNameProperty(j,
"setCustomValidity",{prop:{value:function(a){var a=a+"",d="input"==j?b(this).getNativeElement()[0]:this;o.prop._supvalue.call(d,a);c.bugs.validationMessage&&c.data(d,"customvalidationMessage",a);r&&(c.data(d,"hasCustomError",!!a),q(d))}}});a[j]=o.prop._supvalue});if(r||k)l.push("min"),l.push("max"),l.push("step"),n.push("input");k&&(l.push("required"),l.push("pattern"),n.push("select"),n.push("textarea"));if(r){var d;n.forEach(function(j){var o=c.defineNodeNameProperty(j,"validity",{prop:{get:function(){if(!d){var h=
"input"==j?b(this).getNativeElement()[0]:this,s=o.prop._supget.call(h);if(!s)return s;var g={};t.forEach(function(b){g[b]=s[b]});if(!b.prop(h,"willValidate"))return g;d=!0;var n=b(h),e={type:(h.getAttribute&&h.getAttribute("type")||"").toLowerCase(),nodeName:(h.nodeName||"").toLowerCase()},i=n.val(),l=!!c.data(h,"hasCustomError"),q;d=!1;g.customError=l;if(g.valid&&g.customError)g.valid=!1;else if(!g.valid){var m=!0;b.each(g,function(b,j){if(j)return m=!1});if(m)g.valid=!0}b.each(p,function(b,d){g[b]=
d(n,i,e,g);if(g[b]&&(g.valid||!q)&&(k||f[e.type]&&f[e.type].mismatch))a[j].call(h,c.createValidationMessage(h,b)),g.valid=!1,q=!0});g.valid?(a[j].call(h,""),c.data(h,"hasCustomError",!1)):k&&!q&&!l&&b.each(g,function(b,d){if("valid"!==b&&d)return a[j].call(h,c.createValidationMessage(h,b)),!1});return g}},writeable:!1}})});l.forEach(function(b){c.onNodeNamesPropertyModify(n,b,function(){q(this)})});if(i.addEventListener){var h;i.addEventListener("change",function(j){var a=j.target.form;clearTimeout(h);
q(j.target);a&&k&&b("input",a).each(function(){"password"==this.type&&q(this)})},!0);i.addEventListener("input",function(b){clearTimeout(h);h=setTimeout(function(){q(b.target)},290)},!0)}var g=n.join(",");c.addReady(function(j,a){b(g,j).add(a.filter(g)).each(function(){b.prop(this,"validity")})});k&&c.ready("DOM form-message",function(){c.activeLang({register:"form-core",callback:function(){b("input, select, textarea").getNativeElement().each(function(){if(!c.data(this,"hasCustomError")){var j=this,
d=b.prop(j,"validity")||{valid:!0},h;d.valid||(h=(j.nodeName||"").toLowerCase(),b.each(d,function(b,d){if("valid"!==b&&d)return a[h].call(j,c.createValidationMessage(j,b)),!1}))}})}})})}c.defineNodeNameProperty("input","type",{prop:{get:function(){var b=(this.getAttribute("type")||"").toLowerCase();return c.inputTypes[b]?b:this.type}}});e.input.list&&!(b("<datalist><select><option></option></select></datalist>").prop("options")||[]).length&&c.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,
get:function(){var j=this.options||[];if(!j.length){var a=b("select",this);if(a[0]&&a[0].options&&a[0].options.length)j=a[0].options}return j}}})}});
(function(b){var c=window.Modernizr,e=b.webshims,i=e.bugs,m=b('<form action="#" style="width: 1px; height: 1px; overflow: hidden;"><select name="b" required /><input type="date" required name="a" /><input type="submit" /></form>'),l=function(){if(m[0].querySelector)try{i.findRequired=!m[0].querySelector("select:required")}catch(b){i.findRequired=!1}};i.findRequired=!1;i.validationMessage=!1;i.valueAsNumberSet=!1;e.capturingEventPrevented=function(c){if(!c._isPolyfilled){var f=c.isDefaultPrevented,
a=c.preventDefault;c.preventDefault=function(){clearTimeout(b.data(c.target,c.type+"DefaultPrevented"));b.data(c.target,c.type+"DefaultPrevented",setTimeout(function(){b.removeData(c.target,c.type+"DefaultPrevented")},30));return a.apply(this,arguments)};c.isDefaultPrevented=function(){return!(!f.apply(this,arguments)&&!b.data(c.target,c.type+"DefaultPrevented"))};c._isPolyfilled=!0}};if(!c.formvalidation||i.bustedValidity)l();else if(e.capturingEvents(["input"]),e.capturingEvents(["invalid"],!0),
c.bugfreeformvalidation=!0,window.opera||b.browser.webkit||window.testGoodWithFix){var f=b("input",m).eq(0),p,k=function(b){e.loader.loadList(["dom-extend"]);e.ready("dom-extend",b)},r=function(n){var i=["form-extend","form-message","form-native-fix"];n&&(n.preventDefault(),n.stopImmediatePropagation());clearTimeout(p);setTimeout(function(){m&&(m.remove(),m=f=null)},9);if(!c.bugfreeformvalidation)e.addPolyfill("form-native-fix",{f:"forms",d:["form-extend"]}),e.modules["form-extend"].test=b.noop;e.isReady("form-number-date-api")&&
i.push("form-number-date-api");e.reTest(i);if(f)try{f.prop({disabled:!0,value:""}).prop("disabled",!1).is(":valid")&&k(function(){e.onNodeNamesPropertyModify(["input","textarea"],["disabled","readonly"],{set:function(a){!a&&this&&b.prop(this,"value",b.prop(this,"value"))}});e.onNodeNamesPropertyModify(["select"],["disabled","readonly"],{set:function(a){if(!a&&this)a=b(this).val(),(b("option:last-child",this)[0]||{}).selected=!0,b(this).val(a)}})})}catch(a){}(b.browser.opera||window.testGoodWithFix)&&
k(function(){var a=function(b){b.preventDefault()};["form","input","textarea","select"].forEach(function(h){var c=e.defineNodeNameProperty(h,"checkValidity",{prop:{value:function(){e.fromSubmit||b(this).bind("invalid.checkvalidity",a);e.fromCheckValidity=!0;var j=c.prop._supvalue.apply(this,arguments);e.fromSubmit||b(this).unbind("invalid.checkvalidity",a);e.fromCheckValidity=!1;return j}}})});c.input.list&&!(b("<datalist><select><option></option></select></datalist>").prop("options")||[]).length&&
e.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var a=this.options||[];if(!a.length){var d=b("select",this);if(d[0]&&d[0].options&&d[0].options.length)a=d[0].options}return a}}})})};m.appendTo("head");if(window.opera||window.testGoodWithFix){l();i.validationMessage=!f.prop("validationMessage");if((c.inputtypes||{}).date){try{f.prop("valueAsNumber",0)}catch(t){}i.valueAsNumberSet="1970-01-01"!=f.prop("value")}f.prop("value","")}m.bind("submit",function(b){c.bugfreeformvalidation=
!1;r(b)});p=setTimeout(function(){m&&m.triggerHandler("submit")},9);b("input, select",m).bind("invalid",r).filter('[type="submit"]').bind("click",function(b){b.stopImmediatePropagation()}).trigger("click")}})(jQuery);
jQuery.webshims.register("form-core",function(b,c,e,i,m,l){var f={radio:1},p={checkbox:1,radio:1},k=b([]),r=c.bugs,t=function(j){var j=b(j),a,d;a=k;if(f[j[0].type])d=j.prop("form"),a=(a=j[0].name)?d?b(d[a]):b(i.getElementsByName(a)).filter(function(){return!b.prop(this,"form")}):j,a=a.filter('[type="radio"]');return a},n=c.getContentValidationMessage=function(j,a,d){var c=b(j).data("errormessage")||j.getAttribute("x-moz-errormessage")||"";d&&c[d]&&(c=c[d]);"object"==typeof c&&(a=a||b.prop(j,"validity")||
{valid:1},a.valid||b.each(a,function(b,a){if(a&&"valid"!=b&&c[b])return c=c[b],!1}));if("object"==typeof c)c=c.defaultMessage;return c||""},q={number:1,range:1,date:1};b.extend(b.expr.filters,{"valid-element":function(a){return!(!b.prop(a,"willValidate")||!(b.prop(a,"validity")||{valid:1}).valid)},"invalid-element":function(a){return!(!b.prop(a,"willValidate")||(b.prop(a,"validity")||{valid:1}).valid)},"required-element":function(a){return!(!b.prop(a,"willValidate")||!b.prop(a,"required"))},"optional-element":function(a){return!!(b.prop(a,
"willValidate")&&!1===b.prop(a,"required"))},"in-range":function(a){if(!q[b.prop(a,"type")]||!b.prop(a,"willValidate"))return!1;a=b.prop(a,"validity");return!(!a||a.rangeOverflow||a.rangeUnderflow)},"out-of-range":function(a){if(!q[b.prop(a,"type")]||!b.prop(a,"willValidate"))return!1;a=b.prop(a,"validity");return!(!a||!a.rangeOverflow&&!a.rangeUnderflow)}});["valid","invalid","required","optional"].forEach(function(a){b.expr.filters[a]=b.expr.filters[a+"-element"]});var a=b.event.customEvent||{};
(r.bustedValidity||r.findRequired)&&function(){var a=b.find,d=b.find.matchesSelector,c=/(\:valid|\:invalid|\:optional|\:required|\:in-range|\:out-of-range)(?=[\s\[\~\.\+\>\:\#*]|$)/ig,h=function(b){return b+"-element"};b.find=function(){var b=Array.prototype.slice,d=function(d){var o=arguments,o=b.call(o,1,o.length);o.unshift(d.replace(c,h));return a.apply(this,o)},o;for(o in a)a.hasOwnProperty(o)&&(d[o]=a[o]);return d}();if(!Modernizr.prefixed||Modernizr.prefixed("matchesSelector",i.documentElement))b.find.matchesSelector=
function(b,a){a=a.replace(c,h);return d.call(this,b,a)}}();var d=b.prop,h={selectedIndex:1,value:1,checked:1,disabled:1,readonly:1};b.prop=function(a,c,g){var s=d.apply(this,arguments);if(a&&"form"in a&&h[c]&&g!==m&&b(a).hasClass("form-ui-invalid")&&(b.prop(a,"validity")||{valid:1}).valid)b(a).getShadowElement().removeClass("form-ui-invalid"),"checked"==c&&g&&t(a).not(a).removeClass("form-ui-invalid").removeAttr("aria-invalid");return s};var g=function(a,d){var c;b.each(a,function(a,j){if(j)return c=
"customError"==a?b.prop(d,"validationMessage"):a,!1});return c};b(i).bind(l.validityUIEvents||"focusout change refreshvalidityui",function(a){if(a.target&&"submit"!=a.target.type&&b.prop(a.target,"willValidate")){var d=b.data(a.target,"webshimsswitchvalidityclass"),c=function(){var d=b(a.target).getNativeElement().trigger("refreshCustomValidityRules")[0],c=b.prop(d,"validity"),h=b(d).getShadowElement(),o,f,k,e;c.valid?h.hasClass("form-ui-valid")||(o="form-ui-valid",f="form-ui-invalid",e="changedvaliditystate",
k="changedvalid",p[d.type]&&d.checked&&t(d).not(d).removeClass(f).addClass(o).removeAttr("aria-invalid"),b.removeData(d,"webshimsinvalidcause")):(c=g(c,d),b.data(d,"webshimsinvalidcause")!=c&&(b.data(d,"webshimsinvalidcause",c),e="changedvaliditystate"),h.hasClass("form-ui-invalid")||(o="form-ui-invalid",f="form-ui-valid",p[d.type]&&!d.checked&&t(d).not(d).removeClass(f).addClass(o),k="changedinvalid"));o&&(h.addClass(o).removeClass(f),setTimeout(function(){b(d).trigger(k)},0));e&&setTimeout(function(){b(d).trigger(e)},
0);b.removeData(a.target,"webshimsswitchvalidityclass")};d&&clearTimeout(d);"refreshvalidityui"==a.type?c():b.data(a.target,"webshimsswitchvalidityclass",setTimeout(c,9))}});a.changedvaliditystate=!0;a.refreshCustomValidityRules=!0;a.changedvalid=!0;a.changedinvalid=!0;a.refreshvalidityui=!0;c.triggerInlineForm=function(a,d){b(a).trigger(d)};c.modules["form-core"].getGroupElements=t;r=function(){c.scrollRoot=b.browser.webkit||"BackCompat"==i.compatMode?b(i.body):b(i.documentElement)};r();c.ready("DOM",
r);c.getRelOffset=function(a,d){var a=b(a),c=b(d).offset(),h;b.swap(b(a)[0],{visibility:"hidden",display:"inline-block",left:0,top:0},function(){h=a.offset()});c.top-=h.top;c.left-=h.left;return c};c.validityAlert=function(){var a=!b.browser.msie||7<parseInt(b.browser.version,10)?"span":"label",d,h=!1,g=!1,f,k={hideDelay:5E3,showFor:function(a,c,j,i){k._create();var a=b(a),n=b(a).getShadowElement(),l=k.getOffsetFromBody(n);k.clear();i?this.hide():(this.getMessage(a,c),this.position(n,l),d.css({fontSize:a.css("fontSize"),
fontFamily:a.css("fontFamily")}),this.show(),this.hideDelay&&(h=setTimeout(f,this.hideDelay)),b(e).bind("resize.validityalert orientationchange.validityalert emchange.validityalert",function(){clearTimeout(g);g=setTimeout(function(){k.position(n)},9)}));j||this.setFocus(n,l)},getOffsetFromBody:function(b){return c.getRelOffset(d,b)},setFocus:function(h,g){var k=b(h).getShadowFocusElement(),e=c.scrollRoot.scrollTop(),n=(g||k.offset()).top-30,l;c.getID&&"label"==a&&d.attr("for",c.getID(k));e>n&&(c.scrollRoot.animate({scrollTop:n-
5},{queue:!1,duration:Math.max(Math.min(600,1.5*(e-n)),80)}),l=!0);try{k[0].focus()}catch(s){}l&&(c.scrollRoot.scrollTop(e),setTimeout(function(){c.scrollRoot.scrollTop(e)},0));setTimeout(function(){b(i).bind("focusout.validityalert",f)},10)},getMessage:function(a,c){b("span.va-box",d).text(c||n(a[0])||a.prop("validationMessage"))},position:function(a,c){c=c?b.extend({},c):k.getOffsetFromBody(a);c.top+=a.outerHeight();d.css(c)},show:function(){"none"===d.css("display")&&d.css({opacity:0}).show();
d.addClass("va-visible").fadeTo(400,1)},hide:function(){d.removeClass("va-visible").fadeOut()},clear:function(){clearTimeout(!1);clearTimeout(h);b(i).unbind(".validityalert");b(e).unbind(".validityalert");d.stop().removeAttr("for")},_create:function(){if(!d)d=k.errorBubble=b("<"+a+' class="validity-alert-wrapper" role="alert"><span  class="validity-alert"><span class="va-arrow"><span class="va-arrow-box"></span></span><span class="va-box"></span></span></'+a+">").css({position:"absolute",display:"none"}),
c.ready("DOM",function(){d.appendTo("body");b.fn.bgIframe&&b.browser.msie&&7>parseInt(b.browser.version,10)&&d.bgIframe()})}};f=b.proxy(k,"hide");return k}();(function(){var a,d=[],c;b(i).bind("invalid",function(h){if(!h.wrongWebkitInvalid){var g=b(h.target),f=g.getShadowElement();f.hasClass("form-ui-invalid")||(f.addClass("form-ui-invalid").removeClass("form-ui-valid"),setTimeout(function(){b(h.target).trigger("changedinvalid").trigger("changedvaliditystate")},0));if(!a)a=b.Event("firstinvalid"),
a.isInvalidUIPrevented=h.isDefaultPrevented,f=b.Event("firstinvalidsystem"),b(i).triggerHandler(f,{element:h.target,form:h.target.form,isInvalidUIPrevented:h.isDefaultPrevented}),g.trigger(a);a&&a.isDefaultPrevented()&&h.preventDefault();d.push(h.target);h.extraData="fix";clearTimeout(c);c=setTimeout(function(){var c={type:"lastinvalid",cancelable:!1,invalidlist:b(d)};a=!1;d=[];b(h.target).trigger(c,c)},9);f=g=null}})})();b.fn.getErrorMessage=function(){var a="",d=this[0];d&&(a=n(d)||b.prop(d,"customValidationMessage")||
b.prop(d,"validationMessage"));return a};l.replaceValidationUI&&c.ready("DOM",function(){b(i).bind("firstinvalid",function(a){a.isInvalidUIPrevented()||(a.preventDefault(),b.webshims.validityAlert.showFor(a.target,b(a.target).prop("customValidationMessage")))})})});
jQuery.webshims.register("form-message",function(b,c,e,i,m,l){var f=c.validityMessages,e=l.overrideMessages||l.customMessages?["customValidationMessage"]:[];f.en=f.en||f["en-US"]||{typeMismatch:{email:"Please enter an email address.",url:"Please enter a URL.",number:"Please enter a number.",date:"Please enter a date.",time:"Please enter a time.",range:"Invalid input.","datetime-local":"Please enter a datetime."},rangeUnderflow:{defaultMessage:"Value must be greater than or equal to {%min}."},rangeOverflow:{defaultMessage:"Value must be less than or equal to {%max}."},
stepMismatch:"Invalid input.",tooLong:"Please enter at most {%maxlength} character(s). You entered {%valueLen}.",patternMismatch:"Invalid input. {%title}",valueMissing:{defaultMessage:"Please fill out this field.",checkbox:"Please check this box if you want to proceed."}};["select","radio"].forEach(function(b){f.en.valueMissing[b]="Please select an option."});["date","time","datetime-local"].forEach(function(b){f.en.rangeUnderflow[b]="Value must be at or after {%min}."});["date","time","datetime-local"].forEach(function(b){f.en.rangeOverflow[b]=
"Value must be at or before {%max}."});f["en-US"]=f["en-US"]||f.en;f[""]=f[""]||f["en-US"];f.de=f.de||{typeMismatch:{email:"{%value} ist keine zul\u00e4ssige E-Mail-Adresse",url:"{%value} ist keine zul\u00e4ssige Webadresse",number:"{%value} ist keine Nummer!",date:"{%value} ist kein Datum",time:"{%value} ist keine Uhrzeit",range:"{%value} ist keine Nummer!","datetime-local":"{%value} ist kein Datum-Uhrzeit Format."},rangeUnderflow:{defaultMessage:"{%value} ist zu niedrig. {%min} ist der unterste Wert, den Sie benutzen k\u00f6nnen."},
rangeOverflow:{defaultMessage:"{%value} ist zu hoch. {%max} ist der oberste Wert, den Sie benutzen k\u00f6nnen."},stepMismatch:"Der Wert {%value} ist in diesem Feld nicht zul\u00e4ssig. Hier sind nur bestimmte Werte zul\u00e4ssig. {%title}",tooLong:"Der eingegebene Text ist zu lang! Sie haben {%valueLen} Zeichen eingegeben, dabei sind {%maxlength} das Maximum.",patternMismatch:"{%value} hat f\u00fcr dieses Eingabefeld ein falsches Format! {%title}",valueMissing:{defaultMessage:"Bitte geben Sie einen Wert ein",
checkbox:"Bitte aktivieren Sie das K\u00e4stchen"}};["select","radio"].forEach(function(b){f.de.valueMissing[b]="Bitte w\u00e4hlen Sie eine Option aus"});["date","time","datetime-local"].forEach(function(b){f.de.rangeUnderflow[b]="{%value} ist zu fr\u00fch. {%min} ist die fr\u00fcheste Zeit, die Sie benutzen k\u00f6nnen."});["date","time","datetime-local"].forEach(function(b){f.de.rangeOverflow[b]="{%value} ist zu sp\u00e4t. {%max} ist die sp\u00e4teste Zeit, die Sie benutzen k\u00f6nnen."});var p=
f[""];c.createValidationMessage=function(c,f){var e=p[f];e&&"string"!==typeof e&&(e=e[b.prop(c,"type")]||e[(c.nodeName||"").toLowerCase()]||e.defaultMessage);e&&"value,min,max,title,maxlength,label".split(",").forEach(function(f){if(-1!==e.indexOf("{%"+f)){var i=("label"==f?b.trim(b('label[for="'+c.id+'"]',c.form).text()).replace(/\*$|:$/,""):b.attr(c,f))||"";e=e.replace("{%"+f+"}",i);"value"==f&&(e=e.replace("{%valueLen}",i.length))}});return e||""};(c.bugs.validationMessage||!Modernizr.formvalidation||
c.bugs.bustedValidity)&&e.push("validationMessage");c.activeLang({langObj:f,module:"form-core",callback:function(b){p=b}});Modernizr.input.list&&!(b("<datalist><select><option></option></select></datalist>").prop("options")||[]).length&&c.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var c=this.options||[];if(!c.length){var f=b("select",this);if(f[0]&&f[0].options&&f[0].options.length)c=f[0].options}return c}}});e.forEach(function(f){c.defineNodeNamesProperty(["fieldset",
"output","button"],f,{prop:{value:"",writeable:!1}});["input","select","textarea"].forEach(function(e){var i=c.defineNodeNameProperty(e,f,{prop:{get:function(){var f=this,e="";if(!b.prop(f,"willValidate"))return e;var a=b.prop(f,"validity")||{valid:1};if(a.valid||(e=c.getContentValidationMessage(f,a)))return e;if(a.customError&&f.nodeName&&(e=Modernizr.formvalidation&&!c.bugs.bustedValidity&&i.prop._supget?i.prop._supget.call(f):c.data(f,"customvalidationMessage")))return e;b.each(a,function(b,a){if("valid"!=
b&&a&&(e=c.createValidationMessage(f,b)))return!1});return e||""},writeable:!1}})})})});
jQuery.webshims.register("form-datalist",function(b,c,e,i,m){c.propTypes.element=function(e){c.createPropDefault(e,"attr");if(!e.prop)e.prop={get:function(){var c=e.attr.get.call(this);c&&(c=b("#"+c)[0])&&e.propNodeName&&!b.nodeName(c,e.propNodeName)&&(c=null);return c||null},writeable:!1}};(function(){var l=b.webshims.cfg.forms,f=Modernizr.input.list;if(!f||l.customDatalist){var p=0,k={submit:1,button:1,reset:1,hidden:1,range:1,date:1},r=b.browser.msie&&7>parseInt(b.browser.version,10),t={},n=function(b){if(!b)return[];
if(t[b])return t[b];var d;try{d=JSON.parse(localStorage.getItem("storedDatalistOptions"+b))}catch(c){}t[b]=d||[];return d||[]},q={_create:function(a){if(!k[b.prop(a.input,"type")]){var d=a.datalist,c=b.data(a.input,"datalistWidget");if(d&&c&&c.datalist!==d)c.datalist=d,c.id=a.id,c.shadowList.prop("className","datalist-polyfill "+(c.datalist.className||"")+" "+c.datalist.id+"-shadowdom"),l.positionDatalist?c.shadowList.insertAfter(a.input):c.shadowList.appendTo("body"),b(c.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",
b.proxy(c,"_resetListCached")),c._resetListCached();else if(d){if(!(c&&c.datalist===d)){p++;var g=this;this.hideList=b.proxy(g,"hideList");this.timedHide=function(){clearTimeout(g.hideTimer);g.hideTimer=setTimeout(g.hideList,9)};this.datalist=d;this.id=a.id;this.hasViewableData=!0;this._autocomplete=b.attr(a.input,"autocomplete");b.data(a.input,"datalistWidget",this);this.shadowList=b('<div class="datalist-polyfill '+(this.datalist.className||"")+" "+this.datalist.id+'-shadowdom" />');l.positionDatalist?
this.shadowList.insertAfter(a.input):this.shadowList.appendTo("body");this.index=-1;this.input=a.input;this.arrayOptions=[];this.shadowList.delegate("li","mouseenter.datalistWidget mousedown.datalistWidget click.datalistWidget",function(c){var d=b("li:not(.hidden-item)",g.shadowList),h="mousedown"==c.type||"click"==c.type;g.markItem(d.index(c.currentTarget),h,d);"click"==c.type&&(g.hideList(),b(a.input).trigger("datalistselect"));return"mousedown"!=c.type}).bind("focusout",this.timedHide);a.input.setAttribute("autocomplete",
"off");b(a.input).attr({"aria-haspopup":"true"}).bind("input.datalistWidget",function(){if(!g.triggeredByDatalist)g.changedValue=!1,g.showHideOptions()}).bind("keydown.datalistWidget",function(c){var d=c.keyCode,h;if(40==d&&!g.showList())return g.markItem(g.index+1,!0),!1;if(g.isListVisible){if(38==d)return g.markItem(g.index-1,!0),!1;if(!c.shiftKey&&(33==d||36==d))return g.markItem(0,!0),!1;if(!c.shiftKey&&(34==d||35==d))return c=b("li:not(.hidden-item)",g.shadowList),g.markItem(c.length-1,!0,c),
!1;if(13==d||27==d)return 13==d&&(h=b("li.active-item:not(.hidden-item)",g.shadowList),g.changeValue(b("li.active-item:not(.hidden-item)",g.shadowList))),g.hideList(),h&&h[0]&&b(a.input).trigger("datalistselect"),!1}}).bind("focus.datalistWidget",function(){b(this).hasClass("list-focus")&&g.showList()}).bind("mousedown.datalistWidget",function(){(this==i.activeElement||b(this).is(":focus"))&&g.showList()}).bind("blur.datalistWidget",this.timedHide);b(this.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",
b.proxy(this,"_resetListCached"));this._resetListCached();a.input.form&&(a.input.name||a.input.id)&&b(a.input.form).bind("submit.datalistWidget"+a.input.id,function(){if(!b(a.input).hasClass("no-datalist-cache")){var c=b.prop(a.input,"value"),d=(a.input.name||a.input.id)+b.prop(a.input,"type");if(!g.storedOptions)g.storedOptions=n(d);if(c&&-1==g.storedOptions.indexOf(c)&&(g.storedOptions.push(c),c=g.storedOptions,d)){c=c||[];try{localStorage.setItem("storedDatalistOptions"+d,JSON.stringify(c))}catch(h){}}}});
b(e).bind("unload.datalist"+this.id+" beforeunload.datalist"+this.id,function(){g.destroy()})}}else c&&c.destroy()}},destroy:function(){var a=b.attr(this.input,"autocomplete");b(this.input).unbind(".datalistWidget").removeData("datalistWidget");this.shadowList.remove();b(i).unbind(".datalist"+this.id);b(e).unbind(".datalist"+this.id);this.input.form&&this.input.id&&b(this.input.form).unbind("submit.datalistWidget"+this.input.id);this.input.removeAttribute("aria-haspopup");a===m?this.input.removeAttribute("autocomplete"):
b(this.input).attr("autocomplete",a)},_resetListCached:function(b){var d=this,h;this.needsUpdate=!0;this.lastUpdatedValue=!1;this.lastUnfoundValue="";this.updateTimer||(e.QUnit||(h=b&&i.activeElement==d.input)?d.updateListOptions(h):c.ready("WINDOWLOAD",function(){d.updateTimer=setTimeout(function(){d.updateListOptions();d=null;p=1},200+100*p)}))},updateListOptions:function(a){this.needsUpdate=!1;clearTimeout(this.updateTimer);this.updateTimer=!1;this.shadowList.css({fontSize:b.curCSS(this.input,
"fontSize"),fontFamily:b.curCSS(this.input,"fontFamily")});this.searchStart=b(this.input).hasClass("search-start");var c=[],h=[],g=[],e,f,i,k;for(f=b.prop(this.datalist,"options"),i=0,k=f.length;i<k;i++){e=f[i];if(e.disabled)return;e={value:b(e).val()||"",text:b.trim(b.attr(e,"label")||e.textContent||e.innerText||b.text([e])||""),className:e.className||"",style:b.attr(e,"style")||""};e.text?e.text!=e.value&&(e.className+=" different-label-value"):e.text=e.value;h[i]=e.value;g[i]=e}if(!this.storedOptions)this.storedOptions=
b(this.input).hasClass("no-datalist-cache")?[]:n((this.input.name||this.input.id)+b.prop(this.input,"type"));this.storedOptions.forEach(function(b){-1==h.indexOf(b)&&g.push({value:b,text:b,className:"stored-suggest",style:""})});for(i=0,k=g.length;i<k;i++)f=g[i],c[i]='<li class="'+f.className+'" style="'+f.style+'" tabindex="-1" role="listitem"><span class="option-label">'+f.text+'</span> <span class="option-value">'+f.value+"</span></li>";this.arrayOptions=g;this.shadowList.html('<div class="datalist-outer-box"><div class="datalist-box"><ul role="list">'+
c.join("\n")+"</ul></div></div>");b.fn.bgIframe&&r&&this.shadowList.bgIframe();(a||this.isListVisible)&&this.showHideOptions()},showHideOptions:function(a){var c=b.prop(this.input,"value").toLowerCase();if(!(c===this.lastUpdatedValue||this.lastUnfoundValue&&0===c.indexOf(this.lastUnfoundValue))){this.lastUpdatedValue=c;var e=!1,f=this.searchStart,i=b("li",this.shadowList);c?this.arrayOptions.forEach(function(a,k){var l;if(!("lowerText"in a))a.lowerText=a.text!=a.value?a.text.toLowerCase()+a.value.toLowerCase():
a.text.toLowerCase();l=a.lowerText.indexOf(c);(l=f?!l:-1!==l)?(b(i[k]).removeClass("hidden-item"),e=!0):b(i[k]).addClass("hidden-item")}):i.length&&(i.removeClass("hidden-item"),e=!0);this.hasViewableData=e;!a&&e&&this.showList();if(!e)this.lastUnfoundValue=c,this.hideList()}},setPos:function(){this.shadowList.css({marginTop:0,marginLeft:0,marginRight:0,marginBottom:0});var a=l.positionDatalist?b(this.input).position():c.getRelOffset(this.shadowList,this.input);a.top+=b(this.input).outerHeight();
a.width=b(this.input).outerWidth()-(parseInt(this.shadowList.css("borderLeftWidth"),10)||0)-(parseInt(this.shadowList.css("borderRightWidth"),10)||0);this.shadowList.css({marginTop:"",marginLeft:"",marginRight:"",marginBottom:""}).css(a);return a},showList:function(){if(this.isListVisible)return!1;this.needsUpdate&&this.updateListOptions();this.showHideOptions(!0);if(!this.hasViewableData)return!1;this.isListVisible=!0;var a=this,c;a.setPos();a.shadowList.addClass("datalist-visible").find("li.active-item").removeClass("active-item");
b(i).unbind(".datalist"+a.id).bind("mousedown.datalist"+a.id+" focusin.datalist"+a.id,function(c){c.target===a.input||a.shadowList[0]===c.target||b.contains(a.shadowList[0],c.target)?(clearTimeout(a.hideTimer),setTimeout(function(){clearTimeout(a.hideTimer)},9)):a.timedHide()});b(e).unbind(".datalist"+a.id).bind("resize.datalist"+a.id+" orientationchange.datalist "+a.id+" emchange.datalist"+a.id,function(){clearTimeout(c);c=setTimeout(function(){a.setPos()},9)});clearTimeout(c);return!0},hideList:function(){if(!this.isListVisible)return!1;
var a=this,d=function(){a.changedValue&&b(a.input).trigger("change");a.changedValue=!1};a.shadowList.removeClass("datalist-visible list-item-active");a.index=-1;a.isListVisible=!1;if(a.changedValue){a.triggeredByDatalist=!0;c.triggerInlineForm&&c.triggerInlineForm(a.input,"input");if(a.input==i.activeElement||b(a.input).is(":focus"))b(a.input).one("blur",d);else d();a.triggeredByDatalist=!1}b(i).unbind(".datalist"+a.id);b(e).unbind(".datalist"+a.id).bind("resize.datalist"+a.id+" orientationchange.datalist "+
a.id+" emchange.datalist"+a.id,function(){a.shadowList.css({top:0,left:0});b(e).unbind(".datalist"+a.id)});return!0},scrollIntoView:function(a){var c=b("ul",this.shadowList),e=b("div.datalist-box",this.shadowList),f=a.position();f.top-=(parseInt(c.css("paddingTop"),10)||0)+(parseInt(c.css("marginTop"),10)||0)+(parseInt(c.css("borderTopWidth"),10)||0);0>f.top?e.scrollTop(e.scrollTop()+f.top-2):(f.top+=a.outerHeight(),a=e.height(),f.top>a&&e.scrollTop(e.scrollTop()+(f.top-a)+2))},changeValue:function(a){if(a[0]){var a=
b("span.option-value",a).text(),c=b.prop(this.input,"value");if(a!=c)b(this.input).prop("value",a).triggerHandler("updateInput"),this.changedValue=!0}},markItem:function(a,c,e){e=e||b("li:not(.hidden-item)",this.shadowList);if(e.length)0>a?a=e.length-1:a>=e.length&&(a=0),e.removeClass("active-item"),this.shadowList.addClass("list-item-active"),e=e.filter(":eq("+a+")").addClass("active-item"),c&&(this.changeValue(e),this.scrollIntoView(e)),this.index=a}};(function(){f||c.defineNodeNameProperty("datalist",
"options",{prop:{writeable:!1,get:function(){var a=b("select",this);a[0]?a=a[0].options:(a=b("option",this).get(),a.length&&c.warn("you should wrap you option-elements for a datalist in a select element to support IE and other old browsers."));return a}}});var a={autocomplete:{attr:{get:function(){var a=b.data(this,"datalistWidget");return a?a._autocomplete:"autocomplete"in this?this.autocomplete:this.getAttribute("autocomplete")},set:function(a){var c=b.data(this,"datalistWidget");c?(c._autocomplete=
a,"off"==a&&c.hideList()):"autocomplete"in this?this.autocomplete=a:this.setAttribute("autocomplete",a)}}}};if(!f||!1 in b("<input />")[0])a.selectedOption={prop:{writeable:!1,get:function(){var a=b.prop(this,"list"),c=null,e;if(!a)return c;e=b.attr(this,"value");if(!e)return c;a=b.prop(a,"options");if(!a.length)return c;b.each(a,function(a,d){if(e==b.prop(d,"value"))return c=d,!1});return c}}};a.list=f?{attr:{get:function(){var a=c.contentAttr(this,"list");null!=a?this.removeAttribute("list"):a=
b.data(this,"datalistListAttr");return null==a?m:a},set:function(a){b.data(this,"datalistListAttr",a);c.objectCreate(q,m,{input:this,id:a,datalist:b.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"}:{attr:{get:function(){var a=c.contentAttr(this,"list");return null==a?m:a},set:function(a){c.contentAttr(this,"list",a);c.objectCreate(q,m,{input:this,id:a,datalist:b.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"};c.defineNodeNameProperties("input",
a);if(b.event.customEvent)b.event.customEvent.updateDatalist=!0,b.event.customEvent.updateInput=!0,b.event.customEvent.datalistselect=!0;c.addReady(function(a,b){b.filter("datalist > select, datalist, datalist > option, datalist > select > option").closest("datalist").triggerHandler("updateDatalist")})})()}})()});
