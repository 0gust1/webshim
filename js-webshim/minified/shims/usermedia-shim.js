webshim.register("usermedia-shim",function(a,b){"use strict";function c(a,c,e){if(i){if(!c)return;b.mediaelement.createSWF?d(a,c,e):(b.loader.loadList(["swfmini-embed"]),b.mediaelement.loadSwf=!0,b.reTest(["mediaelement-jaris"],!0),b.ready("mediaelement-jaris",function(){d(a,c,e)}))}else e&&e({name:"NOT_SUPPORTED_ERROR"})}function d(b,c,d){var h,i,m=a.extend({},j.vars),n=a.extend({},j.params),o=a.extend({},j.attrs);g++,h=f+g,o.id=h,o.name=h,a.extend(m,{id:h,evtId:h,controls:"false",autostart:"false",streamtype:"usermedia",video:!!b.video,audio:!!b.audio}),i=a('<div class="ws-mediastreamrequest-overlay"><div id="'+h+'"></div></div>').appendTo("body"),k.jarisEvent[h]=function(a){l[a.type]&&("NOT_SUPPORTED_ERROR"==a.type?(d({name:"NOT_SUPPORTED_ERROR"}),i.remove()):"PERMISSION_DENIED"==a.type?(d({name:"PERMISSION_DENIED"}),i.remove()):"MANDATORY_UNSATISFIED_ERROR"==a.type?(d({name:"MANDATORY_UNSATISFIED_ERROR"}),i.remove()):(i.addClass("hide-streamrequest"),c(new e(i,h,a))))},swfmini.embedSWF(j.playerPath,h,"100%","100%","11.3",!1,m,n,o,function(){})}function e(a,c){b.defineProperties(this,{_swf:{value:a.find("object")[0],enumerable:!1},_id:{value:c,enumerable:!1},_wsStreamId:{value:"webshimstream:"+c,enumerable:!1}})}var f="webshimstream",g=0,h={},i=swfmini.hasFlashPlayerVersion("11.3"),j=b.cfg.mediaelement,k=b.mediaelement,l={NOT_SUPPORTED_ERROR:1,PERMISSION_DENIED:1,MANDATORY_UNSATISFIED_ERROR:1,onUserSuccess:1};e.prototype={currentTime:0,stop:a.noop,getAudioTracks:a.noop,getVideoTracks:a.noop},URL._nativeCreateObjectURL=URL.createObjectURL,URL._nativeRevokeObjectURL=URL.revokeObjectURL,URL.createObjectURL=function(a){var b="";return URL._nativeCreateObjectURL&&!a._wsStreamId?b=URL._nativeCreateObjectURL(a):a._wsStreamId&&(b=a._wsStreamId,h[b]=a),b},URL.revokeObjectURL=function(a){return h[a]&&delete h[a],URL._nativeRevokeObjectURL?URL._nativeRevokeObjectURL(a):void 0},b.usermediastreams=h,b.getUserMedia=c,navigator.wsGetUserMedia=c});