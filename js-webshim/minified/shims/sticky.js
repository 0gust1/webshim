webshim.register("sticky",function(a,b,c,d){"use strict";function e(a,b,c){var e=a+":",f=d.createElement("test"),g=f.style;return g.cssText=c?e+b:e+["-webkit-","-moz-","-ms-","-o-",""].join(b+";"+e)+b+";",g[a]}function f(){return{top:a.css(this,"top"),bottom:a.css(this,"bottom")}}function g(c){h++,i++,this.evtid=".wsstickyid"+h,this.$el=a(c).data("wsSticky",this),this.$parent=this.$el.parent(),this.elStyle=c.style,this.ankered="",this.isSticky=!1,this.$placeholder=null,this.stickyData={inline:{}},this.parentData={},this.hasOverflowVisibleContainer()?(this.addEvents(),this.update(!0)):b.warn("we currently only support sticky with overflow visible containers")}var h=0,i=0,j=a(c),k=function(){var a,b="pageYOffset";return b in c?function(){return c[b]}:(a=d.documentElement,function(){return a.scrollTop})}(),l={fixed:e("position","fixed",!0),sticky:e("position","sticky")};g.prototype={addEvents:function(){var b=this,c=function(){b.update()};j.on("scroll"+this.evtid,function(){b.ankered&&b.$el[0].offsetWidth&&b.updatePos()}).one("load",c),a(d).on("updateshadowdom"+this.evtid,c),this.$el.on("remove"+this.evtid+" destroysticky"+this.evtid,function(){j.off(b.evtid),a(d).off(b.evtid),b.$el.off(b.evtid),b.$el.removeData("wsSticky").removeClass("ws-sticky"),b.$placeholder&&(b.$el.removeClass("ws-sticky-on"),b.$placeholder.remove()),i--}),this.$el.on("updatesticky"+this.evtid,function(){b.update(!0)}),this.$el.on("changesticky"+this.evtid,function(){b.trashPosition(!0)})},hasOverflowVisibleContainer:function(){return"visible"==(this.$parent.css("overflowY")||this.$parent.css("overflow")||"visible")},trashPosition:function(){this.isSticky&&this.removeSticky(),this.update(!0)},getPosition:function(){this.isSticky||(this.position={top:this.$el.css("top"),bottom:this.$el.css("bottom")},("auto"!=this.position.top&&"auto"!=this.position.bottom||"auto"==this.position.top&&"auto"==this.position.bottom)&&(this.position=a.swap(this.$el[0],{position:"absolute"},f)),"auto"!==this.position.top?(delete this.position.bottom,this.ankered="top"):"auto"!==this.position.bottom&&(delete this.position.top,this.ankered="bottom"),"top"==this.ankered?this.position.top=parseFloat(this.position.top,10)||0:"bottom"==this.ankered&&(this.position.bottom=parseFloat(this.position.bottom,10)||0),this.inlineTop=this.elStyle.top,this.inlineBottom=this.elStyle.bottom)},getStickyData:function(){this.stickyData.top=this.$el.offset().top,this.stickyData.scrollTop=this.stickyData.top-(parseFloat(this.$el.css("marginTop"),10)||0),this.stickyData.outerHeight=this.$el.outerHeight(!0),this.stickyData.bottom=this.stickyData.top+this.stickyData.outerHeight-(parseFloat(this.$el.css("marginTop"),10)||0),this.stickyData.width=this.$el.width(),this.stickyData.inline.width=this.elStyle.width,"top"==this.ankered?this.stickyData.inline.top=this.elStyle.top:"bottom"==this.ankered&&(this.stickyData.inline.bottom=this.elStyle.bottom)},getParentData:function(){this.parentData.top=this.$parent.offset().top+(parseFloat(this.$parent.css("borderTopWidth"),10)||0)+(parseFloat(this.$parent.css("paddingTop"),10)||0),this.parentData.height=this.$parent.height(),this.parentData.bottom=this.parentData.top+this.parentData.height},updateDimension:function(a){this.isSticky&&this.removeSticky(),this.getParentData(),this.getStickyData(),"bottom"==this.ankered&&(this.viewportBottomAnker=j.height()-this.position.bottom),a||this.updatePos(!0)},updatePos:function(a){var b,c,d,e=k();"top"==this.ankered?(b=e+this.position.top,this.stickyData.scrollTop<b&&e-9<=this.parentData.bottom&&(d=b+this.stickyData.outerHeight-this.parentData.bottom,d>=0?d*=-1:d=!1,c=!0)):"bottom"==this.ankered&&(b=e+this.viewportBottomAnker,this.stickyData.bottom>b&&b+9>=this.parentData.top&&(c=!0,d=b-this.parentData.top-this.stickyData.outerHeight,d>=0&&(d=!1))),c?(this.isSticky||(a||this.updateDimension(!0),this.$placeholder||(this.$placeholder=this.$el.clone().addClass("ws-fixedsticky-placeholder")),this.$placeholder.insertAfter(this.$el).outerHeight(this.elOuterHeight),this.isSticky=!0,this.$el.addClass("ws-sticky-on"),this.stickyData.width!=this.$el.width()&&this.$el.width(this.stickyData.width)),d&&("top"==this.ankered?this.elStyle.top=this.position.top+d+"px":"bottom"==this.ankered&&(this.elStyle.bottom=this.position.bottom+d+"px"))):this.isSticky&&this.removeSticky()},removeSticky:function(){this.$el.removeClass("ws-sticky-on"),this.$el.css(this.stickyData.inline),this.$placeholder.detach(),this.isSticky=!1},update:function(a){(this.$el[0].offsetWidth||!this.ankered)&&(a&&this.getPosition(),this.updateDimension())}};var m=function(){m=a.noop,b.ready("WINDOWLOAD",function(){b.loader.loadList(["dom-extend"]),b.ready("dom-extend",function(){b.addShadowDom()})})},n=function(){a.data(this,"wsSticky")||(a(this).addClass("ws-sticky"),new g(this),m())};!l.sticky&&l.fixed&&(a(d).on("wssticky",function(a){n.call(a.target)}),a(function(){b.addReady(function(b,c){a(".ws-sticky",b).add(c.filter(".ws-sticky")).each(n)})})),"complete"==d.readyState&&b.isReady("WINDOWLOAD",!0)});