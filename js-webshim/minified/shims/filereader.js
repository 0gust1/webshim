webshim.register("filereader",function(a,b,c){"use strict";function d(){var c=this,d=a(this),f=new e.FileInput({browse_button:this,accept:a.prop(this,"accept"),multiple:a.prop(this,"multiple")});f.onchange=function(a){b.data(c,"fileList",a.target.files),d.trigger("change")},b.data(c,"filePicker",f),f.init()}var e=c.mOxie,f='input[type="file"].ws-filereader';e.Env.swf_url=b.cfg.basePath+"moxie/flash/Moxie.cdn.swf",e.Env.xap_url=b.cfg.basePath+"moxie/flash/Moxie.cdn.xap",b.defineNodeNameProperty("input","files",{prop:{writeable:!1,get:function(){return"file"!=this.type?null:(a(this).is(".ws-filereader")||b.error("please add the 'ws-filereader' class to your input[type='file'] to implement files-property"),b.data(this,"fileList")||c.FileList&&b.data(this,"fileList",new FileList)||[])}}}),c.FileReader=e.FileReader,b.reflectProperties(["input"],["accept"]),null==a("<input />").prop("multiple")&&b.defineNodeNamesBooleanProperty(["input"],["multiple"]),b.onNodeNamesPropertyModify("input","disabled",function(a,c){var d=b.data(this,"filePicker");d&&d.disable(c)}),b.addReady(function(b,c){a(b.querySelectorAll(f)).add(c.filter(f)).each(d)})});